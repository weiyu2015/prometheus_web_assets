{"version":3,"sources":["vendor/flot/jquery.flot.js","vendor/flot/jquery.flot.stack.js","vendor/flot/jquery.flot.time.js","vendor/flot/jquery.flot.crosshair.js","globals.ts","Navbar.tsx","hooks/useFetch.ts","components/withStatusIndicator.tsx","pages/graph/ExpressionInput.tsx","pages/graph/TimeInput.tsx","pages/graph/GraphControls.tsx","pages/graph/SeriesName.tsx","pages/graph/Legend.tsx","pages/graph/GraphHelpers.ts","pages/graph/Graph.tsx","pages/graph/GraphTabContent.tsx","pages/graph/DataTable.tsx","pages/graph/QueryStatsView.tsx","pages/graph/Panel.tsx","utils/index.ts","pages/alerts/CollapsibleAlertPanel.tsx","components/Checkbox.tsx","pages/alerts/AlertContents.tsx","pages/alerts/Alerts.tsx","pages/config/Config.tsx","pages/flags/Flags.tsx","pages/rules/RulesContent.tsx","pages/rules/Rules.tsx","components/ToggleMoreLess.tsx","pages/serviceDiscovery/LabelsTable.tsx","pages/serviceDiscovery/Services.tsx","pages/status/Status.tsx","pages/targets/Filter.tsx","pages/targets/EndpointLink.tsx","pages/targets/TargetLabels.tsx","hooks/useLocalStorage.tsx","pages/targets/ScrapePoolPanel.tsx","pages/targets/target.ts","pages/targets/ScrapePoolList.tsx","pages/targets/Targets.tsx","pages/graph/PanelList.tsx","pages/tsdbStatus/TSDBStatus.tsx","App.tsx","index.tsx","pages/targets/ScrapePoolPanel.module.css","pages/targets/Filter.module.css","pages/targets/TargetLabels.module.css"],"names":["$","color","make","r","g","b","a","o","add","c","d","i","length","charAt","normalize","scale","f","toString","join","clamp","min","value","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","window","jQuery","hasOwnProperty","Object","prototype","Canvas","cls","container","element","children","document","createElement","className","direction","position","left","top","appendTo","getContext","G_vmlCanvasManager","Error","initElement","this","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","resize","width","height","textContainer","text","_textCache","_textSizeCache","flotTextSizeCache","Plot","placeholder","data_","options_","plugins","series","options","colors","legend","show","noColumns","labelFormatter","labelBoxBorderColor","margin","backgroundColor","backgroundOpacity","sorted","xaxis","mode","font","tickColor","transform","inverseTransform","autoscaleMargin","ticks","tickFormatter","labelWidth","labelHeight","reserveSpace","tickLength","alignTicksWithAxis","tickDecimals","tickSize","minTickSize","yaxis","xaxes","yaxes","points","radius","lineWidth","fill","fillColor","symbol","lines","steps","bars","barWidth","align","horizontal","zero","shadowSize","highlightColor","grid","aboveData","borderColor","labelMargin","eventSectionHeight","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","surface","overlay","eventHolder","ctx","octx","plotOffset","right","bottom","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","processRange","drawBackground","drawSeries","draw","bindEvents","drawOverlay","shutdown","plot","executeHooks","hook","args","concat","apply","setData","s","extend","data","push","parseData","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","colori","v","getOrCreateAxis","axisNumber","fillInSeriesOptions","j","k","ps","val","p","format","topSentry","Number","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","fakeInfinity","MAX_VALUE","updateAxis","axis","datamin","datamax","each","allAxes","_","used","datapoints","x","number","required","y","stack","autoscale","defaultValue","pointsize","insertSteps","nullify","isNaN","Infinity","xmin","ymin","xmax","ymax","delta","processData","obj","coord","n","grep","canvasToAxisCoords","pos","c2p","undefined","x1","y1","axes","redrawTimeout","clearTimeout","unbind","onMouseMove","onMouseLeave","onClick","measureTickLabels","opts","maxWidth","Math","floor","legacyStyles","layer","t","label","info","getTextInfo","allocateAxisBoxFirstPhase","lw","lh","isXAxis","padding","eventSectionPadding","innermost","outermost","first","found","box","setupGrid","showGrid","axisOpts","wideFactor","widen","abs","setRange","allocatedAxes","snaped","setupTickGeneration","setTicks","snapRangeToTicks","minMargin","margins","ceil","adjustLayoutForThingsStickingOut","allocateAxisBoxSecondPhase","identity","it","p2c","setTransformationHelpers","tick","halign","valign","removeText","addText","html","find","remove","fragments","entries","rowStarted","lf","isFunction","sort","reverse","ascending","entry","table","replace","div","prependTo","insertLegend","noTicks","sqrt","dec","log","LN10","maxDec","size","magn","pow","norm","scaledDecimals","tickGenerator","prev","start","base","NaN","factor","formatted","round","decimal","indexOf","precision","substr","otherAxis","niceTicks","extraDec","ts","test","toFixed","oticks","changed","clear","save","translate","fillStyle","getColorOrGradient","fillRect","restore","drawGrid","render","triggerRedrawOverlay","extractRange","ranges","from","to","key","tmp","bw","bc","getAxes","xrange","yrange","xequal","yequal","subPixel","beginPath","strokeStyle","moveTo","lineTo","stroke","xoff","yoff","strokeRect","plotLine","xoffset","yoffset","axisx","axisy","prevx","prevy","x2","y2","lineJoin","sw","angle","PI","sin","cos","getFillStyle","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","plotLineArea","drawSeriesLines","abandonedPoints","beforeX","afterX","emptyPoints","olddatapoints","drawSeriesPoints","drawOrphanedPoints","barLeft","fillStyleCallback","barRight","drawBar","plotBars","drawSeriesBars","plotPoints","offset","shadow","arc","closePath","w","drawLeft","drawRight","drawTop","drawBottom","filloptions","seriesColor","getPlaceholder","getCanvas","getPlotOffset","getData","getXAxes","getYAxes","getOptions","highlight","unhighlight","pointOffset","point","destroy","removeData","empty","highlights","classes","init","initPlugins","axisOptions","axisCount","fontSize","fontSizeDefault","fontDefaults","style","variant","weight","family","lineHeight","x2axis","y2axis","coloredAreas","coloredAreasColor","parseOptions","existing","setupCanvases","mousemove","bind","click","e","triggerClickHoverEvent","isSelecting","eventname","event","seriesFilter","canvasX","pageX","canvasY","pageY","ctrlKey","metaKey","item","mouseX","mouseY","maxDistance","smallestDistance","mx","my","maxx","maxy","dx","dy","dist","datapoint","slice","dataIndex","seriesIndex","findNearbyItem","h","auto","trigger","setTimeout","hi","drawBarHighlight","drawPointHighlight","indexOfHighlight","splice","pointRadius","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","fn","detach","parentNode","removeChild","clearRect","cache","layerKey","call","getTextLayer","layerCache","hide","styleKey","styleCache","positions","active","rendered","append","insertAfter","addClass","textStyle","outerWidth","outerHeight","version","other","allseries","findMatchingSeries","px","py","intery","qx","qy","otherps","otherpoints","newpoints","withlines","withbottom","withsteps","keyOffset","accumulateOffset","floorInBase","formatDate","fmt","monthNames","dayNames","strftime","leftPad","pad","escape","hours","getHours","isAM","hours12","getDay","getMonth","getDate","getMinutes","getSeconds","getFullYear","makeUtcWrapper","addProxyMethod","sourceObj","sourceMethod","targetObj","targetMethod","arguments","utc","date","props","dateGenerator","timezone","Date","timeUnitSize","second","minute","hour","day","month","quarter","year","baseSpec","specMonths","specQuarters","axisName","minSize","unit","step","setSeconds","setMinutes","setHours","setMonth","setFullYear","setMilliseconds","setDate","carry","getTime","end","setTime","timeformat","useQuarters","span","suffix","twelveHourClock","hourCode","crosshair","locked","onMouseOut","getSelection","setCrosshair","clearCrosshair","lockCrosshair","unlockCrosshair","mouseout","adj","drawX","drawY","jquery","moment","require","Navigation","pathPrefix","consolesLink","useState","isOpen","setIsOpen","Navbar","dark","expand","fixed","NavbarToggler","Collapse","navbar","justifyContent","Nav","NavItem","NavLink","href","tag","Link","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","DropdownMenu","DropdownItem","location","search","useFetch","url","status","response","setResponse","error","setError","isLoading","setIsLoading","useEffect","fetch","credentials","ok","statusText","json","fetchData","withStatusIndicator","Component","customErrorMsg","componentTitle","rest","Alert","displayName","message","icon","faSpinner","spin","ExpressionInput","constructor","super","exprInputRef","React","createRef","setHeight","current","offsetHeight","clientHeight","scrollHeight","setState","handleInput","setValue","onExpressionChange","handleKeyPress","executeQuery","shiftKey","preventDefault","getSearchMatches","input","expressions","fuzzy","filter","pre","post","createAutocompleteSection","downshift","inputValue","closeMenu","highlightedIndex","autocompleteSections","index","sections","reduce","acc","title","items","matches","map","original","string","itemProps","getItemProps","dangerouslySetInnerHTML","__html","sanitizeHTML","allowedTags","getMenuProps","state","componentDidMount","componentDidUpdate","prevProps","onSelect","InputGroup","InputGroupAddon","addonType","InputGroupText","loading","faSearch","Input","onInput","autoFocus","type","rows","onKeyPress","innerRef","getInputProps","onKeyDown","nativeEvent","preventDownshiftDefault","blur","Button","library","faChevronLeft","faChevronRight","faCalendarCheck","faArrowUp","faArrowDown","faTimes","dom","watch","TimeInput","timeInputRef","$time","getBaseTime","time","valueOf","calcShiftRange","range","increaseTime","onChangeTime","decreaseTime","clearTime","useLocalTime","tz","guess","datetimepicker","icons","today","buttons","showClose","showToday","sideBySide","locale","timeZone","defaultDate","on","componentWillUnmount","fixedWidth","onFocus","onBlur","includes","GraphControls","rangeRef","resolutionRef","rangeSteps","onChangeRangeInput","rangeText","parseRange","changeRangeInput","onChangeRange","formatRange","increaseRange","decreaseRange","resolution","Form","inline","onSubmit","faMinus","faPlus","endTime","onChangeEndTime","onChangeResolution","bsSize","ButtonGroup","onChangeStacking","stacked","faChartLine","faChartArea","SeriesName","labels","labelNodes","__name__","renderFormatted","metricToSeriesName","Legend","PureComponent","selectedIndexes","handleSeriesSelect","ev","selected","chartData","idx","onSeriesToggle","shouldReset","onLegendMouseOut","onHover","canUseHover","onMouseOver","navigator","platform","formatValue","absY","getHoverColor","toHoverColor","normalizeData","queryParams","result","getColors","startTime","values","metric","currentValue","parseValue","Graph","chartRef","$chart","rafID","selectedSeriesIndexes","destroyPlot","showTicks","showMinorTicks","timeBase","tooltip","cssClass","content","xval","yval","dateTime","keys","escapeHTML","defaultTheme","isPresent","selectedIndex","handleSeriesHover","cancelAnimationFrame","requestAnimationFrame","plotSetAndDraw","handleLegendMouseOut","handleResize","handleWidth","onResize","skipOnMount","ref","GraphTabContent","lastQueryParams","resultType","limitSeries","DataTable","limited","doFormat","valueText","whiteSpace","Table","hover","QueryStatsView","loadTime","resultSeries","PanelType","PanelDefaultOptions","expr","Panel","abortInFlightFetch","exprInputValue","queryStart","now","onExecuteQuery","setOptions","abortController","AbortController","abort","getEndTime","params","URLSearchParams","query","path","signal","then","resp","stats","catch","handleExpressionChange","handleChangeRange","handleChangeEndTime","handleChangeResolution","handleChangeType","handleChangeStacking","prevOpts","newOpts","onOptionsChanged","pastQueries","metricNames","Row","Col","tabs","TabContent","activeTab","TabPane","tabId","removePanel","generateID","random","byEmptyString","entityMap","String","tsName","labelStrings","rangeUnits","rangeRE","RegExp","match","parseTime","timeText","humanizeDuration","milliseconds","sign","unsignedMillis","duration","ms","seconds","minutes","asDays","formatRelative","startStr","paramFormat","decodePanelOptionsFromQueryString","urlParams","substring","split","panels","urlParam","panelsCount","prefix","startsWith","prefixLen","id","param","parseOption","opt","decodedValue","decodeURIComponent","toQueryString","formatWithKey","paramName","encodeURIComponent","formatParam","formatTime","createExpressionLink","mapObjEntries","cb","callAll","fns","Boolean","forEach","alertColors","firing","pending","inactive","Annotations","annotations","colSpan","CollapsibleAlertPanel","rule","showAnnotations","open","toggle","fade","cursor","faChevronDown","alerts","background","severity","summary","bordered","alert","verticalAlign","Badge","activeAt","memo","wrapperStyles","FormGroup","Label","userSelect","for","stateColorTuples","AlertsContent","groups","statsCount","setFilter","setShowAnnotations","marginRight","defaultChecked","ruleState","marginLeft","group","rules","some","GroupInfo","file","statesCounter","AlertsWithStatusIndicator","Alerts","ruleStatsCount","el","YamlContent","yaml","ConfigWithStatusIndicator","ConfigContent","copied","setCopied","config","onCopy","disabled","Config","FlagsContent","striped","FlagsWithStatusIndicator","Flags","GraphExpressionLink","RulesWithStatusIndicator","getBadgeColor","lastEvaluation","evaluationTime","health","toUpperCase","lastError","Rules","ToggleMoreLess","showMore","formatLabels","LabelsTable","setShowMore","discoveredLabels","isDropped","fontWeight","ServiceDiscoveryContent","activeTargets","droppedTargets","targets","scrapePool","total","job","processSummary","target","processTargets","ServicesWithStatusIndicator","ServiceDiscovery","statusConfig","customizeValue","toUTCString","CWD","reloadConfigSuccess","lastConfigTime","chunkCount","timeSeriesCount","corruptionCount","goroutineCount","storageRetention","activeAlertmanagers","customRow","alertMgrs","URL","origin","pathname","droppedAlertmanagers","skip","StatusContent","StatusWithStatusIndicator","Status","fetchResult","Filter","showHealthy","btnProps","all","styles","btn","unhealthy","EndpointLink","endpoint","globalUrl","host","protocol","searchParams","Array","labelName","labelValue","TargetLabels","tooltipOpen","setTooltipOpen","Tooltip","CSS","textAlign","discovered","useLocalStorage","localStorageKey","initialState","localStorageState","JSON","localStorage","getItem","stringify","serializedState","setItem","columns","ScrapePoolPanel","targetGroup","expanded","modifier","upCount","anchorProps","column","scrapeUrl","lastScrape","lastScrapeDuration","getColor","errors","ScrapePoolContent","targetGroups","pools","up","showUnhealthy","isHealthy","ScrapePoolListWithStatusIndicator","ScrapePoolList","responseStatus","badResponse","Targets","filterProps","scrapePoolListProps","updateURL","nextPanels","history","pushState","PanelListContent","metrics","queryHistoryEnabled","setPanels","historyItems","setLocalStorageHistoryItems","addPanel","onpopstate","handleExecuteQuery","extendedItems","panel","PanelList","setDelta","setUseLocalTime","enableQueryHistory","setEnableQueryHistory","metricsRes","metricsErr","browserTime","timeRes","timeErr","serverTime","display","onChange","checked","TSDBStatusContent","labelValueCountByLabelName","seriesCountByMetricName","memoryInBytesByLabelName","seriesCountByLabelValuePair","TSDBStatusContentWithStatusIndicator","TSDBStatus","App","Container","fluid","paddingTop","basepath","GLOBAL_PATH_PREFIX","GLOBAL_CONSOLES_LINK","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.3f9caea1.chunk.js","sourcesContent":["/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-spread */\n/* eslint-disable no-loop-func */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-redeclare */\n/* eslint-disable no-useless-escape */\n/* eslint-disable prefer-const */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-var */\n/* Javascript plotting library for jQuery, version 0.8.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\n// for convenience\n\n/* Plugin for jQuery for working with colors.\n *\n * Version 1.1.\n *\n * Inspiration from jQuery color animation plugin by John Resig.\n *\n * Released under the MIT license by Ole Laursen, October 2009.\n *\n * Examples:\n *\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\n *   console.log(c.r, c.g, c.b, c.a);\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\n *\n * Note that .scale() and .add() return the same modified object\n * instead of making a new one.\n *\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\n * produce a color rather than just crashing.\n */\n\n(function($) {\n  $.color = {};\n  $.color.make = function(r, g, b, a) {\n    var o = {};\n    o.r = r || 0;\n    o.g = g || 0;\n    o.b = b || 0;\n    o.a = a != null ? a : 1;\n    o.add = function(c, d) {\n      for (var i = 0; i < c.length; ++i) o[c.charAt(i)] += d;\n      return o.normalize();\n    };\n    o.scale = function(c, f) {\n      for (var i = 0; i < c.length; ++i) o[c.charAt(i)] *= f;\n      return o.normalize();\n    };\n    o.toString = function() {\n      if (o.a >= 1) {\n        return 'rgb(' + [o.r, o.g, o.b].join(',') + ')';\n      } else {\n        return 'rgba(' + [o.r, o.g, o.b, o.a].join(',') + ')';\n      }\n    };\n    o.normalize = function() {\n      function clamp(min, value, max) {\n        return value < min ? min : value > max ? max : value;\n      }\n      o.r = clamp(0, parseInt(o.r), 255);\n      o.g = clamp(0, parseInt(o.g), 255);\n      o.b = clamp(0, parseInt(o.b), 255);\n      o.a = clamp(0, o.a, 1);\n      return o;\n    };\n    o.clone = function() {\n      return $.color.make(o.r, o.b, o.g, o.a);\n    };\n    return o.normalize();\n  };\n  $.color.extract = function(elem, css) {\n    var c;\n    do {\n      c = elem.css(css).toLowerCase();\n      if (c != '' && c != 'transparent') break;\n      elem = elem.parent();\n    } while (elem.length && !$.nodeName(elem.get(0), 'body'));\n    if (c == 'rgba(0, 0, 0, 0)') c = 'transparent';\n    return $.color.parse(c);\n  };\n  $.color.parse = function(str) {\n    var res,\n      m = $.color.make;\n    if ((res = /rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str)))\n      return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10));\n    if ((res = /rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str)))\n      return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10), parseFloat(res[4]));\n    if ((res = /rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str)))\n      return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55);\n    if (\n      (res = /rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(\n        str\n      ))\n    )\n      return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55, parseFloat(res[4]));\n    if ((res = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str)))\n      return m(parseInt(res[1], 16), parseInt(res[2], 16), parseInt(res[3], 16));\n    if ((res = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str)))\n      return m(parseInt(res[1] + res[1], 16), parseInt(res[2] + res[2], 16), parseInt(res[3] + res[3], 16));\n    var name = $.trim(str).toLowerCase();\n    if (name == 'transparent') return m(255, 255, 255, 0);\n    else {\n      res = lookupColors[name] || [0, 0, 0];\n      return m(res[0], res[1], res[2]);\n    }\n  };\n  var lookupColors = {\n    aqua: [0, 255, 255],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    black: [0, 0, 0],\n    blue: [0, 0, 255],\n    brown: [165, 42, 42],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgrey: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkviolet: [148, 0, 211],\n    fuchsia: [255, 0, 255],\n    gold: [255, 215, 0],\n    green: [0, 128, 0],\n    indigo: [75, 0, 130],\n    khaki: [240, 230, 140],\n    lightblue: [173, 216, 230],\n    lightcyan: [224, 255, 255],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    navy: [0, 0, 128],\n    olive: [128, 128, 0],\n    orange: [255, 165, 0],\n    pink: [255, 192, 203],\n    purple: [128, 0, 128],\n    violet: [128, 0, 128],\n    red: [255, 0, 0],\n    silver: [192, 192, 192],\n    white: [255, 255, 255],\n    yellow: [255, 255, 0],\n  };\n})(window.jQuery);\n\n// the actual Flot code\n(function($) {\n  // Cache the prototype hasOwnProperty for faster access\n\n  let hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\n  // operation produces the same effect as detach, i.e. removing the element\n  // without touching its jQuery data.\n\n  // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\n\n  if (!$.fn.detach) {\n    $.fn.detach = function() {\n      return this.each(function() {\n        if (this.parentNode) {\n          this.parentNode.removeChild(this);\n        }\n      });\n    };\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  // The Canvas object is a wrapper around an HTML5 <canvas> tag.\n  //\n  // @constructor\n  // @param {string} cls List of classes to apply to the canvas.\n  // @param {element} container Element onto which to append the canvas.\n  //\n  // Requiring a container is a little iffy, but unfortunately canvas\n  // operations don't work unless the canvas is attached to the DOM.\n\n  function Canvas(cls, container) {\n    var element = container.children('.' + cls)[0];\n\n    if (element == null) {\n      element = document.createElement('canvas');\n      element.className = cls;\n\n      $(element)\n        .css({ direction: 'ltr', position: 'absolute', left: 0, top: 0 })\n        .appendTo(container);\n\n      // If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\n\n      if (!element.getContext) {\n        if (window.G_vmlCanvasManager) {\n          element = window.G_vmlCanvasManager.initElement(element);\n        } else {\n          throw new Error(\n            \"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\"\n          );\n        }\n      }\n    }\n\n    this.element = element;\n\n    var context = (this.context = element.getContext('2d'));\n\n    // Determine the screen's ratio of physical to device-independent\n    // pixels.  This is the ratio between the canvas width that the browser\n    // advertises and the number of pixels actually present in that space.\n\n    // The iPhone 4, for example, has a device-independent width of 320px,\n    // but its screen is actually 640px wide.  It therefore has a pixel\n    // ratio of 2, while most normal devices have a ratio of 1.\n\n    let devicePixelRatio = window.devicePixelRatio || 1,\n      backingStoreRatio =\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1;\n\n    this.pixelRatio = devicePixelRatio / backingStoreRatio;\n\n    // Size the canvas to match the internal dimensions of its container\n\n    this.resize(container.width(), container.height());\n\n    // Collection of HTML div layers for text overlaid onto the canvas\n\n    this.textContainer = null;\n    this.text = {};\n\n    // Cache of text fragments and metrics, so we can avoid expensively\n    // re-calculating them when the plot is re-rendered in a loop.\n\n    this._textCache = {};\n    this._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\n  }\n\n  // Resizes the canvas to the given dimensions.\n  //\n  // @param {number} width New width of the canvas, in pixels.\n  // @param {number} width New height of the canvas, in pixels.\n\n  Canvas.prototype.resize = function(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error('Invalid dimensions for plot, width = ' + width + ', height = ' + height);\n    }\n\n    let element = this.element,\n      context = this.context,\n      pixelRatio = this.pixelRatio;\n\n    // Resize the canvas, increasing its density based on the display's\n    // pixel ratio; basically giving it more pixels without increasing the\n    // size of its element, to take advantage of the fact that retina\n    // displays have that many more pixels in the same advertised space.\n\n    // Resizing should reset the state (excanvas seems to be buggy though)\n\n    if (this.width != width) {\n      element.width = width * pixelRatio;\n      element.style.width = width + 'px';\n      this.width = width;\n    }\n\n    if (this.height != height) {\n      element.height = height * pixelRatio;\n      element.style.height = height + 'px';\n      this.height = height;\n    }\n\n    // Save the context, so we can reset in case we get replotted.  The\n    // restore ensure that we're really back at the initial state, and\n    // should be safe even if we haven't saved the initial state yet.\n\n    context.restore();\n    context.save();\n\n    // Scale the coordinate space to match the display density; so even though we\n    // may have twice as many pixels, we still want lines and other drawing to\n    // appear at the same size; the extra pixels will just make them crisper.\n\n    context.scale(pixelRatio, pixelRatio);\n  };\n\n  // Clears the entire canvas area, not including any overlaid HTML text\n\n  Canvas.prototype.clear = function() {\n    this.context.clearRect(0, 0, this.width, this.height);\n  };\n\n  // Finishes rendering the canvas, including managing the text overlay.\n\n  Canvas.prototype.render = function() {\n    let cache = this._textCache;\n\n    // For each text layer, add elements marked as active that haven't\n    // already been rendered, and remove those that are no longer active.\n\n    for (let layerKey in cache) {\n      if (hasOwnProperty.call(cache, layerKey)) {\n        let layer = this.getTextLayer(layerKey),\n          layerCache = cache[layerKey];\n\n        layer.hide();\n\n        for (let styleKey in layerCache) {\n          if (hasOwnProperty.call(layerCache, styleKey)) {\n            let styleCache = layerCache[styleKey];\n            for (let key in styleCache) {\n              if (hasOwnProperty.call(styleCache, key)) {\n                let positions = styleCache[key].positions;\n\n                for (var i = 0, position; (position = positions[i]); i++) {\n                  if (position.active) {\n                    if (!position.rendered) {\n                      layer.append(position.element);\n                      position.rendered = true;\n                    }\n                  } else {\n                    positions.splice(i--, 1);\n                    if (position.rendered) {\n                      position.element.detach();\n                    }\n                  }\n                }\n\n                if (positions.length == 0) {\n                  delete styleCache[key];\n                }\n              }\n            }\n          }\n        }\n\n        layer.show();\n      }\n    }\n  };\n\n  // Creates (if necessary) and returns the text overlay container.\n  //\n  // @param {string} classes String of space-separated CSS classes used to\n  //     uniquely identify the text layer.\n  // @return {object} The jQuery-wrapped text-layer div.\n\n  Canvas.prototype.getTextLayer = function(classes) {\n    let layer = this.text[classes];\n\n    // Create the text layer if it doesn't exist\n\n    if (layer == null) {\n      // Create the text layer container, if it doesn't exist\n\n      if (this.textContainer == null) {\n        this.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\n          .css({\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            'font-size': 'smaller',\n            color: '#545454',\n          })\n          .insertAfter(this.element);\n      }\n\n      layer = this.text[classes] = $('<div></div>')\n        .addClass(classes)\n        .css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0,\n        })\n        .appendTo(this.textContainer);\n    }\n\n    return layer;\n  };\n\n  // Creates (if necessary) and returns a text info object.\n  //\n  // The object looks like this:\n  //\n  // {\n  //     width: Width of the text's wrapper div.\n  //     height: Height of the text's wrapper div.\n  //     element: The jQuery-wrapped HTML div containing the text.\n  //     positions: Array of positions at which this text is drawn.\n  // }\n  //\n  // The positions array contains objects that look like this:\n  //\n  // {\n  //     active: Flag indicating whether the text should be visible.\n  //     rendered: Flag indicating whether the text is currently visible.\n  //     element: The jQuery-wrapped HTML div containing the text.\n  //     x: X coordinate at which to draw the text.\n  //     y: Y coordinate at which to draw the text.\n  // }\n  //\n  // Each position after the first receives a clone of the original element.\n  //\n  // The idea is that that the width, height, and general 'identity' of the\n  // text is constant no matter where it is placed; the placements are a\n  // secondary property.\n  //\n  // Canvas maintains a cache of recently-used text info objects; getTextInfo\n  // either returns the cached element or creates a new entry.\n  //\n  // @param {string} layer A string of space-separated CSS classes uniquely\n  //     identifying the layer containing this text.\n  // @param {string} text Text string to retrieve info for.\n  // @param {(string|object)=} font Either a string of space-separated CSS\n  //     classes or a font-spec object, defining the text's font and style.\n  // @param {number=} angle Angle at which to rotate the text, in degrees.\n  //     Angle is currently unused, it will be implemented in the future.\n  // @param {number=} width Maximum width of the text before it wraps.\n  // @return {object} a text info object.\n\n  Canvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\n    let textStyle, layerCache, styleCache, info;\n\n    // Cast the value to a string, in case we were given a number or such\n\n    text = '' + text;\n\n    // If the font is a font-spec object, generate a CSS font definition\n\n    if (typeof font === 'object') {\n      textStyle =\n        font.style +\n        ' ' +\n        font.variant +\n        ' ' +\n        font.weight +\n        ' ' +\n        font.size +\n        'px/' +\n        font.lineHeight +\n        'px ' +\n        font.family;\n    } else {\n      textStyle = font;\n    }\n\n    // Retrieve (or create) the cache for the text's layer and styles\n\n    layerCache = this._textCache[layer];\n\n    if (layerCache == null) {\n      layerCache = this._textCache[layer] = {};\n    }\n\n    styleCache = layerCache[textStyle];\n\n    if (styleCache == null) {\n      styleCache = layerCache[textStyle] = {};\n    }\n\n    info = styleCache[text];\n\n    // If we can't find a matching element in our cache, create a new one\n\n    if (info == null) {\n      var element = $('<div></div>')\n        .html(text)\n        .css({\n          position: 'absolute',\n          'max-width': width,\n          top: -9999,\n        })\n        .appendTo(this.getTextLayer(layer));\n\n      if (typeof font === 'object') {\n        element.css({\n          font: textStyle,\n          color: font.color,\n        });\n      } else if (typeof font === 'string') {\n        element.addClass(font);\n      }\n\n      info = styleCache[text] = { element: element, positions: [] };\n\n      let size = this._textSizeCache[text];\n      if (size) {\n        info.width = size.width;\n        info.height = size.height;\n      } else {\n        info.width = element.outerWidth(true);\n        info.height = element.outerHeight(true);\n        this._textSizeCache[text] = { width: info.width, height: info.height };\n      }\n      element.detach();\n    }\n\n    return info;\n  };\n\n  // Adds a text string to the canvas text overlay.\n  //\n  // The text isn't drawn immediately; it is marked as rendering, which will\n  // result in its addition to the canvas on the next render pass.\n  //\n  // @param {string} layer A string of space-separated CSS classes uniquely\n  //     identifying the layer containing this text.\n  // @param {number} x X coordinate at which to draw the text.\n  // @param {number} y Y coordinate at which to draw the text.\n  // @param {string} text Text string to draw.\n  // @param {(string|object)=} font Either a string of space-separated CSS\n  //     classes or a font-spec object, defining the text's font and style.\n  // @param {number=} angle Angle at which to rotate the text, in degrees.\n  //     Angle is currently unused, it will be implemented in the future.\n  // @param {number=} width Maximum width of the text before it wraps.\n  // @param {string=} halign Horizontal alignment of the text; either \"left\",\n  //     \"center\" or \"right\".\n  // @param {string=} valign Vertical alignment of the text; either \"top\",\n  //     \"middle\" or \"bottom\".\n\n  Canvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\n    let info = this.getTextInfo(layer, text, font, angle, width),\n      positions = info.positions;\n\n    // Tweak the div's position to match the text's alignment\n\n    if (halign == 'center') {\n      x -= info.width / 2;\n    } else if (halign == 'right') {\n      x -= info.width;\n    }\n\n    if (valign == 'middle') {\n      y -= info.height / 2;\n    } else if (valign == 'bottom') {\n      y -= info.height;\n    }\n\n    // Determine whether this text already exists at this position.\n    // If so, mark it for inclusion in the next render pass.\n\n    for (var i = 0, position; (position = positions[i]); i++) {\n      if (position.x == x && position.y == y) {\n        position.active = true;\n        return;\n      }\n    }\n\n    // If the text doesn't exist at this position, create a new entry\n\n    // For the very first position we'll re-use the original element,\n    // while for subsequent ones we'll clone it.\n\n    position = {\n      active: true,\n      rendered: false,\n      element: positions.length ? info.element.clone() : info.element,\n      x: x,\n      y: y,\n    };\n\n    positions.push(position);\n\n    // Move the element to its final position within the container\n\n    position.element.css({\n      top: Math.round(y),\n      left: Math.round(x),\n      'text-align': halign, // In case the text wraps\n    });\n  };\n\n  // Removes one or more text strings from the canvas text overlay.\n  //\n  // If no parameters are given, all text within the layer is removed.\n  //\n  // Note that the text is not immediately removed; it is simply marked as\n  // inactive, which will result in its removal on the next render pass.\n  // This avoids the performance penalty for 'clear and redraw' behavior,\n  // where we potentially get rid of all text on a layer, but will likely\n  // add back most or all of it later, as when redrawing axes, for example.\n  //\n  // @param {string} layer A string of space-separated CSS classes uniquely\n  //     identifying the layer containing this text.\n  // @param {number=} x X coordinate of the text.\n  // @param {number=} y Y coordinate of the text.\n  // @param {string=} text Text string to remove.\n  // @param {(string|object)=} font Either a string of space-separated CSS\n  //     classes or a font-spec object, defining the text's font and style.\n  // @param {number=} angle Angle at which the text is rotated, in degrees.\n  //     Angle is currently unused, it will be implemented in the future.\n\n  Canvas.prototype.removeText = function(layer, x, y, text, font, angle) {\n    if (text == null) {\n      let layerCache = this._textCache[layer];\n      if (layerCache != null) {\n        for (let styleKey in layerCache) {\n          if (hasOwnProperty.call(layerCache, styleKey)) {\n            let styleCache = layerCache[styleKey];\n            for (let key in styleCache) {\n              if (hasOwnProperty.call(styleCache, key)) {\n                var positions = styleCache[key].positions;\n                for (var i = 0, position; (position = positions[i]); i++) {\n                  position.active = false;\n                }\n              }\n            }\n          }\n        }\n      }\n    } else {\n      var positions = this.getTextInfo(layer, text, font, angle).positions;\n      for (var i = 0, position; (position = positions[i]); i++) {\n        if (position.x == x && position.y == y) {\n          position.active = false;\n        }\n      }\n    }\n  };\n\n  ///////////////////////////////////////////////////////////////////////////\n  // The top-level container for the entire plot.\n\n  function Plot(placeholder, data_, options_, plugins) {\n    // data is on the form:\n    //   [ series1, series2 ... ]\n    // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n    // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\n\n    let series = [],\n      options = {\n        // the color theme used for graphs\n        colors: ['#edc240', '#afd8f8', '#cb4b4b', '#4da74d', '#9440ed'],\n        legend: {\n          show: true,\n          noColumns: 1, // number of colums in legend table\n          labelFormatter: null, // fn: string -> string\n          labelBoxBorderColor: '#ccc', // border color for the little label boxes\n          container: null, // container (as jQuery object) to put legend in, null means default on top of graph\n          position: 'ne', // position of default legend container within plot\n          margin: 5, // distance from grid edge to default legend container within plot\n          backgroundColor: null, // null means auto-detect\n          backgroundOpacity: 0.85, // set to 0 to avoid background\n          sorted: null, // default to no legend sorting\n        },\n        xaxis: {\n          show: null, // null = auto-detect, true = always, false = never\n          position: 'bottom', // or \"top\"\n          mode: null, // null or \"time\"\n          font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\n          color: null, // base color, labels, ticks\n          tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\n          transform: null, // null or f: number -> number to transform axis\n          inverseTransform: null, // if transform is set, this should be the inverse function\n          min: null, // min. value to show, null means set automatically\n          max: null, // max. value to show, null means set automatically\n          autoscaleMargin: null, // margin in % to add if auto-setting min/max\n          ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\n          tickFormatter: null, // fn: number -> string\n          labelWidth: null, // size of tick labels in pixels\n          labelHeight: null,\n          reserveSpace: null, // whether to reserve space even if axis isn't shown\n          tickLength: null, // size in pixels of ticks, or \"full\" for whole line\n          alignTicksWithAxis: null, // axis number or null for no sync\n          tickDecimals: null, // no. of decimals, null means auto\n          tickSize: null, // number or [number, \"unit\"]\n          minTickSize: null, // number or [number, \"unit\"]\n        },\n        yaxis: {\n          autoscaleMargin: 0.02,\n          position: 'left', // or \"right\"\n        },\n        xaxes: [],\n        yaxes: [],\n        series: {\n          points: {\n            show: false,\n            radius: 3,\n            lineWidth: 2, // in pixels\n            fill: true,\n            fillColor: '#ffffff',\n            symbol: 'circle', // or callback\n          },\n          lines: {\n            // we don't put in show: false so we can see\n            // whether lines were actively disabled\n            lineWidth: 2, // in pixels\n            fill: false,\n            fillColor: null,\n            steps: false,\n            // Omit 'zero', so we can later default its value to\n            // match that of the 'fill' option.\n          },\n          bars: {\n            show: false,\n            lineWidth: 2, // in pixels\n            barWidth: 1, // in units of the x axis\n            fill: true,\n            fillColor: null,\n            align: 'left', // \"left\", \"right\", or \"center\"\n            horizontal: false,\n            zero: true,\n          },\n          shadowSize: 3,\n          highlightColor: null,\n        },\n        grid: {\n          show: true,\n          aboveData: false,\n          color: '#545454', // primary color used for outline and labels\n          backgroundColor: null, // null for transparent, else color\n          borderColor: null, // set if different from the grid color\n          tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\n          margin: 0, // distance from the canvas edge to the grid\n          labelMargin: 5, // in pixels\n          eventSectionHeight: 0, // space for event section\n          axisMargin: 8, // in pixels\n          borderWidth: 2, // in pixels\n          minBorderMargin: null, // in pixels, null means taken from points radius\n          markings: null, // array of ranges or fn: axes -> array of ranges\n          markingsColor: '#f4f4f4',\n          markingsLineWidth: 2,\n          // interactive stuff\n          clickable: false,\n          hoverable: false,\n          autoHighlight: true, // highlight in case mouse is near\n          mouseActiveRadius: 10, // how far the mouse can be away to activate an item\n        },\n        interaction: {\n          redrawOverlayInterval: 1000 / 60, // time between updates, -1 means in same flow\n        },\n        hooks: {},\n      },\n      surface = null, // the canvas for the plot itself\n      overlay = null, // canvas for interactive stuff on top of plot\n      eventHolder = null, // jQuery object that events should be bound to\n      ctx = null,\n      octx = null,\n      xaxes = [],\n      yaxes = [],\n      plotOffset = { left: 0, right: 0, top: 0, bottom: 0 },\n      plotWidth = 0,\n      plotHeight = 0,\n      hooks = {\n        processOptions: [],\n        processRawData: [],\n        processDatapoints: [],\n        processOffset: [],\n        processRange: [],\n        drawBackground: [],\n        drawSeries: [],\n        draw: [],\n        bindEvents: [],\n        drawOverlay: [],\n        shutdown: [],\n      },\n      plot = this;\n\n    // public functions\n    plot.setData = setData;\n    plot.setupGrid = setupGrid;\n    plot.draw = draw;\n    plot.getPlaceholder = function() {\n      return placeholder;\n    };\n    plot.getCanvas = function() {\n      return surface.element;\n    };\n    plot.getPlotOffset = function() {\n      return plotOffset;\n    };\n    plot.width = function() {\n      return plotWidth;\n    };\n    plot.height = function() {\n      return plotHeight;\n    };\n    plot.offset = function() {\n      let o = eventHolder.offset();\n      o.left += plotOffset.left;\n      o.top += plotOffset.top;\n      return o;\n    };\n    plot.getData = function() {\n      return series;\n    };\n    plot.getAxes = function() {\n      var res = {};\n      $.each(xaxes.concat(yaxes), function(_, axis) {\n        if (axis) res[axis.direction + (axis.n != 1 ? axis.n : '') + 'axis'] = axis;\n      });\n      return res;\n    };\n    plot.getXAxes = function() {\n      return xaxes;\n    };\n    plot.getYAxes = function() {\n      return yaxes;\n    };\n    plot.c2p = canvasToAxisCoords;\n    plot.p2c = axisToCanvasCoords;\n    plot.getOptions = function() {\n      return options;\n    };\n    plot.highlight = highlight;\n    plot.unhighlight = unhighlight;\n    plot.triggerRedrawOverlay = triggerRedrawOverlay;\n    plot.pointOffset = function(point) {\n      return {\n        left: parseInt(xaxes[axisNumber(point, 'x') - 1].p2c(+point.x) + plotOffset.left, 10),\n        top: parseInt(yaxes[axisNumber(point, 'y') - 1].p2c(+point.y) + plotOffset.top, 10),\n      };\n    };\n    plot.shutdown = shutdown;\n    plot.destroy = function() {\n      shutdown();\n      placeholder.removeData('plot').empty();\n\n      series = [];\n      options = null;\n      surface = null;\n      overlay = null;\n      eventHolder = null;\n      ctx = null;\n      octx = null;\n      xaxes = [];\n      yaxes = [];\n      hooks = null;\n      highlights = [];\n      plot = null;\n    };\n    plot.resize = function() {\n      let width = placeholder.width(),\n        height = placeholder.height();\n      surface.resize(width, height);\n      overlay.resize(width, height);\n    };\n\n    // public attributes\n    plot.hooks = hooks;\n\n    // initialize\n    initPlugins(plot);\n    parseOptions(options_);\n    setupCanvases();\n    setData(data_);\n    setupGrid();\n    draw();\n    bindEvents();\n\n    function executeHooks(hook, args) {\n      args = [plot].concat(args);\n      for (var i = 0; i < hook.length; ++i) hook[i].apply(this, args);\n    }\n\n    function initPlugins() {\n      // References to key classes, allowing plugins to modify them\n\n      let classes = {\n        Canvas: Canvas,\n      };\n\n      for (let i = 0; i < plugins.length; ++i) {\n        let p = plugins[i];\n        p.init(plot, classes);\n        if (p.options) $.extend(true, options, p.options);\n      }\n    }\n\n    function parseOptions(opts) {\n      $.extend(true, options, opts);\n\n      // $.extend merges arrays, rather than replacing them.  When less\n      // colors are provided than the size of the default palette, we\n      // end up with those colors plus the remaining defaults, which is\n      // not expected behavior; avoid it by replacing them here.\n\n      if (opts && opts.colors) {\n        options.colors = opts.colors;\n      }\n\n      if (options.xaxis.color == null)\n        options.xaxis.color = $.color\n          .parse(options.grid.color)\n          .scale('a', 0.22)\n          .toString();\n      if (options.yaxis.color == null)\n        options.yaxis.color = $.color\n          .parse(options.grid.color)\n          .scale('a', 0.22)\n          .toString();\n\n      if (options.xaxis.tickColor == null)\n        // grid.tickColor for back-compatibility\n        options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\n      if (options.yaxis.tickColor == null)\n        // grid.tickColor for back-compatibility\n        options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\n\n      if (options.grid.borderColor == null) options.grid.borderColor = options.grid.color;\n      if (options.grid.tickColor == null)\n        options.grid.tickColor = $.color\n          .parse(options.grid.color)\n          .scale('a', 0.22)\n          .toString();\n\n      // Fill in defaults for axis options, including any unspecified\n      // font-spec fields, if a font-spec was provided.\n\n      // If no x/y axis options were provided, create one of each anyway,\n      // since the rest of the code assumes that they exist.\n\n      var i,\n        axisOptions,\n        axisCount,\n        fontSize = placeholder.css('font-size'),\n        fontSizeDefault = fontSize ? +fontSize.replace('px', '') : 13,\n        fontDefaults = {\n          style: placeholder.css('font-style'),\n          size: Math.round(0.8 * fontSizeDefault),\n          variant: placeholder.css('font-variant'),\n          weight: placeholder.css('font-weight'),\n          family: placeholder.css('font-family'),\n        };\n\n      axisCount = options.xaxes.length || 1;\n      for (i = 0; i < axisCount; ++i) {\n        axisOptions = options.xaxes[i];\n        if (axisOptions && !axisOptions.tickColor) {\n          axisOptions.tickColor = axisOptions.color;\n        }\n\n        axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\n        options.xaxes[i] = axisOptions;\n\n        if (axisOptions.font) {\n          axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n          if (!axisOptions.font.color) {\n            axisOptions.font.color = axisOptions.color;\n          }\n          if (!axisOptions.font.lineHeight) {\n            axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n          }\n        }\n      }\n\n      axisCount = options.yaxes.length || 1;\n      for (i = 0; i < axisCount; ++i) {\n        axisOptions = options.yaxes[i];\n        if (axisOptions && !axisOptions.tickColor) {\n          axisOptions.tickColor = axisOptions.color;\n        }\n\n        axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\n        options.yaxes[i] = axisOptions;\n\n        if (axisOptions.font) {\n          axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n          if (!axisOptions.font.color) {\n            axisOptions.font.color = axisOptions.color;\n          }\n          if (!axisOptions.font.lineHeight) {\n            axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n          }\n        }\n      }\n\n      // backwards compatibility, to be removed in future\n      if (options.xaxis.noTicks && options.xaxis.ticks == null) options.xaxis.ticks = options.xaxis.noTicks;\n      if (options.yaxis.noTicks && options.yaxis.ticks == null) options.yaxis.ticks = options.yaxis.noTicks;\n      if (options.x2axis) {\n        options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\n        options.xaxes[1].position = 'top';\n        // Override the inherit to allow the axis to auto-scale\n        if (options.x2axis.min == null) {\n          options.xaxes[1].min = null;\n        }\n        if (options.x2axis.max == null) {\n          options.xaxes[1].max = null;\n        }\n      }\n      if (options.y2axis) {\n        options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\n        options.yaxes[1].position = 'right';\n        // Override the inherit to allow the axis to auto-scale\n        if (options.y2axis.min == null) {\n          options.yaxes[1].min = null;\n        }\n        if (options.y2axis.max == null) {\n          options.yaxes[1].max = null;\n        }\n      }\n      if (options.grid.coloredAreas) options.grid.markings = options.grid.coloredAreas;\n      if (options.grid.coloredAreasColor) options.grid.markingsColor = options.grid.coloredAreasColor;\n      if (options.lines) $.extend(true, options.series.lines, options.lines);\n      if (options.points) $.extend(true, options.series.points, options.points);\n      if (options.bars) $.extend(true, options.series.bars, options.bars);\n      if (options.shadowSize != null) options.series.shadowSize = options.shadowSize;\n      if (options.highlightColor != null) options.series.highlightColor = options.highlightColor;\n\n      // save options on axes for future reference\n      for (i = 0; i < options.xaxes.length; ++i) getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\n      for (i = 0; i < options.yaxes.length; ++i) getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\n\n      // add hooks from options\n      for (var n in hooks) if (options.hooks[n] && options.hooks[n].length) hooks[n] = hooks[n].concat(options.hooks[n]);\n\n      executeHooks(hooks.processOptions, [options]);\n    }\n\n    function setData(d) {\n      series = parseData(d);\n      fillInSeriesOptions();\n      processData();\n    }\n\n    function parseData(d) {\n      let res = [];\n      for (let i = 0; i < d.length; ++i) {\n        let s = $.extend(true, {}, options.series);\n\n        if (d[i].data != null) {\n          s.data = d[i].data; // move the data instead of deep-copy\n          delete d[i].data;\n\n          $.extend(true, s, d[i]);\n\n          d[i].data = s.data;\n        } else s.data = d[i];\n        res.push(s);\n      }\n\n      return res;\n    }\n\n    function axisNumber(obj, coord) {\n      var a = obj[coord + 'axis'];\n      if (typeof a == 'object')\n        // if we got a real axis, extract number\n        a = a.n;\n      if (typeof a != 'number') a = 1; // default to first axis\n      return a;\n    }\n\n    function allAxes() {\n      // return flat array without annoying null entries\n      return $.grep(xaxes.concat(yaxes), function(a) {\n        return a;\n      });\n    }\n\n    function canvasToAxisCoords(pos) {\n      // return an object with x/y corresponding to all used axes\n      var res = {},\n        i,\n        axis;\n      for (i = 0; i < xaxes.length; ++i) {\n        axis = xaxes[i];\n        if (axis) res['x' + axis.n] = axis.c2p(pos.left);\n      }\n\n      for (i = 0; i < yaxes.length; ++i) {\n        axis = yaxes[i];\n        if (axis) res['y' + axis.n] = axis.c2p(pos.top);\n      }\n\n      if (res.x1 !== undefined) res.x = res.x1;\n      if (res.y1 !== undefined) res.y = res.y1;\n\n      return res;\n    }\n\n    function axisToCanvasCoords(pos) {\n      // get canvas coords from the first pair of x/y found in pos\n      var res = {},\n        i,\n        axis,\n        key;\n\n      for (i = 0; i < xaxes.length; ++i) {\n        axis = xaxes[i];\n        if (axis && axis.used) {\n          key = 'x' + axis.n;\n          if (pos[key] == null && axis.n == 1) key = 'x';\n\n          if (pos[key] != null) {\n            res.left = axis.p2c(pos[key]);\n            break;\n          }\n        }\n      }\n\n      for (i = 0; i < yaxes.length; ++i) {\n        axis = yaxes[i];\n        if (axis && axis.used) {\n          key = 'y' + axis.n;\n          if (pos[key] == null && axis.n == 1) key = 'y';\n\n          if (pos[key] != null) {\n            res.top = axis.p2c(pos[key]);\n            break;\n          }\n        }\n      }\n\n      return res;\n    }\n\n    function getOrCreateAxis(axes, number) {\n      if (!axes[number - 1])\n        axes[number - 1] = {\n          n: number, // save the number for future reference\n          direction: axes == xaxes ? 'x' : 'y',\n          options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis),\n        };\n\n      return axes[number - 1];\n    }\n\n    function fillInSeriesOptions() {\n      var neededColors = series.length,\n        maxIndex = -1,\n        i;\n\n      // Subtract the number of series that already have fixed colors or\n      // color indexes from the number that we still need to generate.\n\n      for (i = 0; i < series.length; ++i) {\n        let sc = series[i].color;\n        if (sc != null) {\n          neededColors--;\n          if (typeof sc == 'number' && sc > maxIndex) {\n            maxIndex = sc;\n          }\n        }\n      }\n\n      // If any of the series have fixed color indexes, then we need to\n      // generate at least as many colors as the highest index.\n\n      if (neededColors <= maxIndex) {\n        neededColors = maxIndex + 1;\n      }\n\n      // Generate all the colors, using first the option colors and then\n      // variations on those colors once they're exhausted.\n\n      var c,\n        colors = [],\n        colorPool = options.colors,\n        colorPoolSize = colorPool.length,\n        variation = 0;\n\n      for (i = 0; i < neededColors; i++) {\n        c = $.color.parse(colorPool[i % colorPoolSize] || '#666');\n\n        // Each time we exhaust the colors in the pool we adjust\n        // a scaling factor used to produce more variations on\n        // those colors. The factor alternates negative/positive\n        // to produce lighter/darker colors.\n\n        // Reset the variation after every few cycles, or else\n        // it will end up producing only white or black colors.\n\n        if (i % colorPoolSize == 0 && i) {\n          if (variation >= 0) {\n            if (variation < 0.5) {\n              variation = -variation - 0.2;\n            } else variation = 0;\n          } else variation = -variation;\n        }\n\n        colors[i] = c.scale('rgb', 1 + variation);\n      }\n\n      // Finalize the series options, filling in their colors\n\n      var colori = 0,\n        s;\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n\n        // assign colors\n        if (s.color == null) {\n          s.color = colors[colori].toString();\n          ++colori;\n        } else if (typeof s.color == 'number') s.color = colors[s.color].toString();\n\n        // turn on lines automatically in case nothing is set\n        if (s.lines.show == null) {\n          var v,\n            show = true;\n          for (v in s)\n            if (s[v] && s[v].show) {\n              show = false;\n              break;\n            }\n          if (show) s.lines.show = true;\n        }\n\n        // If nothing was provided for lines.zero, default it to match\n        // lines.fill, since areas by default should extend to zero.\n\n        if (s.lines.zero == null) {\n          s.lines.zero = !!s.lines.fill;\n        }\n\n        // setup axes\n        s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, 'x'));\n        s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, 'y'));\n      }\n    }\n\n    function processData() {\n      let topSentry = Number.POSITIVE_INFINITY,\n        bottomSentry = Number.NEGATIVE_INFINITY,\n        fakeInfinity = Number.MAX_VALUE,\n        i,\n        j,\n        k,\n        m,\n        s,\n        points,\n        ps,\n        val,\n        f,\n        p,\n        data,\n        format;\n\n      function updateAxis(axis, min, max) {\n        if (min < axis.datamin && min != -fakeInfinity) axis.datamin = min;\n        if (max > axis.datamax && max != fakeInfinity) axis.datamax = max;\n      }\n\n      $.each(allAxes(), function(_, axis) {\n        // init axis\n        axis.datamin = topSentry;\n        axis.datamax = bottomSentry;\n        axis.used = false;\n      });\n\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n        s.datapoints = { points: [] };\n\n        executeHooks(hooks.processRawData, [s, s.data, s.datapoints]);\n      }\n\n      // first pass: clean and copy data\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n\n        data = s.data;\n        format = s.datapoints.format;\n\n        if (!format) {\n          format = [];\n          // find out how to copy\n          format.push({ x: true, number: true, required: true });\n          format.push({ y: true, number: true, required: true });\n\n          if (s.stack || s.bars.show || (s.lines.show && s.lines.fill)) {\n            let autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\n            format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\n            if (s.bars.horizontal) {\n              delete format[format.length - 1].y;\n              format[format.length - 1].x = true;\n            }\n          }\n\n          s.datapoints.format = format;\n        }\n\n        if (s.datapoints.pointsize != null) continue; // already filled in\n\n        s.datapoints.pointsize = format.length;\n\n        ps = s.datapoints.pointsize;\n        points = s.datapoints.points;\n\n        let insertSteps = s.lines.show && s.lines.steps;\n        s.xaxis.used = s.yaxis.used = true;\n\n        for (j = k = 0; j < data.length; ++j, k += ps) {\n          p = data[j];\n\n          let nullify = p == null;\n          if (!nullify) {\n            for (m = 0; m < ps; ++m) {\n              val = p[m];\n              f = format[m];\n\n              if (f) {\n                if (f.number && val != null) {\n                  val = +val; // convert to number\n                  if (isNaN(val)) val = null;\n                  else if (val == Infinity) val = fakeInfinity;\n                  else if (val == -Infinity) val = -fakeInfinity;\n                }\n\n                if (val == null) {\n                  if (f.required) nullify = true;\n\n                  if (f.defaultValue != null) val = f.defaultValue;\n                }\n              }\n\n              points[k + m] = val;\n            }\n          }\n\n          if (nullify) {\n            for (m = 0; m < ps; ++m) {\n              val = points[k + m];\n              if (val != null) {\n                f = format[m];\n                // extract min/max info\n                if (f.autoscale !== false) {\n                  if (f.x) {\n                    updateAxis(s.xaxis, val, val);\n                  }\n                  if (f.y) {\n                    updateAxis(s.yaxis, val, val);\n                  }\n                }\n              }\n              points[k + m] = null;\n            }\n          }\n\n          if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\n            // copy the point to make room for a middle point\n            for (m = 0; m < ps; ++m) points[k + ps + m] = points[k + m];\n\n            // middle point has same y\n            points[k + 1] = points[k - ps + 1] || 0;\n\n            // if series has null values, let's give the last !null value a nice step\n            if (nullify) points[k] = p[0];\n\n            // we've added a point, better reflect that\n            k += ps;\n          }\n        }\n      }\n\n      // give the hooks a chance to run\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n        points = s.datapoints.points;\n        ps = s.datapoints.pointsize;\n\n        // grafana\n        if (s.transform === 'negative-Y') {\n          for (j = 0; j < points.length; j += ps) {\n            if (points[j] == null) continue;\n\n            val = points[j + 1];\n            points[j + 1] = -val;\n          }\n        }\n\n        executeHooks(hooks.processDatapoints, [s, s.datapoints]);\n      }\n\n      // second pass: find datamax/datamin for auto-scaling\n      for (i = 0; i < series.length; ++i) {\n        s = series[i];\n        points = s.datapoints.points;\n        ps = s.datapoints.pointsize;\n        format = s.datapoints.format;\n\n        var xmin = topSentry,\n          ymin = topSentry,\n          xmax = bottomSentry,\n          ymax = bottomSentry;\n\n        for (j = 0; j < points.length; j += ps) {\n          if (points[j] == null) continue;\n\n          for (m = 0; m < ps; ++m) {\n            val = points[j + m];\n            f = format[m];\n            if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity) continue;\n\n            if (f.x) {\n              if (val < xmin) xmin = val;\n              if (val > xmax) xmax = val;\n            }\n            if (f.y) {\n              if (val < ymin) ymin = val;\n              if (val > ymax) ymax = val;\n            }\n          }\n        }\n\n        if (s.bars.show) {\n          // make sure we got room for the bar on the dancing floor\n          var delta;\n\n          switch (s.bars.align) {\n            case 'left':\n              delta = 0;\n              break;\n            case 'right':\n              delta = -s.bars.barWidth;\n              break;\n            default:\n              delta = -s.bars.barWidth / 2;\n          }\n\n          if (s.bars.horizontal) {\n            ymin += delta;\n            ymax += delta + s.bars.barWidth;\n          } else {\n            xmin += delta;\n            xmax += delta + s.bars.barWidth;\n          }\n        }\n\n        updateAxis(s.xaxis, xmin, xmax);\n        updateAxis(s.yaxis, ymin, ymax);\n      }\n\n      $.each(allAxes(), function(_, axis) {\n        if (axis.datamin == topSentry) axis.datamin = null;\n        if (axis.datamax == bottomSentry) axis.datamax = null;\n      });\n    }\n\n    function setupCanvases() {\n      // Make sure the placeholder is clear of everything except canvases\n      // from a previous plot in this container that we'll try to re-use.\n\n      placeholder.find('.flot-temp-elem').remove();\n\n      if (placeholder.css('position') == 'static') placeholder.css('position', 'relative'); // for positioning labels and overlay\n\n      surface = new Canvas('flot-base', placeholder);\n      overlay = new Canvas('flot-overlay', placeholder); // overlay canvas for interactive features\n\n      ctx = surface.context;\n      octx = overlay.context;\n\n      // define which element we're listening for events on\n      eventHolder = $(overlay.element).unbind();\n\n      // If we're re-using a plot object, shut down the old one\n\n      var existing = placeholder.data('plot');\n\n      if (existing) {\n        existing.shutdown();\n        overlay.clear();\n      }\n\n      // save in case we get replotted\n      placeholder.data('plot', plot);\n    }\n\n    function bindEvents() {\n      // bind events\n      if (options.grid.hoverable) {\n        eventHolder.mousemove(onMouseMove);\n\n        // Use bind, rather than .mouseleave, because we officially\n        // still support jQuery 1.2.6, which doesn't define a shortcut\n        // for mouseenter or mouseleave.  This was a bug/oversight that\n        // was fixed somewhere around 1.3.x.  We can return to using\n        // .mouseleave when we drop support for 1.2.6.\n\n        eventHolder.bind('mouseleave', onMouseLeave);\n      }\n\n      if (options.grid.clickable) eventHolder.click(onClick);\n\n      executeHooks(hooks.bindEvents, [eventHolder]);\n    }\n\n    function shutdown() {\n      if (redrawTimeout) clearTimeout(redrawTimeout);\n\n      eventHolder.unbind('mousemove', onMouseMove);\n      eventHolder.unbind('mouseleave', onMouseLeave);\n      eventHolder.unbind('click', onClick);\n\n      executeHooks(hooks.shutdown, [eventHolder]);\n    }\n\n    function setTransformationHelpers(axis) {\n      // set helper functions on the axis, assumes plot area\n      // has been computed already\n\n      function identity(x) {\n        return x;\n      }\n\n      var s,\n        m,\n        t = axis.options.transform || identity,\n        it = axis.options.inverseTransform;\n\n      // precompute how much the axis is scaling a point\n      // in canvas space\n      if (axis.direction == 'x') {\n        s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\n        m = Math.min(t(axis.max), t(axis.min));\n      } else {\n        s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\n        s = -s;\n        m = Math.max(t(axis.max), t(axis.min));\n      }\n\n      // data point to canvas coordinate\n      if (t == identity)\n        // slight optimization\n        axis.p2c = function(p) {\n          return (p - m) * s;\n        };\n      else\n        axis.p2c = function(p) {\n          return (t(p) - m) * s;\n        };\n      // canvas coordinate to data point\n      if (!it)\n        axis.c2p = function(c) {\n          return m + c / s;\n        };\n      else\n        axis.c2p = function(c) {\n          return it(m + c / s);\n        };\n    }\n\n    function measureTickLabels(axis) {\n      let opts = axis.options,\n        ticks = axis.ticks || [],\n        labelWidth = opts.labelWidth || 0,\n        labelHeight = opts.labelHeight || 0,\n        maxWidth = labelWidth || (axis.direction == 'x' ? Math.floor(surface.width / (ticks.length || 1)) : null),\n        legacyStyles = axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis',\n        layer = 'flot-' + axis.direction + '-axis flot-' + axis.direction + axis.n + '-axis ' + legacyStyles,\n        font = opts.font || 'flot-tick-label tickLabel';\n\n      for (let i = 0; i < ticks.length; ++i) {\n        let t = ticks[i];\n\n        if (!t.label) continue;\n\n        let info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\n\n        /// Grafana fix, add +1 to label width\n        labelWidth = Math.max(labelWidth, info.width + 1);\n        labelHeight = Math.max(labelHeight, info.height);\n      }\n\n      axis.labelWidth = opts.labelWidth || labelWidth;\n      axis.labelHeight = opts.labelHeight || labelHeight;\n    }\n\n    function allocateAxisBoxFirstPhase(axis) {\n      // find the bounding box of the axis by looking at label\n      // widths/heights and ticks, make room by diminishing the\n      // plotOffset; this first phase only looks at one\n      // dimension per axis, the other dimension depends on the\n      // other axes so will have to wait\n\n      let lw = axis.labelWidth,\n        lh = axis.labelHeight,\n        pos = axis.options.position,\n        isXAxis = axis.direction === 'x',\n        tickLength = axis.options.tickLength,\n        axisMargin = options.grid.axisMargin,\n        padding = options.grid.labelMargin,\n        eventSectionPadding = options.grid.eventSectionHeight,\n        innermost = true,\n        outermost = true,\n        first = true,\n        found = false;\n\n      // Determine the axis's position in its direction and on its side\n\n      $.each(isXAxis ? xaxes : yaxes, function(i, a) {\n        if (a && (a.show || a.reserveSpace)) {\n          if (a === axis) {\n            found = true;\n          } else if (a.options.position === pos) {\n            if (found) {\n              outermost = false;\n            } else {\n              innermost = false;\n            }\n          }\n          if (!found) {\n            first = false;\n          }\n        }\n      });\n\n      // The outermost axis on each side has no margin\n\n      if (outermost) {\n        axisMargin = 0;\n      }\n\n      // The ticks for the first axis in each direction stretch across\n\n      if (tickLength == null) {\n        tickLength = first ? 'full' : 5;\n      }\n\n      if (!isNaN(+tickLength)) padding += +tickLength;\n\n      if (isXAxis) {\n        // Add space for event section\n        lh += padding;\n        lh += eventSectionPadding;\n\n        if (pos == 'bottom') {\n          plotOffset.bottom += lh + axisMargin;\n          axis.box = { top: surface.height - plotOffset.bottom, height: lh };\n        } else {\n          axis.box = { top: plotOffset.top + axisMargin, height: lh };\n          plotOffset.top += lh + axisMargin;\n        }\n      } else {\n        lw += padding;\n\n        if (pos == 'left') {\n          axis.box = { left: plotOffset.left + axisMargin, width: lw };\n          plotOffset.left += lw + axisMargin;\n        } else {\n          plotOffset.right += lw + axisMargin;\n          axis.box = { left: surface.width - plotOffset.right, width: lw };\n        }\n      }\n\n      // save for future reference\n      axis.position = pos;\n      axis.tickLength = tickLength;\n      axis.box.padding = padding;\n      axis.box.eventSectionPadding = eventSectionPadding;\n      axis.innermost = innermost;\n    }\n\n    function allocateAxisBoxSecondPhase(axis) {\n      // now that all axis boxes have been placed in one\n      // dimension, we can set the remaining dimension coordinates\n      if (axis.direction == 'x') {\n        axis.box.left = plotOffset.left - axis.labelWidth / 2;\n        axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\n      } else {\n        axis.box.top = plotOffset.top - axis.labelHeight / 2;\n        axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\n      }\n    }\n\n    function adjustLayoutForThingsStickingOut() {\n      // possibly adjust plot offset to ensure everything stays\n      // inside the canvas and isn't clipped off\n\n      let minMargin = options.grid.minBorderMargin,\n        i;\n\n      // check stuff from the plot (FIXME: this should just read\n      // a value from the series, otherwise it's impossible to\n      // customize)\n      if (minMargin == null) {\n        minMargin = 0;\n        for (i = 0; i < series.length; ++i)\n          minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth / 2));\n      }\n\n      let margins = {\n        left: minMargin,\n        right: minMargin,\n        top: minMargin,\n        bottom: minMargin,\n      };\n\n      // check axis labels, note we don't check the actual\n      // labels but instead use the overall width/height to not\n      // jump as much around with replots\n      $.each(allAxes(), function(_, axis) {\n        if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\n          if (axis.direction === 'x') {\n            margins.left = Math.max(margins.left, axis.labelWidth / 2);\n            margins.right = Math.max(margins.right, axis.labelWidth / 2);\n          } else {\n            margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\n            margins.top = Math.max(margins.top, axis.labelHeight / 2);\n          }\n        }\n      });\n\n      plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\n      plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\n      plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\n      plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\n    }\n\n    function setupGrid() {\n      var i,\n        axes = allAxes(),\n        showGrid = options.grid.show;\n\n      // Initialize the plot's offset from the edge of the canvas\n\n      for (var a in plotOffset) {\n        let margin = options.grid.margin || 0;\n        plotOffset[a] = typeof margin == 'number' ? margin : margin[a] || 0;\n      }\n\n      executeHooks(hooks.processOffset, [plotOffset]);\n\n      // If the grid is visible, add its border width to the offset\n\n      for (var a in plotOffset) {\n        if (typeof options.grid.borderWidth == 'object') {\n          plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\n        } else {\n          plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\n        }\n      }\n\n      $.each(axes, function(_, axis) {\n        let axisOpts = axis.options;\n        axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\n        axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\n        setRange(axis);\n      });\n\n      executeHooks(hooks.processRange, []);\n\n      if (showGrid) {\n        var allocatedAxes = $.grep(axes, function(axis) {\n          return axis.show || axis.reserveSpace;\n        });\n\n        let snaped = false;\n        for (var i = 0; i < 2; i++) {\n          $.each(allocatedAxes, function(_, axis) {\n            // make the ticks\n            setupTickGeneration(axis);\n            setTicks(axis);\n            snaped = snapRangeToTicks(axis, axis.ticks) || snaped;\n            // find labelWidth/Height for axis\n            measureTickLabels(axis);\n          });\n\n          if (snaped && hooks.processRange.length > 0) {\n            executeHooks(hooks.processRange, []);\n            snaped = false;\n          } else {\n            break;\n          }\n        }\n\n        // with all dimensions calculated, we can compute the\n        // axis bounding boxes, start from the outside\n        // (reverse order)\n        for (i = allocatedAxes.length - 1; i >= 0; --i) allocateAxisBoxFirstPhase(allocatedAxes[i]);\n\n        // make sure we've got enough space for things that\n        // might stick out\n        adjustLayoutForThingsStickingOut();\n\n        $.each(allocatedAxes, function(_, axis) {\n          allocateAxisBoxSecondPhase(axis);\n        });\n      }\n\n      plotWidth = surface.width - plotOffset.left - plotOffset.right;\n      plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n      // now we got the proper plot dimensions, we can compute the scaling\n      $.each(axes, function(_, axis) {\n        setTransformationHelpers(axis);\n      });\n\n      if (showGrid) {\n        drawAxisLabels();\n      }\n\n      insertLegend();\n    }\n\n    function setRange(axis) {\n      let opts = axis.options,\n        min = +(opts.min != null ? opts.min : axis.datamin),\n        max = +(opts.max != null ? opts.max : axis.datamax),\n        delta = max - min;\n\n      if (delta == 0.0) {\n        // Grafana fix: wide Y min and max using increased wideFactor\n        // when all series values are the same\n        let wideFactor = 0.25;\n        let widen = Math.abs(max == 0 ? 1 : max * wideFactor);\n\n        if (opts.min == null) {\n          min -= widen;\n        }\n        // always widen max if we couldn't widen min to ensure we\n        // don't fall into min == max which doesn't work\n        if (opts.max == null || opts.min != null) {\n          max += widen;\n        }\n      } else {\n        // consider autoscaling\n        let margin = opts.autoscaleMargin;\n        if (margin != null) {\n          if (opts.min == null) {\n            min -= delta * margin;\n            // make sure we don't go below zero if all values\n            // are positive\n            if (min < 0 && axis.datamin != null && axis.datamin >= 0) min = 0;\n          }\n          if (opts.max == null) {\n            max += delta * margin;\n            if (max > 0 && axis.datamax != null && axis.datamax <= 0) max = 0;\n          }\n        }\n      }\n      axis.min = min;\n      axis.max = max;\n    }\n\n    function setupTickGeneration(axis) {\n      let opts = axis.options;\n\n      // estimate number of ticks\n      let noTicks;\n      if (typeof opts.ticks == 'number' && opts.ticks > 0) noTicks = opts.ticks;\n      // heuristic based on the model a*sqrt(x) fitted to\n      // some data points that seemed reasonable\n      else noTicks = 0.3 * Math.sqrt(axis.direction == 'x' ? surface.width : surface.height);\n\n      let delta = (axis.max - axis.min) / noTicks,\n        dec = -Math.floor(Math.log(delta) / Math.LN10),\n        maxDec = opts.tickDecimals;\n\n      if (maxDec != null && dec > maxDec) {\n        dec = maxDec;\n      }\n\n      let magn = Math.pow(10, -dec),\n        norm = delta / magn, // norm is between 1.0 and 10.0\n        size;\n\n      if (norm < 1.5) {\n        size = 1;\n      } else if (norm < 3) {\n        size = 2;\n        // special case for 2.5, requires an extra decimal\n        if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\n          size = 2.5;\n          ++dec;\n        }\n      } else if (norm < 7.5) {\n        size = 5;\n      } else {\n        size = 10;\n      }\n\n      size *= magn;\n\n      if (opts.minTickSize != null && size < opts.minTickSize) {\n        size = opts.minTickSize;\n      }\n\n      axis.delta = delta;\n      axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\n      axis.tickSize = opts.tickSize || size;\n\n      // grafana addition\n      if (opts.tickDecimals === null || opts.tickDecimals === undefined) {\n        axis.scaledDecimals = axis.tickDecimals + dec;\n      }\n\n      // Time mode was moved to a plug-in in 0.8, and since so many people use it\n      // we'll add an especially friendly reminder to make sure they included it.\n\n      if (opts.mode == 'time' && !axis.tickGenerator) {\n        throw new Error('Time mode requires the flot.time plugin.');\n      }\n\n      // Flot supports base-10 axes; any other mode else is handled by a plug-in,\n      // like flot.time.js.\n\n      if (!axis.tickGenerator) {\n        axis.tickGenerator = function(axis) {\n          let ticks = [],\n            start = floorInBase(axis.min, axis.tickSize),\n            i = 0,\n            v = Number.NaN,\n            prev;\n\n          do {\n            prev = v;\n            v = start + i * axis.tickSize;\n            ticks.push(v);\n            ++i;\n          } while (v < axis.max && v != prev);\n          return ticks;\n        };\n\n        axis.tickFormatter = function(value, axis) {\n          let factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\n          var formatted = '' + Math.round(value * factor) / factor;\n\n          // If tickDecimals was specified, ensure that we have exactly that\n          // much precision; otherwise default to the value's own precision.\n\n          if (axis.tickDecimals != null) {\n            var decimal = formatted.indexOf('.');\n            let precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\n            if (precision < axis.tickDecimals) {\n              return (precision ? formatted : formatted + '.') + ('' + factor).substr(1, axis.tickDecimals - precision);\n            }\n          }\n\n          return formatted;\n        };\n      }\n\n      if ($.isFunction(opts.tickFormatter))\n        axis.tickFormatter = function(v, axis) {\n          return '' + opts.tickFormatter(v, axis);\n        };\n\n      if (opts.alignTicksWithAxis != null) {\n        var otherAxis = (axis.direction == 'x' ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\n        if (otherAxis && otherAxis.used && otherAxis != axis) {\n          // consider snapping min/max to outermost nice ticks\n          let niceTicks = axis.tickGenerator(axis);\n          if (niceTicks.length > 0) {\n            if (opts.min == null) axis.min = Math.min(axis.min, niceTicks[0]);\n            if (opts.max == null && niceTicks.length > 1) axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\n          }\n\n          axis.tickGenerator = function(axis) {\n            // copy ticks, scaled to this axis\n            var ticks = [],\n              v,\n              i;\n            for (i = 0; i < otherAxis.ticks.length; ++i) {\n              v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\n              v = axis.min + v * (axis.max - axis.min);\n              ticks.push(v);\n            }\n            return ticks;\n          };\n\n          // we might need an extra decimal since forced\n          // ticks don't necessarily fit naturally\n          if (!axis.mode && opts.tickDecimals == null) {\n            let extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\n              ts = axis.tickGenerator(axis);\n\n            // only proceed if the tick interval rounded\n            // with an extra decimal doesn't give us a\n            // zero at end\n            if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec)))) axis.tickDecimals = extraDec;\n          }\n        }\n      }\n    }\n\n    function setTicks(axis) {\n      var oticks = axis.options.ticks,\n        ticks = [];\n      if (oticks == null || (typeof oticks == 'number' && oticks > 0)) ticks = axis.tickGenerator(axis);\n      else if (oticks) {\n        if ($.isFunction(oticks))\n          // generate the ticks\n          ticks = oticks(axis);\n        else ticks = oticks;\n      }\n\n      // clean up/labelify the supplied ticks, copy them over\n      let i, v;\n      axis.ticks = [];\n      for (i = 0; i < ticks.length; ++i) {\n        let label = null;\n        let t = ticks[i];\n        if (typeof t == 'object') {\n          v = +t[0];\n          if (t.length > 1) label = t[1];\n        } else v = +t;\n        if (label == null) label = axis.tickFormatter(v, axis);\n        if (!isNaN(v)) axis.ticks.push({ v: v, label: label });\n      }\n    }\n\n    function snapRangeToTicks(axis, ticks) {\n      let changed = false;\n      if (axis.options.autoscaleMargin && ticks.length > 0) {\n        // snap to ticks\n        if (axis.options.min == null) {\n          axis.min = Math.min(axis.min, ticks[0].v);\n          changed = true;\n        }\n        if (axis.options.max == null && ticks.length > 1) {\n          axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\n          changed = true;\n        }\n      }\n      return changed;\n    }\n\n    function draw() {\n      surface.clear();\n\n      executeHooks(hooks.drawBackground, [ctx]);\n\n      let grid = options.grid;\n\n      // draw background, if any\n      if (grid.show && grid.backgroundColor) drawBackground();\n\n      if (grid.show && !grid.aboveData) {\n        drawGrid();\n      }\n\n      for (let i = 0; i < series.length; ++i) {\n        executeHooks(hooks.drawSeries, [ctx, series[i]]);\n        drawSeries(series[i]);\n      }\n\n      executeHooks(hooks.draw, [ctx]);\n\n      if (grid.show && grid.aboveData) {\n        drawGrid();\n      }\n\n      surface.render();\n\n      // A draw implies that either the axes or data have changed, so we\n      // should probably update the overlay highlights as well.\n\n      triggerRedrawOverlay();\n    }\n\n    function extractRange(ranges, coord) {\n      var axis,\n        from,\n        to,\n        key,\n        axes = allAxes();\n\n      for (let i = 0; i < axes.length; ++i) {\n        axis = axes[i];\n        if (axis.direction == coord) {\n          key = coord + axis.n + 'axis';\n          if (!ranges[key] && axis.n == 1) key = coord + 'axis'; // support x1axis as xaxis\n          if (ranges[key]) {\n            from = ranges[key].from;\n            to = ranges[key].to;\n            break;\n          }\n        }\n      }\n\n      // backwards-compat stuff - to be removed in future\n      if (!ranges[key]) {\n        axis = coord == 'x' ? xaxes[0] : yaxes[0];\n        from = ranges[coord + '1'];\n        to = ranges[coord + '2'];\n      }\n\n      // auto-reverse as an added bonus\n      if (from != null && to != null && from > to) {\n        let tmp = from;\n        from = to;\n        to = tmp;\n      }\n\n      return { from: from, to: to, axis: axis };\n    }\n\n    function drawBackground() {\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, 'rgba(255, 255, 255, 0)');\n      ctx.fillRect(0, 0, plotWidth, plotHeight);\n      ctx.restore();\n    }\n\n    function drawGrid() {\n      let i, axes, bw, bc;\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      // draw markings\n      let markings = options.grid.markings;\n      if (markings) {\n        if ($.isFunction(markings)) {\n          axes = plot.getAxes();\n          // xmin etc. is backwards compatibility, to be\n          // removed in the future\n          axes.xmin = axes.xaxis.min;\n          axes.xmax = axes.xaxis.max;\n          axes.ymin = axes.yaxis.min;\n          axes.ymax = axes.yaxis.max;\n\n          markings = markings(axes);\n        }\n\n        for (i = 0; i < markings.length; ++i) {\n          let m = markings[i],\n            xrange = extractRange(m, 'x'),\n            yrange = extractRange(m, 'y');\n\n          // fill in missing\n          if (xrange.from == null) xrange.from = xrange.axis.min;\n          if (xrange.to == null) xrange.to = xrange.axis.max;\n          if (yrange.from == null) yrange.from = yrange.axis.min;\n          if (yrange.to == null) yrange.to = yrange.axis.max;\n\n          // clip\n          if (\n            xrange.to < xrange.axis.min ||\n            xrange.from > xrange.axis.max ||\n            yrange.to < yrange.axis.min ||\n            yrange.from > yrange.axis.max\n          )\n            continue;\n\n          xrange.from = Math.max(xrange.from, xrange.axis.min);\n          xrange.to = Math.min(xrange.to, xrange.axis.max);\n          yrange.from = Math.max(yrange.from, yrange.axis.min);\n          yrange.to = Math.min(yrange.to, yrange.axis.max);\n\n          let xequal = xrange.from === xrange.to,\n            yequal = yrange.from === yrange.to;\n\n          if (xequal && yequal) {\n            continue;\n          }\n\n          // then draw\n          xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\n          xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\n          yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\n          yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\n\n          if (xequal || yequal) {\n            let lineWidth = m.lineWidth || options.grid.markingsLineWidth,\n              subPixel = lineWidth % 2 ? 0.5 : 0;\n            ctx.beginPath();\n            ctx.strokeStyle = m.color || options.grid.markingsColor;\n            ctx.lineWidth = lineWidth;\n            if (xequal) {\n              ctx.moveTo(xrange.to + subPixel, yrange.from);\n              ctx.lineTo(xrange.to + subPixel, yrange.to);\n            } else {\n              ctx.moveTo(xrange.from, yrange.to + subPixel);\n              ctx.lineTo(xrange.to, yrange.to + subPixel);\n            }\n            ctx.stroke();\n          } else {\n            ctx.fillStyle = m.color || options.grid.markingsColor;\n            ctx.fillRect(xrange.from, yrange.to, xrange.to - xrange.from, yrange.from - yrange.to);\n          }\n        }\n      }\n\n      // draw the ticks\n      axes = allAxes();\n      bw = options.grid.borderWidth;\n\n      for (let j = 0; j < axes.length; ++j) {\n        var axis = axes[j],\n          box = axis.box,\n          t = axis.tickLength,\n          x,\n          y,\n          xoff,\n          yoff;\n        if (!axis.show || axis.ticks.length == 0) continue;\n\n        ctx.lineWidth = 1;\n\n        // find the edges\n        if (axis.direction == 'x') {\n          x = 0;\n          if (t == 'full') y = axis.position == 'top' ? 0 : plotHeight;\n          else y = box.top - plotOffset.top + (axis.position == 'top' ? box.height : 0);\n        } else {\n          y = 0;\n          if (t == 'full') x = axis.position == 'left' ? 0 : plotWidth;\n          else x = box.left - plotOffset.left + (axis.position == 'left' ? box.width : 0);\n        }\n\n        // draw tick bar\n        if (!axis.innermost) {\n          ctx.strokeStyle = axis.options.color;\n          ctx.beginPath();\n          xoff = yoff = 0;\n          if (axis.direction == 'x') xoff = plotWidth + 1;\n          else yoff = plotHeight + 1;\n\n          if (ctx.lineWidth == 1) {\n            if (axis.direction == 'x') {\n              y = Math.floor(y) + 0.5;\n            } else {\n              x = Math.floor(x) + 0.5;\n            }\n          }\n\n          ctx.moveTo(x, y);\n          ctx.lineTo(x + xoff, y + yoff);\n          ctx.stroke();\n        }\n\n        // draw ticks\n\n        ctx.strokeStyle = axis.options.tickColor;\n\n        ctx.beginPath();\n        for (i = 0; i < axis.ticks.length; ++i) {\n          let v = axis.ticks[i].v;\n\n          xoff = yoff = 0;\n\n          if (\n            isNaN(v) ||\n            v < axis.min ||\n            v > axis.max ||\n            // skip those lying on the axes if we got a border\n            (t == 'full' && ((typeof bw == 'object' && bw[axis.position] > 0) || bw > 0) && (v == axis.min || v == axis.max))\n          )\n            continue;\n\n          if (axis.direction == 'x') {\n            x = axis.p2c(v);\n            yoff = t == 'full' ? -plotHeight : t;\n\n            if (axis.position == 'top') yoff = -yoff;\n          } else {\n            y = axis.p2c(v);\n            xoff = t == 'full' ? -plotWidth : t;\n\n            if (axis.position == 'left') xoff = -xoff;\n          }\n\n          if (ctx.lineWidth == 1) {\n            if (axis.direction == 'x') x = Math.floor(x) + 0.5;\n            else y = Math.floor(y) + 0.5;\n          }\n\n          ctx.moveTo(x, y);\n          ctx.lineTo(x + xoff, y + yoff);\n        }\n\n        ctx.stroke();\n      }\n\n      // draw border\n      if (bw) {\n        // If either borderWidth or borderColor is an object, then draw the border\n        // line by line instead of as one rectangle\n        bc = options.grid.borderColor;\n        if (typeof bw == 'object' || typeof bc == 'object') {\n          if (typeof bw !== 'object') {\n            bw = { top: bw, right: bw, bottom: bw, left: bw };\n          }\n          if (typeof bc !== 'object') {\n            bc = { top: bc, right: bc, bottom: bc, left: bc };\n          }\n\n          if (bw.top > 0) {\n            ctx.strokeStyle = bc.top;\n            ctx.lineWidth = bw.top;\n            ctx.beginPath();\n            ctx.moveTo(0 - bw.left, 0 - bw.top / 2);\n            ctx.lineTo(plotWidth, 0 - bw.top / 2);\n            ctx.stroke();\n          }\n\n          if (bw.right > 0) {\n            ctx.strokeStyle = bc.right;\n            ctx.lineWidth = bw.right;\n            ctx.beginPath();\n            ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\n            ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\n            ctx.stroke();\n          }\n\n          if (bw.bottom > 0) {\n            ctx.strokeStyle = bc.bottom;\n            ctx.lineWidth = bw.bottom;\n            ctx.beginPath();\n            ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\n            ctx.lineTo(0, plotHeight + bw.bottom / 2);\n            ctx.stroke();\n          }\n\n          if (bw.left > 0) {\n            ctx.strokeStyle = bc.left;\n            ctx.lineWidth = bw.left;\n            ctx.beginPath();\n            ctx.moveTo(0 - bw.left / 2, plotHeight + bw.bottom);\n            ctx.lineTo(0 - bw.left / 2, 0);\n            ctx.stroke();\n          }\n        } else {\n          ctx.lineWidth = bw;\n          ctx.strokeStyle = options.grid.borderColor;\n          ctx.strokeRect(-bw / 2, -bw / 2, plotWidth + bw, plotHeight + bw);\n        }\n      }\n\n      ctx.restore();\n    }\n\n    function drawAxisLabels() {\n      $.each(allAxes(), function(_, axis) {\n        let box = axis.box,\n          legacyStyles = axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis',\n          layer = 'flot-' + axis.direction + '-axis flot-' + axis.direction + axis.n + '-axis ' + legacyStyles,\n          font = axis.options.font || 'flot-tick-label tickLabel',\n          tick,\n          x,\n          y,\n          halign,\n          valign;\n\n        // Remove text before checking for axis.show and ticks.length;\n        // otherwise plugins, like flot-tickrotor, that draw their own\n        // tick labels will end up with both theirs and the defaults.\n\n        surface.removeText(layer);\n\n        if (!axis.show || axis.ticks.length == 0) return;\n\n        for (let i = 0; i < axis.ticks.length; ++i) {\n          tick = axis.ticks[i];\n          if (!tick.label || tick.v < axis.min || tick.v > axis.max) continue;\n\n          if (axis.direction == 'x') {\n            halign = 'center';\n            x = plotOffset.left + axis.p2c(tick.v);\n            if (axis.position == 'bottom') {\n              y = box.top + box.padding + box.eventSectionPadding;\n            } else {\n              y = box.top + box.height - box.padding;\n              valign = 'bottom';\n            }\n          } else {\n            valign = 'middle';\n            y = plotOffset.top + axis.p2c(tick.v);\n            if (axis.position == 'left') {\n              x = box.left + box.width - box.padding;\n              halign = 'right';\n            } else {\n              x = box.left + box.padding;\n            }\n          }\n\n          surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\n        }\n      });\n    }\n\n    function drawOrphanedPoints(series) {\n      /* Filters series data for points with no neighbors before or after\n       * and plots single 0.5 radius points for them so that they are displayed.\n       */\n      let abandonedPoints = [];\n      let beforeX = null;\n      let afterX = null;\n      let datapoints = series.datapoints;\n      // find any points with no neighbors before or after\n      let emptyPoints = [];\n      for (let j = 0; j < datapoints.pointsize - 2; j++) {\n        emptyPoints.push(0);\n      }\n      for (let i = 0; i < datapoints.points.length; i += datapoints.pointsize) {\n        var x = datapoints.points[i],\n          y = datapoints.points[i + 1];\n        if (i === datapoints.points.length - datapoints.pointsize) {\n          afterX = null;\n        } else {\n          afterX = datapoints.points[i + datapoints.pointsize];\n        }\n        if (x !== null && y !== null && beforeX === null && afterX === null) {\n          abandonedPoints.push(x);\n          abandonedPoints.push(y);\n          abandonedPoints.push.apply(abandonedPoints, emptyPoints);\n        }\n        beforeX = x;\n      }\n      var olddatapoints = datapoints.points;\n      datapoints.points = abandonedPoints;\n\n      series.points.radius = series.lines.lineWidth / 2;\n      // plot the orphan points with a radius of lineWidth/2\n      drawSeriesPoints(series);\n      // reset old info\n      datapoints.points = olddatapoints;\n    }\n\n    function drawSeries(series) {\n      if (series.lines.show) {\n        drawSeriesLines(series);\n        if (!series.points.show && !series.bars.show) {\n          // not necessary if user wants points displayed for everything\n          drawOrphanedPoints(series);\n        }\n      }\n      if (series.bars.show) drawSeriesBars(series);\n      if (series.points.show) drawSeriesPoints(series);\n    }\n\n    function drawSeriesLines(series) {\n      function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\n        let points = datapoints.points,\n          ps = datapoints.pointsize,\n          prevx = null,\n          prevy = null;\n\n        ctx.beginPath();\n        for (let i = ps; i < points.length; i += ps) {\n          var x1 = points[i - ps],\n            y1 = points[i - ps + 1],\n            x2 = points[i],\n            y2 = points[i + 1];\n\n          if (x1 == null || x2 == null) continue;\n\n          // clip with ymin\n          if (y1 <= y2 && y1 < axisy.min) {\n            if (y2 < axisy.min) continue; // line segment is outside\n            // compute new intersection point\n            x1 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.min;\n          } else if (y2 <= y1 && y2 < axisy.min) {\n            if (y1 < axisy.min) continue;\n            x2 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.min;\n          }\n\n          // clip with ymax\n          if (y1 >= y2 && y1 > axisy.max) {\n            if (y2 > axisy.max) continue;\n            x1 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.max;\n          } else if (y2 >= y1 && y2 > axisy.max) {\n            if (y1 > axisy.max) continue;\n            x2 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.max;\n          }\n\n          // clip with xmin\n          if (x1 <= x2 && x1 < axisx.min) {\n            if (x2 < axisx.min) continue;\n            y1 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.min;\n          } else if (x2 <= x1 && x2 < axisx.min) {\n            if (x1 < axisx.min) continue;\n            y2 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.min;\n          }\n\n          // clip with xmax\n          if (x1 >= x2 && x1 > axisx.max) {\n            if (x2 > axisx.max) continue;\n            y1 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.max;\n          } else if (x2 >= x1 && x2 > axisx.max) {\n            if (x1 > axisx.max) continue;\n            y2 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.max;\n          }\n\n          if (x1 != prevx || y1 != prevy) ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n\n          prevx = x2;\n          prevy = y2;\n          ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\n        }\n        ctx.stroke();\n      }\n\n      function plotLineArea(datapoints, axisx, axisy) {\n        let points = datapoints.points,\n          ps = datapoints.pointsize,\n          bottom = Math.min(Math.max(0, axisy.min), axisy.max),\n          i = 0,\n          areaOpen = false,\n          ypos = 1,\n          segmentStart = 0,\n          segmentEnd = 0;\n\n        // we process each segment in two turns, first forward\n        // direction to sketch out top, then once we hit the\n        // end we go backwards to sketch the bottom\n        while (true) {\n          if (ps > 0 && i > points.length + ps) break;\n\n          i += ps; // ps is negative if going backwards\n\n          let x1 = points[i - ps],\n            y1 = points[i - ps + ypos],\n            x2 = points[i],\n            y2 = points[i + ypos];\n\n          if (areaOpen) {\n            if (ps > 0 && x1 != null && x2 == null) {\n              // at turning point\n              segmentEnd = i;\n              ps = -ps;\n              ypos = 2;\n              continue;\n            }\n\n            if (ps < 0 && i == segmentStart + ps) {\n              // done with the reverse sweep\n              ctx.fill();\n              areaOpen = false;\n              ps = -ps;\n              ypos = 1;\n              i = segmentStart = segmentEnd + ps;\n              continue;\n            }\n          }\n\n          if (x1 == null || x2 == null) continue;\n\n          // clip x values\n\n          // clip with xmin\n          if (x1 <= x2 && x1 < axisx.min) {\n            if (x2 < axisx.min) continue;\n            y1 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.min;\n          } else if (x2 <= x1 && x2 < axisx.min) {\n            if (x1 < axisx.min) continue;\n            y2 = ((axisx.min - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.min;\n          }\n\n          // clip with xmax\n          if (x1 >= x2 && x1 > axisx.max) {\n            if (x2 > axisx.max) continue;\n            y1 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x1 = axisx.max;\n          } else if (x2 >= x1 && x2 > axisx.max) {\n            if (x1 > axisx.max) continue;\n            y2 = ((axisx.max - x1) / (x2 - x1)) * (y2 - y1) + y1;\n            x2 = axisx.max;\n          }\n\n          if (!areaOpen) {\n            // open area\n            ctx.beginPath();\n            ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\n            areaOpen = true;\n          }\n\n          // now first check the case where both is outside\n          if (y1 >= axisy.max && y2 >= axisy.max) {\n            ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\n            ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\n            continue;\n          } else if (y1 <= axisy.min && y2 <= axisy.min) {\n            ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\n            ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\n            continue;\n          }\n\n          // else it's a bit more complicated, there might\n          // be a flat maxed out rectangle first, then a\n          // triangular cutout or reverse; to find these\n          // keep track of the current x values\n          var x1old = x1,\n            x2old = x2;\n\n          // clip the y values, without shortcutting, we\n          // go through all cases in turn\n\n          // clip with ymin\n          if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\n            x1 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.min;\n          } else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\n            x2 = ((axisy.min - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.min;\n          }\n\n          // clip with ymax\n          if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\n            x1 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y1 = axisy.max;\n          } else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\n            x2 = ((axisy.max - y1) / (y2 - y1)) * (x2 - x1) + x1;\n            y2 = axisy.max;\n          }\n\n          // if the x value was changed we got a rectangle\n          // to fill\n          if (x1 != x1old) {\n            ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\n            // it goes to (x1, y1), but we fill that below\n          }\n\n          // fill triangular section, this sometimes result\n          // in redundant points if (x1, y1) hasn't changed\n          // from previous line to, but we just ignore that\n          ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\n          ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n\n          // fill the other rectangle if it's there\n          if (x2 != x2old) {\n            ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n            ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\n          }\n        }\n      }\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n      ctx.lineJoin = 'round';\n\n      let lw = series.lines.lineWidth,\n        sw = series.shadowSize;\n      // FIXME: consider another form of shadow when filling is turned on\n      if (lw > 0 && sw > 0) {\n        // draw shadow as a thick and thin line with transparency\n        ctx.lineWidth = sw;\n        ctx.strokeStyle = 'rgba(0,0,0,0.1)';\n        // position shadow at angle from the mid of line\n        var angle = Math.PI / 18;\n        plotLine(\n          series.datapoints,\n          Math.sin(angle) * (lw / 2 + sw / 2),\n          Math.cos(angle) * (lw / 2 + sw / 2),\n          series.xaxis,\n          series.yaxis\n        );\n        ctx.lineWidth = sw / 2;\n        plotLine(\n          series.datapoints,\n          Math.sin(angle) * (lw / 2 + sw / 4),\n          Math.cos(angle) * (lw / 2 + sw / 4),\n          series.xaxis,\n          series.yaxis\n        );\n      }\n\n      ctx.lineWidth = lw;\n      ctx.strokeStyle = series.color;\n      let fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\n      if (fillStyle) {\n        ctx.fillStyle = fillStyle;\n        plotLineArea(series.datapoints, series.xaxis, series.yaxis);\n      }\n\n      if (lw > 0) plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\n      ctx.restore();\n    }\n\n    function drawSeriesPoints(series) {\n      function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\n        var points = datapoints.points,\n          ps = datapoints.pointsize;\n\n        for (let i = 0; i < points.length; i += ps) {\n          var x = points[i],\n            y = points[i + 1];\n          if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) continue;\n\n          ctx.beginPath();\n          x = axisx.p2c(x);\n          y = axisy.p2c(y) + offset;\n          if (symbol == 'circle') ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\n          else symbol(ctx, x, y, radius, shadow);\n          ctx.closePath();\n\n          if (fillStyle) {\n            ctx.fillStyle = fillStyle;\n            ctx.fill();\n          }\n          ctx.stroke();\n        }\n      }\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      let lw = series.points.lineWidth,\n        sw = series.shadowSize,\n        radius = series.points.radius,\n        symbol = series.points.symbol;\n\n      // If the user sets the line width to 0, we change it to a very\n      // small value. A line width of 0 seems to force the default of 1.\n      // Doing the conditional here allows the shadow setting to still be\n      // optional even with a lineWidth of 0.\n\n      if (lw == 0) lw = 0.0001;\n\n      if (lw > 0 && sw > 0) {\n        // draw shadow in two steps\n        let w = sw / 2;\n        ctx.lineWidth = w;\n        ctx.strokeStyle = 'rgba(0,0,0,0.1)';\n        plotPoints(series.datapoints, radius, null, w + w / 2, true, series.xaxis, series.yaxis, symbol);\n\n        ctx.strokeStyle = 'rgba(0,0,0,0.2)';\n        plotPoints(series.datapoints, radius, null, w / 2, true, series.xaxis, series.yaxis, symbol);\n      }\n\n      ctx.lineWidth = lw;\n      ctx.strokeStyle = series.color;\n      plotPoints(\n        series.datapoints,\n        radius,\n        getFillStyle(series.points, series.color),\n        0,\n        false,\n        series.xaxis,\n        series.yaxis,\n        symbol\n      );\n      ctx.restore();\n    }\n\n    function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\n      var left, right, bottom, top, drawLeft, drawRight, drawTop, drawBottom, tmp;\n\n      // in horizontal mode, we start the bar from the left\n      // instead of from the bottom so it appears to be\n      // horizontal rather than vertical\n      if (horizontal) {\n        drawBottom = drawRight = drawTop = true;\n        drawLeft = false;\n        left = b;\n        right = x;\n        top = y + barLeft;\n        bottom = y + barRight;\n\n        // account for negative bars\n        if (right < left) {\n          tmp = right;\n          right = left;\n          left = tmp;\n          drawLeft = true;\n          drawRight = false;\n        }\n      } else {\n        drawLeft = drawRight = drawTop = true;\n        drawBottom = false;\n        left = x + barLeft;\n        right = x + barRight;\n        bottom = b;\n        top = y;\n\n        // account for negative bars\n        if (top < bottom) {\n          tmp = top;\n          top = bottom;\n          bottom = tmp;\n          drawBottom = true;\n          drawTop = false;\n        }\n      }\n\n      // clip\n      if (right < axisx.min || left > axisx.max || top < axisy.min || bottom > axisy.max) return;\n\n      if (left < axisx.min) {\n        left = axisx.min;\n        drawLeft = false;\n      }\n\n      if (right > axisx.max) {\n        right = axisx.max;\n        drawRight = false;\n      }\n\n      if (bottom < axisy.min) {\n        bottom = axisy.min;\n        drawBottom = false;\n      }\n\n      if (top > axisy.max) {\n        top = axisy.max;\n        drawTop = false;\n      }\n\n      left = axisx.p2c(left);\n      bottom = axisy.p2c(bottom);\n      right = axisx.p2c(right);\n      top = axisy.p2c(top);\n\n      // fill the bar\n      if (fillStyleCallback) {\n        c.fillStyle = fillStyleCallback(bottom, top);\n        c.fillRect(left, top, right - left, bottom - top);\n      }\n\n      // draw outline\n      if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\n        c.beginPath();\n\n        // FIXME: inline moveTo is buggy with excanvas\n        c.moveTo(left, bottom);\n        if (drawLeft) c.lineTo(left, top);\n        else c.moveTo(left, top);\n        if (drawTop) c.lineTo(right, top);\n        else c.moveTo(right, top);\n        if (drawRight) c.lineTo(right, bottom);\n        else c.moveTo(right, bottom);\n        if (drawBottom) c.lineTo(left, bottom);\n        else c.moveTo(left, bottom);\n        c.stroke();\n      }\n    }\n\n    function drawSeriesBars(series) {\n      function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\n        var points = datapoints.points,\n          ps = datapoints.pointsize;\n\n        for (let i = 0; i < points.length; i += ps) {\n          if (points[i] == null) continue;\n          drawBar(\n            points[i],\n            points[i + 1],\n            points[i + 2],\n            barLeft,\n            barRight,\n            fillStyleCallback,\n            axisx,\n            axisy,\n            ctx,\n            series.bars.horizontal,\n            series.bars.lineWidth\n          );\n        }\n      }\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      // FIXME: figure out a way to add shadows (for instance along the right edge)\n      ctx.lineWidth = series.bars.lineWidth;\n      ctx.strokeStyle = series.color;\n\n      let barLeft;\n\n      switch (series.bars.align) {\n        case 'left':\n          barLeft = 0;\n          break;\n        case 'right':\n          barLeft = -series.bars.barWidth;\n          break;\n        default:\n          barLeft = -series.bars.barWidth / 2;\n      }\n\n      var fillStyleCallback = series.bars.fill\n        ? function(bottom, top) {\n            return getFillStyle(series.bars, series.color, bottom, top);\n          }\n        : null;\n      plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\n      ctx.restore();\n    }\n\n    function getFillStyle(filloptions, seriesColor, bottom, top) {\n      let fill = filloptions.fill;\n      if (!fill) return null;\n\n      if (filloptions.fillColor) return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\n\n      let c = $.color.parse(seriesColor);\n      c.a = typeof fill == 'number' ? fill : 0.4;\n      c.normalize();\n      return c.toString();\n    }\n\n    function insertLegend() {\n      if (options.legend.container != null) {\n        $(options.legend.container).html('');\n      } else {\n        placeholder.find('.legend').remove();\n      }\n\n      if (!options.legend.show) {\n        return;\n      }\n\n      var fragments = [],\n        entries = [],\n        rowStarted = false,\n        lf = options.legend.labelFormatter,\n        s,\n        label;\n\n      // Build a list of legend entries, with each having a label and a color\n\n      for (var i = 0; i < series.length; ++i) {\n        s = series[i];\n        if (s.label) {\n          label = lf ? lf(s.label, s) : s.label;\n          if (label) {\n            entries.push({\n              label: label,\n              color: s.color,\n            });\n          }\n        }\n      }\n\n      // Sort the legend using either the default or a custom comparator\n\n      if (options.legend.sorted) {\n        if ($.isFunction(options.legend.sorted)) {\n          entries.sort(options.legend.sorted);\n        } else if (options.legend.sorted == 'reverse') {\n          entries.reverse();\n        } else {\n          var ascending = options.legend.sorted != 'descending';\n          entries.sort(function(a, b) {\n            // eslint-disable-next-line\n            return a.label == b.label ? 0 : a.label < b.label != ascending ? 1 : -1; // Logical XOR\n          });\n        }\n      }\n\n      // Generate markup for the list of entries, in their final order\n\n      for (var i = 0; i < entries.length; ++i) {\n        let entry = entries[i];\n\n        if (i % options.legend.noColumns == 0) {\n          if (rowStarted) fragments.push('</tr>');\n          fragments.push('<tr>');\n          rowStarted = true;\n        }\n\n        fragments.push(\n          '<td class=\"legendColorBox\"><div style=\"border:1px solid ' +\n            options.legend.labelBoxBorderColor +\n            ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' +\n            entry.color +\n            ';overflow:hidden\"></div></div></td>' +\n            '<td class=\"legendLabel\">' +\n            entry.label +\n            '</td>'\n        );\n      }\n\n      if (rowStarted) fragments.push('</tr>');\n\n      if (fragments.length == 0) return;\n\n      var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join('') + '</table>';\n      if (options.legend.container != null) $(options.legend.container).html(table);\n      else {\n        var pos = '',\n          p = options.legend.position,\n          m = options.legend.margin;\n        if (m[0] == null) m = [m, m];\n        if (p.charAt(0) == 'n') pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\n        else if (p.charAt(0) == 's') pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\n        if (p.charAt(1) == 'e') pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\n        else if (p.charAt(1) == 'w') pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\n        var legend = $(\n          '<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos + ';') + '</div>'\n        ).appendTo(placeholder);\n        if (options.legend.backgroundOpacity != 0.0) {\n          // put in the transparent background\n          // separately to avoid blended labels and\n          // label boxes\n          let c = options.legend.backgroundColor;\n          if (c == null) {\n            c = options.grid.backgroundColor;\n            if (c && typeof c == 'string') c = $.color.parse(c);\n            else c = $.color.extract(legend, 'background-color');\n            c.a = 1;\n            c = c.toString();\n          }\n          let div = legend.children();\n          $(\n            '<div style=\"position:absolute;width:' +\n              div.width() +\n              'px;height:' +\n              div.height() +\n              'px;' +\n              pos +\n              'background-color:' +\n              c +\n              ';\"> </div>'\n          )\n            .prependTo(legend)\n            .css('opacity', options.legend.backgroundOpacity);\n        }\n      }\n    }\n\n    // interactive features\n\n    var highlights = [],\n      redrawTimeout = null;\n\n    // returns the data item the mouse is over, or null if none is found\n    function findNearbyItem(mouseX, mouseY, seriesFilter) {\n      let maxDistance = options.grid.mouseActiveRadius,\n        smallestDistance = maxDistance * maxDistance + 1,\n        item = null,\n        i,\n        j,\n        ps;\n\n      for (i = series.length - 1; i >= 0; --i) {\n        if (!seriesFilter(series[i])) continue;\n\n        let s = series[i],\n          axisx = s.xaxis,\n          axisy = s.yaxis,\n          points = s.datapoints.points,\n          mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\n          my = axisy.c2p(mouseY),\n          maxx = maxDistance / axisx.scale,\n          maxy = maxDistance / axisy.scale;\n\n        ps = s.datapoints.pointsize;\n        // with inverse transforms, we can't use the maxx/maxy\n        // optimization, sadly\n        if (axisx.options.inverseTransform) maxx = Number.MAX_VALUE;\n        if (axisy.options.inverseTransform) maxy = Number.MAX_VALUE;\n\n        if (s.lines.show || s.points.show) {\n          for (j = 0; j < points.length; j += ps) {\n            var x = points[j],\n              y = points[j + 1];\n            if (x == null) continue;\n\n            // For points and lines, the cursor must be within a\n            // certain distance to the data point\n            if (x - mx > maxx || x - mx < -maxx || y - my > maxy || y - my < -maxy) continue;\n\n            // We have to calculate distances in pixels, not in\n            // data units, because the scales of the axes may be different\n            let dx = Math.abs(axisx.p2c(x) - mouseX),\n              dy = Math.abs(axisy.p2c(y) - mouseY),\n              dist = dx * dx + dy * dy; // we save the sqrt\n\n            // use <= to ensure last point takes precedence\n            // (last generally means on top of)\n            if (dist < smallestDistance) {\n              smallestDistance = dist;\n              item = [i, j / ps];\n            }\n          }\n        }\n\n        if (s.bars.show && !item) {\n          // no other point can be nearby\n\n          var barLeft, barRight;\n\n          switch (s.bars.align) {\n            case 'left':\n              barLeft = 0;\n              break;\n            case 'right':\n              barLeft = -s.bars.barWidth;\n              break;\n            default:\n              barLeft = -s.bars.barWidth / 2;\n          }\n\n          barRight = barLeft + s.bars.barWidth;\n\n          for (j = 0; j < points.length; j += ps) {\n            var x = points[j],\n              y = points[j + 1],\n              b = points[j + 2];\n            if (x == null) continue;\n\n            // for a bar graph, the cursor must be inside the bar\n            if (\n              series[i].bars.horizontal\n                ? mx <= Math.max(b, x) && mx >= Math.min(b, x) && my >= y + barLeft && my <= y + barRight\n                : mx >= x + barLeft && mx <= x + barRight && my >= Math.min(b, y) && my <= Math.max(b, y)\n            )\n              item = [i, j / ps];\n          }\n        }\n      }\n\n      if (item) {\n        i = item[0];\n        j = item[1];\n        ps = series[i].datapoints.pointsize;\n\n        return {\n          datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\n          dataIndex: j,\n          series: series[i],\n          seriesIndex: i,\n        };\n      }\n\n      return null;\n    }\n\n    function onMouseMove(e) {\n      if (options.grid.hoverable)\n        triggerClickHoverEvent('plothover', e, function(s) {\n          return s['hoverable'] != false;\n        });\n    }\n\n    function onMouseLeave(e) {\n      if (options.grid.hoverable)\n        triggerClickHoverEvent('plothover', e, function() {\n          return false;\n        });\n    }\n\n    function onClick(e) {\n      if (plot.isSelecting) {\n        return;\n      }\n\n      triggerClickHoverEvent('plotclick', e, function(s) {\n        return s['clickable'] != false;\n      });\n    }\n\n    // trigger click or hover event (they send the same parameters\n    // so we share their code)\n    function triggerClickHoverEvent(eventname, event, seriesFilter) {\n      let offset = eventHolder.offset(),\n        canvasX = event.pageX - offset.left - plotOffset.left,\n        canvasY = event.pageY - offset.top - plotOffset.top,\n        pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\n\n      pos.pageX = event.pageX;\n      pos.pageY = event.pageY;\n\n      // Add ctrlKey and metaKey to event\n      pos.ctrlKey = event.ctrlKey;\n      pos.metaKey = event.metaKey;\n\n      let item = findNearbyItem(canvasX, canvasY, seriesFilter);\n\n      if (item) {\n        // fill in mouse pos for any listeners out there\n        item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\n        item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\n      }\n\n      if (options.grid.autoHighlight) {\n        // clear auto-highlights\n        for (let i = 0; i < highlights.length; ++i) {\n          let h = highlights[i];\n          if (\n            h.auto == eventname &&\n            !(item && h.series == item.series && h.point[0] == item.datapoint[0] && h.point[1] == item.datapoint[1])\n          )\n            unhighlight(h.series, h.point);\n        }\n\n        if (item) highlight(item.series, item.datapoint, eventname);\n      }\n\n      placeholder.trigger(eventname, [pos, item]);\n    }\n\n    function triggerRedrawOverlay() {\n      let t = options.interaction.redrawOverlayInterval;\n      if (t == -1) {\n        // skip event queue\n        drawOverlay();\n        return;\n      }\n\n      if (!redrawTimeout) redrawTimeout = setTimeout(drawOverlay, t);\n    }\n\n    function drawOverlay() {\n      redrawTimeout = null;\n\n      // draw highlights\n      octx.save();\n      overlay.clear();\n      octx.translate(plotOffset.left, plotOffset.top);\n\n      let i, hi;\n      for (i = 0; i < highlights.length; ++i) {\n        hi = highlights[i];\n\n        if (hi.series.bars.show) drawBarHighlight(hi.series, hi.point);\n        else drawPointHighlight(hi.series, hi.point);\n      }\n      octx.restore();\n\n      executeHooks(hooks.drawOverlay, [octx]);\n    }\n\n    function highlight(s, point, auto) {\n      if (typeof s == 'number') s = series[s];\n\n      if (typeof point == 'number') {\n        let ps = s.datapoints.pointsize;\n        point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n      }\n\n      let i = indexOfHighlight(s, point);\n      if (i == -1) {\n        highlights.push({ series: s, point: point, auto: auto });\n\n        triggerRedrawOverlay();\n      } else if (!auto) highlights[i].auto = false;\n    }\n\n    function unhighlight(s, point) {\n      if (s == null && point == null) {\n        highlights = [];\n        triggerRedrawOverlay();\n        return;\n      }\n\n      if (typeof s == 'number') s = series[s];\n\n      if (typeof point == 'number') {\n        let ps = s.datapoints.pointsize;\n        point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n      }\n\n      let i = indexOfHighlight(s, point);\n      if (i != -1) {\n        highlights.splice(i, 1);\n\n        triggerRedrawOverlay();\n      }\n    }\n\n    function indexOfHighlight(s, p) {\n      for (let i = 0; i < highlights.length; ++i) {\n        let h = highlights[i];\n        if (h.series == s && h.point[0] == p[0] && h.point[1] == p[1]) return i;\n      }\n      return -1;\n    }\n\n    function drawPointHighlight(series, point) {\n      var x = point[0],\n        y = point[1],\n        axisx = series.xaxis,\n        axisy = series.yaxis,\n        highlightColor =\n          typeof series.highlightColor === 'string'\n            ? series.highlightColor\n            : $.color\n                .parse(series.color)\n                .scale('a', 0.5)\n                .toString();\n\n      if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) return;\n\n      let pointRadius = series.points.radius + series.points.lineWidth / 2;\n      octx.lineWidth = pointRadius;\n      octx.strokeStyle = highlightColor;\n      let radius = 1.5 * pointRadius;\n      x = axisx.p2c(x);\n      y = axisy.p2c(y);\n\n      octx.beginPath();\n      if (series.points.symbol == 'circle') octx.arc(x, y, radius, 0, 2 * Math.PI, false);\n      else series.points.symbol(octx, x, y, radius, false);\n      octx.closePath();\n      octx.stroke();\n    }\n\n    function drawBarHighlight(series, point) {\n      var highlightColor =\n          typeof series.highlightColor === 'string'\n            ? series.highlightColor\n            : $.color\n                .parse(series.color)\n                .scale('a', 0.5)\n                .toString(),\n        fillStyle = highlightColor,\n        barLeft;\n\n      switch (series.bars.align) {\n        case 'left':\n          barLeft = 0;\n          break;\n        case 'right':\n          barLeft = -series.bars.barWidth;\n          break;\n        default:\n          barLeft = -series.bars.barWidth / 2;\n      }\n\n      octx.lineWidth = series.bars.lineWidth;\n      octx.strokeStyle = highlightColor;\n\n      drawBar(\n        point[0],\n        point[1],\n        point[2] || 0,\n        barLeft,\n        barLeft + series.bars.barWidth,\n        function() {\n          return fillStyle;\n        },\n        series.xaxis,\n        series.yaxis,\n        octx,\n        series.bars.horizontal,\n        series.bars.lineWidth\n      );\n    }\n\n    function getColorOrGradient(spec, bottom, top, defaultColor) {\n      if (typeof spec == 'string') return spec;\n      else {\n        // assume this is a gradient spec; IE currently only\n        // supports a simple vertical gradient properly, so that's\n        // what we support too\n        let gradient = ctx.createLinearGradient(0, top, 0, bottom);\n\n        for (let i = 0, l = spec.colors.length; i < l; ++i) {\n          let c = spec.colors[i];\n          if (typeof c != 'string') {\n            let co = $.color.parse(defaultColor);\n            if (c.brightness != null) co = co.scale('rgb', c.brightness);\n            if (c.opacity != null) co.a *= c.opacity;\n            c = co.toString();\n          }\n          gradient.addColorStop(i / (l - 1), c);\n        }\n\n        return gradient;\n      }\n    }\n  }\n\n  // Add the plot function to the top level of the jQuery object\n\n  $.plot = function(placeholder, data, options) {\n    //var t0 = new Date();\n    let plot = new Plot($(placeholder), data, options, $.plot.plugins);\n    //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\n    return plot;\n  };\n\n  $.plot.version = '0.8.3';\n\n  $.plot.plugins = [];\n\n  // Also add the plot function as a chainable property\n\n  $.fn.plot = function(data, options) {\n    return this.each(function() {\n      $.plot(this, data, options);\n    });\n  };\n\n  // round to nearby lower multiple of base\n  function floorInBase(n, base) {\n    return base * Math.floor(n / base);\n  }\n})(window.jQuery);\n","/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-spread */\n/* eslint-disable no-loop-func */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-redeclare */\n/* eslint-disable no-useless-escape */\n/* eslint-disable prefer-const */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-var */\n\n/* Flot plugin for stacking data sets rather than overlyaing them.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\nFor line charts, it is assumed that if a line has an undefined gap (from a\nnull point), then the line above it should have the same gap - insert zeros\ninstead of \"null\" if you want another behaviour. This also holds for the start\nand end of the chart. Note that stacking a mix of positive and negative values\nin most instances doesn't make sense (so it looks weird).\n\nTwo or more series are stacked when their \"stack\" attribute is set to the same\nkey (which can be any number or string or just \"true\"). To specify the default\nstack, you can set the stack option like this:\n\n    series: {\n        stack: null/false, true, or a key (number/string)\n    }\n\nYou can also specify it for a single series, like this:\n\n    $.plot( $(\"#placeholder\"), [{\n        data: [ ... ],\n        stack: true\n    }])\n\nThe stacking order is determined by the order of the data series in the array\n(later series end up on top of the previous).\n\nInternally, the plugin modifies the datapoints in each series, adding an\noffset to the y value. For line series, extra data points are inserted through\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\ncharts or filled areas).\n\n*/\n\n(function($) {\n  const options = {\n    series: { stack: null }, // or number/string\n  };\n\n  function init(plot) {\n    function findMatchingSeries(s, allseries) {\n      let res = null;\n      for (let i = 0; i < allseries.length; ++i) {\n        if (s == allseries[i]) break;\n\n        if (allseries[i].stack == s.stack) res = allseries[i];\n      }\n\n      return res;\n    }\n\n    function stackData(plot, s, datapoints) {\n      if (s.stack == null || s.stack === false) return;\n\n      const other = findMatchingSeries(s, plot.getData());\n      if (!other) return;\n\n      let ps = datapoints.pointsize,\n        points = datapoints.points,\n        otherps = other.datapoints.pointsize,\n        otherpoints = other.datapoints.points,\n        newpoints = [],\n        px,\n        py,\n        intery,\n        qx,\n        qy,\n        bottom,\n        withlines = s.lines.show,\n        horizontal = s.bars.horizontal,\n        withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),\n        withsteps = withlines && s.lines.steps,\n        keyOffset = horizontal ? 1 : 0,\n        accumulateOffset = horizontal ? 0 : 1,\n        i = 0,\n        j = 0,\n        l,\n        m;\n\n      while (true) {\n        if (i >= points.length && j >= otherpoints.length) break;\n\n        l = newpoints.length;\n\n        if (i < points.length && points[i] == null) {\n          // copy gaps\n          for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n          i += ps;\n        } else if (i >= points.length) {\n          // take the remaining points from the previous series\n          for (m = 0; m < ps; ++m) newpoints.push(otherpoints[j + m]);\n          if (withbottom) newpoints[l + 2] = otherpoints[j + accumulateOffset];\n          j += otherps;\n        } else if (j >= otherpoints.length) {\n          // take the remaining points from the current series\n          for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n          i += ps;\n        } else if (j < otherpoints.length && otherpoints[j] == null) {\n          // ignore point\n          j += otherps;\n        } else {\n          // cases where we actually got two points\n          px = points[i + keyOffset];\n          py = points[i + accumulateOffset];\n          qx = otherpoints[j + keyOffset];\n          qy = otherpoints[j + accumulateOffset];\n          bottom = 0;\n\n          if (px == qx) {\n            for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n\n            newpoints[l + accumulateOffset] += qy;\n            bottom = qy;\n\n            i += ps;\n            j += otherps;\n          } else if (px > qx) {\n            // take the point from the previous series so that next series will correctly stack\n            if (i == 0) {\n              for (m = 0; m < ps; ++m) newpoints.push(otherpoints[j + m]);\n              bottom = qy;\n            }\n            // we got past point below, might need to\n            // insert interpolated extra point\n            if (i > 0 && points[i - ps] != null) {\n              intery = py + ((points[i - ps + accumulateOffset] - py) * (qx - px)) / (points[i - ps + keyOffset] - px);\n              newpoints.push(qx);\n              newpoints.push(intery + qy);\n              for (m = 2; m < ps; ++m) newpoints.push(points[i + m]);\n              bottom = qy;\n            }\n\n            j += otherps;\n          } else {\n            // px < qx\n            for (m = 0; m < ps; ++m) newpoints.push(points[i + m]);\n\n            // we might be able to interpolate a point below,\n            // this can give us a better y\n            if (j > 0 && otherpoints[j - otherps] != null)\n              bottom =\n                qy +\n                ((otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx)) /\n                  (otherpoints[j - otherps + keyOffset] - qx);\n\n            newpoints[l + accumulateOffset] += bottom;\n\n            i += ps;\n          }\n\n          if (l != newpoints.length && withbottom) newpoints[l + 2] = bottom;\n        }\n\n        // maintain the line steps invariant\n        if (\n          withsteps &&\n          l != newpoints.length &&\n          l > 0 &&\n          newpoints[l] != null &&\n          newpoints[l] != newpoints[l - ps] &&\n          newpoints[l + 1] != newpoints[l - ps + 1]\n        ) {\n          for (m = 0; m < ps; ++m) newpoints[l + ps + m] = newpoints[l + m];\n          newpoints[l + 1] = newpoints[l - ps + 1];\n        }\n      }\n\n      datapoints.points = newpoints;\n    }\n\n    plot.hooks.processDatapoints.push(stackData);\n  }\n\n  $.plot.plugins.push({\n    init: init,\n    options: options,\n    name: 'stack',\n    version: '1.2',\n  });\n})(window.jQuery);\n","/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-rest-params */\n/* eslint-disable no-useless-concat */\n/* eslint-disable default-case */\n/* eslint-disable prefer-spread */\n/* eslint-disable no-loop-func */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-redeclare */\n/* eslint-disable no-useless-escape */\n/* eslint-disable prefer-const */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-var */\n\n/* Pretty handling of time axes.\n\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nSet axis.mode to \"time\" to enable. See the section \"Time series data\" in\nAPI.txt for details.\n\n*/\n\n(function($) {\n  const options = {\n    xaxis: {\n      timezone: null, // \"browser\" for local to the client or timezone for timezone-js\n      timeformat: null, // format string to use\n      twelveHourClock: false, // 12 or 24 time in time mode\n      monthNames: null, // list of names of months\n    },\n  };\n\n  // round to nearby lower multiple of base\n\n  function floorInBase(n, base) {\n    return base * Math.floor(n / base);\n  }\n\n  // Returns a string with the date d formatted according to fmt.\n  // A subset of the Open Group's strftime format is supported.\n\n  function formatDate(d, fmt, monthNames, dayNames) {\n    if (typeof d.strftime == 'function') {\n      return d.strftime(fmt);\n    }\n\n    const leftPad = function(n, pad) {\n      n = '' + n;\n      pad = '' + (pad == null ? '0' : pad);\n      return n.length == 1 ? pad + n : n;\n    };\n\n    const r = [];\n    let escape = false;\n    const hours = d.getHours();\n    const isAM = hours < 12;\n\n    if (monthNames == null) {\n      monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    }\n\n    if (dayNames == null) {\n      dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    }\n\n    let hours12;\n\n    if (hours > 12) {\n      hours12 = hours - 12;\n    } else if (hours == 0) {\n      hours12 = 12;\n    } else {\n      hours12 = hours;\n    }\n\n    for (let i = 0; i < fmt.length; ++i) {\n      let c = fmt.charAt(i);\n\n      if (escape) {\n        switch (c) {\n          case 'a':\n            c = '' + dayNames[d.getDay()];\n            break;\n          case 'b':\n            c = '' + monthNames[d.getMonth()];\n            break;\n          case 'd':\n            c = leftPad(d.getDate(), '');\n            break;\n          case 'e':\n            c = leftPad(d.getDate(), ' ');\n            break;\n          case 'h': // For back-compat with 0.7; remove in 1.0\n          case 'H':\n            c = leftPad(hours);\n            break;\n          case 'I':\n            c = leftPad(hours12);\n            break;\n          case 'l':\n            c = leftPad(hours12, ' ');\n            break;\n          case 'm':\n            c = leftPad(d.getMonth() + 1, '');\n            break;\n          case 'M':\n            c = leftPad(d.getMinutes());\n            break;\n          // quarters not in Open Group's strftime specification\n          case 'q':\n            c = '' + (Math.floor(d.getMonth() / 3) + 1);\n            break;\n          case 'S':\n            c = leftPad(d.getSeconds());\n            break;\n          case 'y':\n            c = leftPad(d.getFullYear() % 100);\n            break;\n          case 'Y':\n            c = '' + d.getFullYear();\n            break;\n          case 'p':\n            c = isAM ? '' + 'am' : '' + 'pm';\n            break;\n          case 'P':\n            c = isAM ? '' + 'AM' : '' + 'PM';\n            break;\n          case 'w':\n            c = '' + d.getDay();\n            break;\n        }\n        r.push(c);\n        escape = false;\n      } else {\n        if (c == '%') {\n          escape = true;\n        } else {\n          r.push(c);\n        }\n      }\n    }\n\n    return r.join('');\n  }\n\n  // To have a consistent view of time-based data independent of which time\n  // zone the client happens to be in we need a date-like object independent\n  // of time zones.  This is done through a wrapper that only calls the UTC\n  // versions of the accessor methods.\n\n  function makeUtcWrapper(d) {\n    function addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\n      sourceObj[sourceMethod] = function() {\n        return targetObj[targetMethod].apply(targetObj, arguments);\n      };\n    }\n\n    const utc = {\n      date: d,\n    };\n\n    // support strftime, if found\n\n    if (d.strftime != undefined) {\n      addProxyMethod(utc, 'strftime', d, 'strftime');\n    }\n\n    addProxyMethod(utc, 'getTime', d, 'getTime');\n    addProxyMethod(utc, 'setTime', d, 'setTime');\n\n    const props = ['Date', 'Day', 'FullYear', 'Hours', 'Milliseconds', 'Minutes', 'Month', 'Seconds'];\n\n    for (let p = 0; p < props.length; p++) {\n      addProxyMethod(utc, 'get' + props[p], d, 'getUTC' + props[p]);\n      addProxyMethod(utc, 'set' + props[p], d, 'setUTC' + props[p]);\n    }\n\n    return utc;\n  }\n\n  // select time zone strategy.  This returns a date-like object tied to the\n  // desired timezone\n\n  function dateGenerator(ts, opts) {\n    if (opts.timezone == 'browser') {\n      return new Date(ts);\n    } else if (!opts.timezone || opts.timezone == 'utc') {\n      return makeUtcWrapper(new Date(ts));\n    }\n    // } else if (typeof timezoneJS != 'undefined' && typeof timezoneJS.Date != 'undefined') {\n    //   const d = new timezoneJS.Date();\n    //   // timezone-js is fickle, so be sure to set the time zone before\n    //   // setting the time.\n    //   d.setTimezone(opts.timezone);\n    //   d.setTime(ts);\n    //   return d;\n    // }\n    return makeUtcWrapper(new Date(ts));\n  }\n\n  // map of app. size of time units in milliseconds\n\n  const timeUnitSize = {\n    second: 1000,\n    minute: 60 * 1000,\n    hour: 60 * 60 * 1000,\n    day: 24 * 60 * 60 * 1000,\n    month: 30 * 24 * 60 * 60 * 1000,\n    quarter: 3 * 30 * 24 * 60 * 60 * 1000,\n    year: 365.2425 * 24 * 60 * 60 * 1000,\n  };\n\n  // the allowed tick sizes, after 1 year we use\n  // an integer algorithm\n\n  const baseSpec = [\n    [1, 'second'],\n    [2, 'second'],\n    [5, 'second'],\n    [10, 'second'],\n    [30, 'second'],\n    [1, 'minute'],\n    [2, 'minute'],\n    [5, 'minute'],\n    [10, 'minute'],\n    [30, 'minute'],\n    [1, 'hour'],\n    [2, 'hour'],\n    [4, 'hour'],\n    [8, 'hour'],\n    [12, 'hour'],\n    [1, 'day'],\n    [2, 'day'],\n    [3, 'day'],\n    [0.25, 'month'],\n    [0.5, 'month'],\n    [1, 'month'],\n    [2, 'month'],\n  ];\n\n  // we don't know which variant(s) we'll need yet, but generating both is\n  // cheap\n\n  const specMonths = baseSpec.concat([[3, 'month'], [6, 'month'], [1, 'year']]);\n  const specQuarters = baseSpec.concat([[1, 'quarter'], [2, 'quarter'], [1, 'year']]);\n\n  function init(plot) {\n    plot.hooks.processOptions.push(function(plot) {\n      $.each(plot.getAxes(), function(axisName, axis) {\n        const opts = axis.options;\n\n        if (opts.mode == 'time') {\n          axis.tickGenerator = function(axis) {\n            const ticks = [];\n            const d = dateGenerator(axis.min, opts);\n            let minSize = 0;\n\n            // make quarter use a possibility if quarters are\n            // mentioned in either of these options\n\n            const spec =\n              (opts.tickSize && opts.tickSize[1] === 'quarter') || (opts.minTickSize && opts.minTickSize[1] === 'quarter')\n                ? specQuarters\n                : specMonths;\n\n            if (opts.minTickSize != null) {\n              if (typeof opts.tickSize == 'number') {\n                minSize = opts.tickSize;\n              } else {\n                minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\n              }\n            }\n\n            for (var i = 0; i < spec.length - 1; ++i) {\n              if (\n                axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]] + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2 &&\n                spec[i][0] * timeUnitSize[spec[i][1]] >= minSize\n              ) {\n                break;\n              }\n            }\n\n            let size = spec[i][0];\n            let unit = spec[i][1];\n\n            // special-case the possibility of several years\n\n            if (unit == 'year') {\n              // if given a minTickSize in years, just use it,\n              // ensuring that it's an integer\n\n              if (opts.minTickSize != null && opts.minTickSize[1] == 'year') {\n                size = Math.floor(opts.minTickSize[0]);\n              } else {\n                const magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\n                const norm = axis.delta / timeUnitSize.year / magn;\n\n                if (norm < 1.5) {\n                  size = 1;\n                } else if (norm < 3) {\n                  size = 2;\n                } else if (norm < 7.5) {\n                  size = 5;\n                } else {\n                  size = 10;\n                }\n\n                size *= magn;\n              }\n\n              // minimum size for years is 1\n\n              if (size < 1) {\n                size = 1;\n              }\n            }\n\n            axis.tickSize = opts.tickSize || [size, unit];\n            const tickSize = axis.tickSize[0];\n            unit = axis.tickSize[1];\n\n            const step = tickSize * timeUnitSize[unit];\n\n            if (unit == 'second') {\n              d.setSeconds(floorInBase(d.getSeconds(), tickSize));\n            } else if (unit == 'minute') {\n              d.setMinutes(floorInBase(d.getMinutes(), tickSize));\n            } else if (unit == 'hour') {\n              d.setHours(floorInBase(d.getHours(), tickSize));\n            } else if (unit == 'month') {\n              d.setMonth(floorInBase(d.getMonth(), tickSize));\n            } else if (unit == 'quarter') {\n              d.setMonth(3 * floorInBase(d.getMonth() / 3, tickSize));\n            } else if (unit == 'year') {\n              d.setFullYear(floorInBase(d.getFullYear(), tickSize));\n            }\n\n            // reset smaller components\n\n            d.setMilliseconds(0);\n\n            if (step >= timeUnitSize.minute) {\n              d.setSeconds(0);\n            }\n            if (step >= timeUnitSize.hour) {\n              d.setMinutes(0);\n            }\n            if (step >= timeUnitSize.day) {\n              d.setHours(0);\n            }\n            if (step >= timeUnitSize.day * 4) {\n              d.setDate(1);\n            }\n            if (step >= timeUnitSize.month * 2) {\n              d.setMonth(floorInBase(d.getMonth(), 3));\n            }\n            if (step >= timeUnitSize.quarter * 2) {\n              d.setMonth(floorInBase(d.getMonth(), 6));\n            }\n            if (step >= timeUnitSize.year) {\n              d.setMonth(0);\n            }\n\n            let carry = 0;\n            let v = Number.NaN;\n            let prev;\n\n            do {\n              prev = v;\n              v = d.getTime();\n              ticks.push(v);\n\n              if (unit == 'month' || unit == 'quarter') {\n                if (tickSize < 1) {\n                  // a bit complicated - we'll divide the\n                  // month/quarter up but we need to take\n                  // care of fractions so we don't end up in\n                  // the middle of a day\n\n                  d.setDate(1);\n                  const start = d.getTime();\n                  d.setMonth(d.getMonth() + (unit == 'quarter' ? 3 : 1));\n                  const end = d.getTime();\n                  d.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);\n                  carry = d.getHours();\n                  d.setHours(0);\n                } else {\n                  d.setMonth(d.getMonth() + tickSize * (unit == 'quarter' ? 3 : 1));\n                }\n              } else if (unit == 'year') {\n                d.setFullYear(d.getFullYear() + tickSize);\n              } else {\n                d.setTime(v + step);\n              }\n            } while (v < axis.max && v != prev);\n\n            return ticks;\n          };\n\n          axis.tickFormatter = function(v, axis) {\n            const d = dateGenerator(v, axis.options);\n\n            // first check global format\n\n            if (opts.timeformat != null) {\n              return formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);\n            }\n\n            // possibly use quarters if quarters are mentioned in\n            // any of these places\n\n            const useQuarters =\n              (axis.options.tickSize && axis.options.tickSize[1] == 'quarter') ||\n              (axis.options.minTickSize && axis.options.minTickSize[1] == 'quarter');\n\n            const t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];\n            const span = axis.max - axis.min;\n            const suffix = opts.twelveHourClock ? ' %p' : '';\n            const hourCode = opts.twelveHourClock ? '%I' : '%H';\n            let fmt;\n\n            if (t < timeUnitSize.minute) {\n              fmt = hourCode + ':%M:%S' + suffix;\n            } else if (t < timeUnitSize.day) {\n              if (span < 2 * timeUnitSize.day) {\n                fmt = hourCode + ':%M' + suffix;\n              } else {\n                fmt = '%b %d ' + hourCode + ':%M' + suffix;\n              }\n            } else if (t < timeUnitSize.month) {\n              fmt = '%b %d';\n            } else if ((useQuarters && t < timeUnitSize.quarter) || (!useQuarters && t < timeUnitSize.year)) {\n              if (span < timeUnitSize.year) {\n                fmt = '%b';\n              } else {\n                fmt = '%b %Y';\n              }\n            } else if (useQuarters && t < timeUnitSize.year) {\n              if (span < timeUnitSize.year) {\n                fmt = 'Q%q';\n              } else {\n                fmt = 'Q%q %Y';\n              }\n            } else {\n              fmt = '%Y';\n            }\n\n            const rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);\n\n            return rt;\n          };\n        }\n      });\n    });\n  }\n\n  $.plot.plugins.push({\n    init: init,\n    options: options,\n    name: 'time',\n    version: '1.0',\n  });\n\n  // Time-axis support used to be in Flot core, which exposed the\n  // formatDate function on the plot object.  Various plugins depend\n  // on the function, so we need to re-expose it here.\n\n  $.plot.formatDate = formatDate;\n})(window.jQuery);\n","/**\n *\n * THIS FILE WAS COPIED INTO PROMETHEUS FROM GRAFANA'S VENDORED FORK OF FLOT\n * (LIVING AT https://github.com/grafana/grafana/tree/master/public/vendor/flot),\n * WHICH CONTAINS FIXES FOR DISPLAYING NULL VALUES IN STACKED GRAPHS. THE ORIGINAL\n * FLOT CODE WAS LICENSED UNDER THE MIT LICENSE AS STATED BELOW. ADDITIONAL\n * CHANGES HAVE BEEN CONTRIBUTED TO THE GRAFANA FORK UNDER AN APACHE 2 LICENSE, SEE\n * https://github.com/grafana/grafana/blob/master/license.\n *\n */\n\n/* eslint-disable prefer-spread */\n/* eslint-disable no-loop-func */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-redeclare */\n/* eslint-disable no-useless-escape */\n/* eslint-disable prefer-const */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-var */\n/* Flot plugin for showing crosshairs when the mouse hovers over the plot.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin supports these options:\n\n\tcrosshair: {\n\t\tmode: null or \"x\" or \"y\" or \"xy\"\n\t\tcolor: color\n\t\tlineWidth: number\n\t}\n\nSet the mode to one of \"x\", \"y\" or \"xy\". The \"x\" mode enables a vertical\ncrosshair that lets you trace the values on the x axis, \"y\" enables a\nhorizontal crosshair and \"xy\" enables them both. \"color\" is the color of the\ncrosshair (default is \"rgba(170, 0, 0, 0.80)\"), \"lineWidth\" is the width of\nthe drawn lines (default is 1).\n\nThe plugin also adds four public methods:\n\n  - setCrosshair( pos )\n\n    Set the position of the crosshair. Note that this is cleared if the user\n    moves the mouse. \"pos\" is in coordinates of the plot and should be on the\n    form { x: xpos, y: ypos } (you can use x2/x3/... if you're using multiple\n    axes), which is coincidentally the same format as what you get from a\n    \"plothover\" event. If \"pos\" is null, the crosshair is cleared.\n\n  - clearCrosshair()\n\n    Clear the crosshair.\n\n  - lockCrosshair(pos)\n\n    Cause the crosshair to lock to the current location, no longer updating if\n    the user moves the mouse. Optionally supply a position (passed on to\n    setCrosshair()) to move it to.\n\n    Example usage:\n\n\tvar myFlot = $.plot( $(\"#graph\"), ..., { crosshair: { mode: \"x\" } } };\n\t$(\"#graph\").bind( \"plothover\", function ( evt, position, item ) {\n\t\tif ( item ) {\n\t\t\t// Lock the crosshair to the data point being hovered\n\t\t\tmyFlot.lockCrosshair({\n\t\t\t\tx: item.datapoint[ 0 ],\n\t\t\t\ty: item.datapoint[ 1 ]\n\t\t\t});\n\t\t} else {\n\t\t\t// Return normal crosshair operation\n\t\t\tmyFlot.unlockCrosshair();\n\t\t}\n\t});\n\n  - unlockCrosshair()\n\n    Free the crosshair to move again after locking it.\n*/\n\n(function($) {\n  const options = {\n    crosshair: {\n      mode: null, // one of null, \"x\", \"y\" or \"xy\",\n      color: 'rgba(170, 0, 0, 0.80)',\n      lineWidth: 1,\n    },\n  };\n\n  function init(plot) {\n    // position of crosshair in pixels\n    const crosshair = { x: -1, y: -1, locked: false };\n\n    plot.setCrosshair = function setCrosshair(pos) {\n      if (!pos) crosshair.x = -1;\n      else {\n        const o = plot.p2c(pos);\n        crosshair.x = Math.max(0, Math.min(o.left, plot.width()));\n        crosshair.y = Math.max(0, Math.min(o.top, plot.height()));\n      }\n\n      plot.triggerRedrawOverlay();\n    };\n\n    plot.clearCrosshair = plot.setCrosshair; // passes null for pos\n\n    plot.lockCrosshair = function lockCrosshair(pos) {\n      if (pos) plot.setCrosshair(pos);\n      crosshair.locked = true;\n    };\n\n    plot.unlockCrosshair = function unlockCrosshair() {\n      crosshair.locked = false;\n    };\n\n    function onMouseOut() {\n      if (crosshair.locked) return;\n\n      if (crosshair.x != -1) {\n        crosshair.x = -1;\n        plot.triggerRedrawOverlay();\n      }\n    }\n\n    function onMouseMove(e) {\n      if (crosshair.locked) return;\n\n      if (plot.getSelection && plot.getSelection()) {\n        crosshair.x = -1; // hide the crosshair while selecting\n        return;\n      }\n\n      const offset = plot.offset();\n      crosshair.x = Math.max(0, Math.min(e.pageX - offset.left, plot.width()));\n      crosshair.y = Math.max(0, Math.min(e.pageY - offset.top, plot.height()));\n      plot.triggerRedrawOverlay();\n    }\n\n    plot.hooks.bindEvents.push(function(plot, eventHolder) {\n      if (!plot.getOptions().crosshair.mode) return;\n\n      eventHolder.mouseout(onMouseOut);\n      eventHolder.mousemove(onMouseMove);\n    });\n\n    plot.hooks.drawOverlay.push(function(plot, ctx) {\n      const c = plot.getOptions().crosshair;\n      if (!c.mode) return;\n\n      const plotOffset = plot.getPlotOffset();\n\n      ctx.save();\n      ctx.translate(plotOffset.left, plotOffset.top);\n\n      if (crosshair.x != -1) {\n        const adj = plot.getOptions().crosshair.lineWidth % 2 ? 0.5 : 0;\n\n        ctx.strokeStyle = c.color;\n        ctx.lineWidth = c.lineWidth;\n        ctx.lineJoin = 'round';\n\n        ctx.beginPath();\n        if (c.mode.indexOf('x') != -1) {\n          const drawX = Math.floor(crosshair.x) + adj;\n          ctx.moveTo(drawX, 0);\n          ctx.lineTo(drawX, plot.height());\n        }\n        if (c.mode.indexOf('y') != -1) {\n          const drawY = Math.floor(crosshair.y) + adj;\n          ctx.moveTo(0, drawY);\n          ctx.lineTo(plot.width(), drawY);\n        }\n        ctx.stroke();\n      }\n      ctx.restore();\n    });\n\n    plot.hooks.shutdown.push(function(plot, eventHolder) {\n      eventHolder.unbind('mouseout', onMouseOut);\n      eventHolder.unbind('mousemove', onMouseMove);\n    });\n  }\n\n  $.plot.plugins.push({\n    init: init,\n    options: options,\n    name: 'crosshair',\n    version: '1.0',\n  });\n})(window.jQuery);\n","import jquery from 'jquery';\n\n(window as any).jQuery = jquery;\n(window as any).moment = require('moment');\n","import React, { FC, useState } from 'react';\nimport { Link } from '@reach/router';\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from 'reactstrap';\nimport PathPrefixProps from './types/PathPrefixProps';\n\ninterface NavbarProps {\n  consolesLink: string | null;\n}\n\nconst Navigation: FC<PathPrefixProps & NavbarProps> = ({ pathPrefix, consolesLink }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const toggle = () => setIsOpen(!isOpen);\n  return (\n    <Navbar className=\"mb-3\" dark color=\"dark\" expand=\"md\" fixed=\"top\">\n      <NavbarToggler onClick={toggle} />\n      <Link className=\"pt-0 navbar-brand\" to={`${pathPrefix}/new/graph`}>\n        Prometheus\n      </Link>\n      <Collapse isOpen={isOpen} navbar style={{ justifyContent: 'space-between' }}>\n        <Nav className=\"ml-0\" navbar>\n          {consolesLink !== null && (\n            <NavItem>\n              <NavLink href={consolesLink}>Consoles</NavLink>\n            </NavItem>\n          )}\n          <NavItem>\n            <NavLink tag={Link} to={`${pathPrefix}/new/alerts`}>\n              Alerts\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink tag={Link} to={`${pathPrefix}/new/graph`}>\n              Graph\n            </NavLink>\n          </NavItem>\n          <UncontrolledDropdown nav inNavbar>\n            <DropdownToggle nav caret>\n              Status\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/status`}>\n                Runtime & Build Information\n              </DropdownItem>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/tsdb-status`}>\n                TSDB Status\n              </DropdownItem>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/flags`}>\n                Command-Line Flags\n              </DropdownItem>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/config`}>\n                Configuration\n              </DropdownItem>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/rules`}>\n                Rules\n              </DropdownItem>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/targets`}>\n                Targets\n              </DropdownItem>\n              <DropdownItem tag={Link} to={`${pathPrefix}/new/service-discovery`}>\n                Service Discovery\n              </DropdownItem>\n            </DropdownMenu>\n          </UncontrolledDropdown>\n          <NavItem>\n            <NavLink href=\"https://prometheus.io/docs/prometheus/latest/getting_started/\">Help</NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink href={`${pathPrefix}/graph${window.location.search}`}>Classic UI</NavLink>\n          </NavItem>\n        </Nav>\n      </Collapse>\n    </Navbar>\n  );\n};\n\nexport default Navigation;\n","import { useState, useEffect } from 'react';\n\nexport type APIResponse<T> = { status: string; data: T };\n\nexport interface FetchState<T> {\n  response: APIResponse<T>;\n  error?: Error;\n  isLoading: boolean;\n}\n\nexport const useFetch = <T extends {}>(url: string, options?: RequestInit): FetchState<T> => {\n  const [response, setResponse] = useState<APIResponse<T>>({ status: 'start fetching' } as any);\n  const [error, setError] = useState<Error>();\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      try {\n        const res = await fetch(url, { cache: 'no-store', credentials: 'same-origin', ...options });\n        if (!res.ok) {\n          throw new Error(res.statusText);\n        }\n        const json = (await res.json()) as APIResponse<T>;\n        setResponse(json);\n        setIsLoading(false);\n      } catch (error) {\n        setError(error);\n      }\n    };\n    fetchData();\n  }, [url, options]);\n  return { response, error, isLoading };\n};\n","import React, { FC, ComponentType } from 'react';\nimport { Alert } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\n\ninterface StatusIndicatorProps {\n  error?: Error;\n  isLoading?: boolean;\n  customErrorMsg?: JSX.Element;\n  componentTitle?: string;\n}\n\nexport const withStatusIndicator = <T extends {}>(Component: ComponentType<T>): FC<StatusIndicatorProps & T> => ({\n  error,\n  isLoading,\n  customErrorMsg,\n  componentTitle,\n  ...rest\n}) => {\n  if (error) {\n    return (\n      <Alert color=\"danger\">\n        {customErrorMsg ? (\n          customErrorMsg\n        ) : (\n          <>\n            <strong>Error:</strong> Error fetching {componentTitle || Component.displayName}: {error.message}\n          </>\n        )}\n      </Alert>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <FontAwesomeIcon\n        size=\"3x\"\n        icon={faSpinner}\n        spin\n        className=\"position-absolute\"\n        style={{ transform: 'translate(-50%, -50%)', top: '50%', left: '50%' }}\n      />\n    );\n  }\n  return <Component {...(rest as T)} />;\n};\n","import React, { Component } from 'react';\nimport { Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\n\nimport Downshift, { ControllerStateAndHelpers } from 'downshift';\nimport fuzzy from 'fuzzy';\nimport sanitizeHTML from 'sanitize-html';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch, faSpinner } from '@fortawesome/free-solid-svg-icons';\n\ninterface ExpressionInputProps {\n  value: string;\n  onExpressionChange: (expr: string) => void;\n  autocompleteSections: { [key: string]: string[] };\n  executeQuery: () => void;\n  loading: boolean;\n}\n\ninterface ExpressionInputState {\n  height: number | string;\n}\n\nclass ExpressionInput extends Component<ExpressionInputProps, ExpressionInputState> {\n  private exprInputRef = React.createRef<HTMLInputElement>();\n\n  constructor(props: ExpressionInputProps) {\n    super(props);\n    this.state = {\n      height: 'auto',\n    };\n  }\n\n  componentDidMount() {\n    this.setHeight();\n  }\n\n  setHeight = () => {\n    const { offsetHeight, clientHeight, scrollHeight } = this.exprInputRef.current!;\n    const offset = offsetHeight - clientHeight; // Needed in order for the height to be more accurate.\n    this.setState({ height: scrollHeight + offset });\n  };\n\n  handleInput = () => {\n    this.setValue(this.exprInputRef.current!.value);\n  };\n\n  setValue = (value: string) => {\n    const { onExpressionChange } = this.props;\n    onExpressionChange(value);\n    this.setState({ height: 'auto' }, this.setHeight);\n  };\n\n  componentDidUpdate(prevProps: ExpressionInputProps) {\n    const { value } = this.props;\n    if (value !== prevProps.value) {\n      this.setValue(value);\n    }\n  }\n\n  handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    const { executeQuery } = this.props;\n    if (event.key === 'Enter' && !event.shiftKey) {\n      executeQuery();\n      event.preventDefault();\n    }\n  };\n\n  getSearchMatches = (input: string, expressions: string[]) => {\n    return fuzzy.filter(input.replace(/ /g, ''), expressions, {\n      pre: '<strong>',\n      post: '</strong>',\n    });\n  };\n\n  createAutocompleteSection = (downshift: ControllerStateAndHelpers<any>) => {\n    const { inputValue = '', closeMenu, highlightedIndex } = downshift;\n    const { autocompleteSections } = this.props;\n    let index = 0;\n    const sections = inputValue!.length\n      ? Object.entries(autocompleteSections).reduce((acc, [title, items]) => {\n          const matches = this.getSearchMatches(inputValue!, items);\n          return !matches.length\n            ? acc\n            : [\n                ...acc,\n                <ul className=\"autosuggest-dropdown-list\" key={title}>\n                  <li className=\"autosuggest-dropdown-header\">{title}</li>\n                  {matches\n                    .slice(0, 100) // Limit DOM rendering to 100 results, as DOM rendering is sloooow.\n                    .map(({ original, string: text }) => {\n                      const itemProps = downshift.getItemProps({\n                        key: original,\n                        index,\n                        item: original,\n                        style: {\n                          backgroundColor: highlightedIndex === index++ ? 'lightgray' : 'white',\n                        },\n                      });\n                      return (\n                        <li\n                          key={title}\n                          {...itemProps}\n                          dangerouslySetInnerHTML={{ __html: sanitizeHTML(text, { allowedTags: ['strong'] }) }}\n                        />\n                      );\n                    })}\n                </ul>,\n              ];\n        }, [] as JSX.Element[])\n      : [];\n\n    if (!sections.length) {\n      // This is ugly but is needed in order to sync state updates.\n      // This way we force downshift to wait React render call to complete before closeMenu to be triggered.\n      setTimeout(closeMenu);\n      return null;\n    }\n\n    return (\n      <div {...downshift.getMenuProps()} className=\"autosuggest-dropdown\">\n        {sections}\n      </div>\n    );\n  };\n\n  render() {\n    const { executeQuery, value } = this.props;\n    const { height } = this.state;\n    return (\n      <Downshift onSelect={this.setValue}>\n        {downshift => (\n          <div>\n            <InputGroup className=\"expression-input\">\n              <InputGroupAddon addonType=\"prepend\">\n                <InputGroupText>\n                  {this.props.loading ? <FontAwesomeIcon icon={faSpinner} spin /> : <FontAwesomeIcon icon={faSearch} />}\n                </InputGroupText>\n              </InputGroupAddon>\n              <Input\n                onInput={this.handleInput}\n                style={{ height }}\n                autoFocus\n                type=\"textarea\"\n                rows=\"1\"\n                onKeyPress={this.handleKeyPress}\n                placeholder=\"Expression (press Shift+Enter for newlines)\"\n                innerRef={this.exprInputRef}\n                {...downshift.getInputProps({\n                  onKeyDown: (event: React.KeyboardEvent): void => {\n                    switch (event.key) {\n                      case 'Home':\n                      case 'End':\n                        // We want to be able to jump to the beginning/end of the input field.\n                        // By default, Downshift otherwise jumps to the first/last suggestion item instead.\n                        (event.nativeEvent as any).preventDownshiftDefault = true;\n                        break;\n                      case 'ArrowUp':\n                      case 'ArrowDown':\n                        if (!downshift.isOpen) {\n                          (event.nativeEvent as any).preventDownshiftDefault = true;\n                        }\n                        break;\n                      case 'Enter':\n                        downshift.closeMenu();\n                        break;\n                      case 'Escape':\n                        if (!downshift.isOpen) {\n                          this.exprInputRef.current!.blur();\n                        }\n                        break;\n                      default:\n                    }\n                  },\n                } as any)}\n                value={value}\n              />\n              <InputGroupAddon addonType=\"append\">\n                <Button className=\"execute-btn\" color=\"primary\" onClick={executeQuery}>\n                  Execute\n                </Button>\n              </InputGroupAddon>\n            </InputGroup>\n            {downshift.isOpen && this.createAutocompleteSection(downshift)}\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n\nexport default ExpressionInput;\n","import $ from 'jquery';\nimport React, { Component } from 'react';\nimport { Button, InputGroup, InputGroupAddon, Input } from 'reactstrap';\n\nimport moment from 'moment-timezone';\n\nimport 'tempusdominus-core';\nimport 'tempusdominus-bootstrap-4';\nimport '../../../node_modules/tempusdominus-bootstrap-4/build/css/tempusdominus-bootstrap-4.min.css';\n\nimport { dom, library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faChevronLeft,\n  faChevronRight,\n  faCalendarCheck,\n  faArrowUp,\n  faArrowDown,\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons';\n\nlibrary.add(faChevronLeft, faChevronRight, faCalendarCheck, faArrowUp, faArrowDown, faTimes);\n// Sadly needed to also replace <i> within the date picker, since it's not a React component.\ndom.watch();\n\ninterface TimeInputProps {\n  time: number | null; // Timestamp in milliseconds.\n  useLocalTime: boolean;\n  range: number; // Range in seconds.\n  placeholder: string;\n  onChangeTime: (time: number | null) => void;\n}\n\nclass TimeInput extends Component<TimeInputProps> {\n  private timeInputRef = React.createRef<HTMLInputElement>();\n  private $time: any = null;\n\n  getBaseTime = (): number => {\n    return this.props.time || moment().valueOf();\n  };\n\n  calcShiftRange = () => (this.props.range * 1000) / 2;\n\n  increaseTime = (): void => {\n    const time = this.getBaseTime() + this.calcShiftRange();\n    this.props.onChangeTime(time);\n  };\n\n  decreaseTime = (): void => {\n    const time = this.getBaseTime() - this.calcShiftRange();\n    this.props.onChangeTime(time);\n  };\n\n  clearTime = (): void => {\n    this.props.onChangeTime(null);\n  };\n\n  timezone = (): string => {\n    return this.props.useLocalTime ? moment.tz.guess() : 'UTC';\n  };\n\n  componentDidMount() {\n    this.$time = $(this.timeInputRef.current!);\n\n    this.$time.datetimepicker({\n      icons: {\n        today: 'fas fa-calendar-check',\n      },\n      buttons: {\n        //showClear: true,\n        showClose: true,\n        showToday: true,\n      },\n      sideBySide: true,\n      format: 'YYYY-MM-DD HH:mm:ss',\n      locale: 'en',\n      timeZone: this.timezone(),\n      defaultDate: this.props.time,\n    });\n\n    this.$time.on('change.datetimepicker', (e: any) => {\n      if (e.date) {\n        this.props.onChangeTime(e.date.valueOf());\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.$time.datetimepicker('destroy');\n  }\n\n  componentDidUpdate(prevProps: TimeInputProps) {\n    const { time, useLocalTime } = this.props;\n    if (prevProps.time !== time) {\n      this.$time.datetimepicker('date', time ? moment(time) : null);\n    }\n    if (prevProps.useLocalTime !== useLocalTime) {\n      this.$time.datetimepicker('options', { timeZone: this.timezone(), defaultDate: null });\n    }\n  }\n\n  render() {\n    return (\n      <InputGroup className=\"time-input\" size=\"sm\">\n        <InputGroupAddon addonType=\"prepend\">\n          <Button title=\"Decrease time\" onClick={this.decreaseTime}>\n            <FontAwesomeIcon icon={faChevronLeft} fixedWidth />\n          </Button>\n        </InputGroupAddon>\n\n        <Input\n          placeholder={this.props.placeholder}\n          innerRef={this.timeInputRef}\n          onFocus={() => this.$time.datetimepicker('show')}\n          onBlur={() => this.$time.datetimepicker('hide')}\n          onKeyDown={e => ['Escape', 'Enter'].includes(e.key) && this.$time.datetimepicker('hide')}\n        />\n\n        {/* CAUTION: While the datetimepicker also has an option to show a 'clear' button,\n            that functionality is broken, so we create an external solution instead. */}\n        {this.props.time && (\n          <InputGroupAddon addonType=\"append\">\n            <Button className=\"clear-time-btn\" title=\"Clear time\" onClick={this.clearTime}>\n              <FontAwesomeIcon icon={faTimes} fixedWidth />\n            </Button>\n          </InputGroupAddon>\n        )}\n\n        <InputGroupAddon addonType=\"append\">\n          <Button title=\"Increase time\" onClick={this.increaseTime}>\n            <FontAwesomeIcon icon={faChevronRight} fixedWidth />\n          </Button>\n        </InputGroupAddon>\n      </InputGroup>\n    );\n  }\n}\n\nexport default TimeInput;\n","import React, { Component } from 'react';\nimport { Button, ButtonGroup, Form, InputGroup, InputGroupAddon, Input } from 'reactstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faMinus, faChartArea, faChartLine } from '@fortawesome/free-solid-svg-icons';\n\nimport TimeInput from './TimeInput';\nimport { parseRange, formatRange } from '../../utils';\n\ninterface GraphControlsProps {\n  range: number;\n  endTime: number | null;\n  useLocalTime: boolean;\n  resolution: number | null;\n  stacked: boolean;\n\n  onChangeRange: (range: number) => void;\n  onChangeEndTime: (endTime: number | null) => void;\n  onChangeResolution: (resolution: number | null) => void;\n  onChangeStacking: (stacked: boolean) => void;\n}\n\nclass GraphControls extends Component<GraphControlsProps> {\n  private rangeRef = React.createRef<HTMLInputElement>();\n  private resolutionRef = React.createRef<HTMLInputElement>();\n\n  rangeSteps = [\n    1,\n    10,\n    60,\n    5 * 60,\n    15 * 60,\n    30 * 60,\n    60 * 60,\n    2 * 60 * 60,\n    6 * 60 * 60,\n    12 * 60 * 60,\n    24 * 60 * 60,\n    48 * 60 * 60,\n    7 * 24 * 60 * 60,\n    14 * 24 * 60 * 60,\n    28 * 24 * 60 * 60,\n    56 * 24 * 60 * 60,\n    365 * 24 * 60 * 60,\n    730 * 24 * 60 * 60,\n  ];\n\n  onChangeRangeInput = (rangeText: string): void => {\n    const range = parseRange(rangeText);\n    if (range === null) {\n      this.changeRangeInput(this.props.range);\n    } else {\n      this.props.onChangeRange(range);\n    }\n  };\n\n  changeRangeInput = (range: number): void => {\n    this.rangeRef.current!.value = formatRange(range);\n  };\n\n  increaseRange = (): void => {\n    for (const range of this.rangeSteps) {\n      if (this.props.range < range) {\n        this.changeRangeInput(range);\n        this.props.onChangeRange(range);\n        return;\n      }\n    }\n  };\n\n  decreaseRange = (): void => {\n    for (const range of this.rangeSteps.slice().reverse()) {\n      if (this.props.range > range) {\n        this.changeRangeInput(range);\n        this.props.onChangeRange(range);\n        return;\n      }\n    }\n  };\n\n  componentDidUpdate(prevProps: GraphControlsProps) {\n    if (prevProps.range !== this.props.range) {\n      this.changeRangeInput(this.props.range);\n    }\n    if (prevProps.resolution !== this.props.resolution) {\n      this.resolutionRef.current!.value = this.props.resolution !== null ? this.props.resolution.toString() : '';\n    }\n  }\n\n  render() {\n    return (\n      <Form inline className=\"graph-controls\" onSubmit={e => e.preventDefault()}>\n        <InputGroup className=\"range-input\" size=\"sm\">\n          <InputGroupAddon addonType=\"prepend\">\n            <Button title=\"Decrease range\" onClick={this.decreaseRange}>\n              <FontAwesomeIcon icon={faMinus} fixedWidth />\n            </Button>\n          </InputGroupAddon>\n\n          <Input\n            defaultValue={formatRange(this.props.range)}\n            innerRef={this.rangeRef}\n            onBlur={() => this.onChangeRangeInput(this.rangeRef.current!.value)}\n          />\n\n          <InputGroupAddon addonType=\"append\">\n            <Button title=\"Increase range\" onClick={this.increaseRange}>\n              <FontAwesomeIcon icon={faPlus} fixedWidth />\n            </Button>\n          </InputGroupAddon>\n        </InputGroup>\n\n        <TimeInput\n          time={this.props.endTime}\n          useLocalTime={this.props.useLocalTime}\n          range={this.props.range}\n          placeholder=\"End time\"\n          onChangeTime={this.props.onChangeEndTime}\n        />\n\n        <Input\n          placeholder=\"Res. (s)\"\n          className=\"resolution-input\"\n          defaultValue={this.props.resolution !== null ? this.props.resolution.toString() : ''}\n          innerRef={this.resolutionRef}\n          onBlur={() => {\n            const res = parseInt(this.resolutionRef.current!.value);\n            this.props.onChangeResolution(res ? res : null);\n          }}\n          bsSize=\"sm\"\n        />\n\n        <ButtonGroup className=\"stacked-input\" size=\"sm\">\n          <Button\n            title=\"Show unstacked line graph\"\n            onClick={() => this.props.onChangeStacking(false)}\n            active={!this.props.stacked}\n          >\n            <FontAwesomeIcon icon={faChartLine} fixedWidth />\n          </Button>\n          <Button title=\"Show stacked graph\" onClick={() => this.props.onChangeStacking(true)} active={this.props.stacked}>\n            <FontAwesomeIcon icon={faChartArea} fixedWidth />\n          </Button>\n        </ButtonGroup>\n      </Form>\n    );\n  }\n}\n\nexport default GraphControls;\n","import React, { FC } from 'react';\nimport { metricToSeriesName } from '../../utils';\n\ninterface SeriesNameProps {\n  labels: { [key: string]: string } | null;\n  format: boolean;\n}\n\nconst SeriesName: FC<SeriesNameProps> = ({ labels, format }) => {\n  const renderFormatted = (): React.ReactElement => {\n    const labelNodes: React.ReactElement[] = [];\n    let first = true;\n    for (const label in labels) {\n      if (label === '__name__') {\n        continue;\n      }\n\n      labelNodes.push(\n        <span key={label}>\n          {!first && ', '}\n          <span className=\"legend-label-name\">{label}</span>=<span className=\"legend-label-value\">\"{labels[label]}\"</span>\n        </span>\n      );\n\n      if (first) {\n        first = false;\n      }\n    }\n\n    return (\n      <div>\n        <span className=\"legend-metric-name\">{labels!.__name__ || ''}</span>\n        <span className=\"legend-label-brace\">{'{'}</span>\n        {labelNodes}\n        <span className=\"legend-label-brace\">{'}'}</span>\n      </div>\n    );\n  };\n\n  if (labels === null) {\n    return <>scalar</>;\n  }\n\n  if (format) {\n    return renderFormatted();\n  }\n  // Return a simple text node. This is much faster to scroll through\n  // for longer lists (hundreds of items).\n  return <>{metricToSeriesName(labels!)}</>;\n};\n\nexport default SeriesName;\n","import React, { PureComponent, SyntheticEvent } from 'react';\nimport SeriesName from './SeriesName';\nimport { GraphSeries } from './Graph';\n\ninterface LegendProps {\n  chartData: GraphSeries[];\n  shouldReset: boolean;\n  onLegendMouseOut: (ev: SyntheticEvent<HTMLDivElement>) => void;\n  onSeriesToggle: (selected: number[], index: number) => void;\n  onHover: (index: number) => (ev: SyntheticEvent<HTMLDivElement>) => void;\n}\n\ninterface LegendState {\n  selectedIndexes: number[];\n}\n\nexport class Legend extends PureComponent<LegendProps, LegendState> {\n  state = {\n    selectedIndexes: [] as number[],\n  };\n  componentDidUpdate(prevProps: LegendProps) {\n    if (this.props.shouldReset && prevProps.shouldReset !== this.props.shouldReset) {\n      this.setState({ selectedIndexes: [] });\n    }\n  }\n  handleSeriesSelect = (index: number) => (ev: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // TODO: add proper event type\n    const { selectedIndexes } = this.state;\n\n    let selected = [index];\n    if (ev.ctrlKey || ev.metaKey) {\n      const { chartData } = this.props;\n      if (selectedIndexes.includes(index)) {\n        selected = selectedIndexes.filter(idx => idx !== index);\n      } else {\n        selected =\n          // Flip the logic - In case none is selected ctrl + click should deselect clicked series.\n          selectedIndexes.length === 0\n            ? chartData.reduce<number[]>((acc, _, i) => (i === index ? acc : [...acc, i]), [])\n            : [...selectedIndexes, index]; // Select multiple.\n      }\n    } else if (selectedIndexes.length === 1 && selectedIndexes.includes(index)) {\n      selected = [];\n    }\n\n    this.setState({ selectedIndexes: selected });\n    this.props.onSeriesToggle(selected, index);\n  };\n\n  render() {\n    const { chartData, onLegendMouseOut, onHover } = this.props;\n    const { selectedIndexes } = this.state;\n    const canUseHover = chartData.length > 1 && selectedIndexes.length === 0;\n\n    return (\n      <div className=\"graph-legend\" onMouseOut={canUseHover ? onLegendMouseOut : undefined}>\n        {chartData.map(({ index, color, labels }) => (\n          <div\n            style={{ opacity: selectedIndexes.length === 0 || selectedIndexes.includes(index) ? 1 : 0.5 }}\n            onClick={chartData.length > 1 ? this.handleSeriesSelect(index) : undefined}\n            onMouseOver={canUseHover ? onHover(index) : undefined}\n            key={index}\n            className=\"legend-item\"\n          >\n            <span className=\"legend-swatch\" style={{ backgroundColor: color }}></span>\n            <SeriesName labels={labels} format />\n          </div>\n        ))}\n        {chartData.length > 1 && (\n          <div className=\"pl-1 mt-1 text-muted\" style={{ fontSize: 13 }}>\n            Click: select series, {navigator.platform.includes('Mac') ? 'CMD' : 'CTRL'} + click: toggle multiple series\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import $ from 'jquery';\n\nimport { escapeHTML } from '../../utils';\nimport { Metric } from '../../types/types';\nimport { GraphProps, GraphSeries } from './Graph';\nimport moment from 'moment-timezone';\n\nexport const formatValue = (y: number | null): string => {\n  if (y === null) {\n    return 'null';\n  }\n  const absY = Math.abs(y);\n\n  if (absY >= 1e24) {\n    return (y / 1e24).toFixed(2) + 'Y';\n  } else if (absY >= 1e21) {\n    return (y / 1e21).toFixed(2) + 'Z';\n  } else if (absY >= 1e18) {\n    return (y / 1e18).toFixed(2) + 'E';\n  } else if (absY >= 1e15) {\n    return (y / 1e15).toFixed(2) + 'P';\n  } else if (absY >= 1e12) {\n    return (y / 1e12).toFixed(2) + 'T';\n  } else if (absY >= 1e9) {\n    return (y / 1e9).toFixed(2) + 'G';\n  } else if (absY >= 1e6) {\n    return (y / 1e6).toFixed(2) + 'M';\n  } else if (absY >= 1e3) {\n    return (y / 1e3).toFixed(2) + 'k';\n  } else if (absY >= 1) {\n    return y.toFixed(2);\n  } else if (absY === 0) {\n    return y.toFixed(2);\n  } else if (absY < 1e-23) {\n    return (y / 1e-24).toFixed(2) + 'y';\n  } else if (absY < 1e-20) {\n    return (y / 1e-21).toFixed(2) + 'z';\n  } else if (absY < 1e-17) {\n    return (y / 1e-18).toFixed(2) + 'a';\n  } else if (absY < 1e-14) {\n    return (y / 1e-15).toFixed(2) + 'f';\n  } else if (absY < 1e-11) {\n    return (y / 1e-12).toFixed(2) + 'p';\n  } else if (absY < 1e-8) {\n    return (y / 1e-9).toFixed(2) + 'n';\n  } else if (absY < 1e-5) {\n    return (y / 1e-6).toFixed(2) + 'µ';\n  } else if (absY < 1e-2) {\n    return (y / 1e-3).toFixed(2) + 'm';\n  } else if (absY <= 1) {\n    return y.toFixed(2);\n  }\n  throw Error(\"couldn't format a value, this is a bug\");\n};\n\nexport const getHoverColor = (color: string, opacity: number, stacked: boolean) => {\n  const { r, g, b } = $.color.parse(color);\n  if (!stacked) {\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n  }\n  /*\n    Unfortunately flot doesn't take into consideration\n    the alpha value when adjusting the color on the stacked series.\n    TODO: find better way to set the opacity.\n  */\n  const base = (1 - opacity) * 255;\n  return `rgb(${Math.round(base + opacity * r)},${Math.round(base + opacity * g)},${Math.round(base + opacity * b)})`;\n};\n\nexport const toHoverColor = (index: number, stacked: boolean) => (series: GraphSeries, i: number) => ({\n  ...series,\n  color: getHoverColor(series.color, i !== index ? 0.3 : 1, stacked),\n});\n\nexport const getOptions = (stacked: boolean, useLocalTime: boolean): jquery.flot.plotOptions => {\n  return {\n    grid: {\n      hoverable: true,\n      clickable: true,\n      autoHighlight: true,\n      mouseActiveRadius: 100,\n    },\n    legend: {\n      show: false,\n    },\n    xaxis: {\n      mode: 'time',\n      showTicks: true,\n      showMinorTicks: true,\n      timeBase: 'milliseconds',\n      timezone: useLocalTime ? 'browser' : undefined,\n    },\n    yaxis: {\n      tickFormatter: formatValue,\n    },\n    crosshair: {\n      mode: 'xy',\n      color: '#bbb',\n    },\n    tooltip: {\n      show: true,\n      cssClass: 'graph-tooltip',\n      content: (_, xval, yval, { series }): string => {\n        const { labels, color } = series;\n        let dateTime = moment(xval);\n        if (!useLocalTime) {\n          dateTime = dateTime.utc();\n        }\n        return `\n            <div class=\"date\">${dateTime.format('YYYY-MM-DD HH:mm:ss Z')}</div>\n            <div>\n              <span class=\"detail-swatch\" style=\"background-color: ${color}\" />\n              <span>${labels.__name__ || 'value'}: <strong>${yval}</strong></span>\n            <div>\n            <div class=\"labels mt-1\">\n              ${Object.keys(labels)\n                .map(k =>\n                  k !== '__name__' ? `<div class=\"mb-1\"><strong>${k}</strong>: ${escapeHTML(labels[k])}</div>` : ''\n                )\n                .join('')}\n            </div>\n          `;\n      },\n      defaultTheme: false,\n      lines: true,\n    },\n    series: {\n      stack: stacked,\n      lines: {\n        lineWidth: stacked ? 1 : 2,\n        steps: false,\n        fill: stacked,\n      },\n      shadowSize: 0,\n    },\n  };\n};\n\n// This was adapted from Flot's color generation code.\nexport const getColors = (data: { resultType: string; result: Array<{ metric: Metric; values: [number, string][] }> }) => {\n  const colorPool = ['#edc240', '#afd8f8', '#cb4b4b', '#4da74d', '#9440ed'];\n  const colorPoolSize = colorPool.length;\n  let variation = 0;\n  return data.result.map((_, i) => {\n    // Each time we exhaust the colors in the pool we adjust\n    // a scaling factor used to produce more variations on\n    // those colors. The factor alternates negative/positive\n    // to produce lighter/darker colors.\n\n    // Reset the variation after every few cycles, or else\n    // it will end up producing only white or black colors.\n\n    if (i % colorPoolSize === 0 && i) {\n      if (variation >= 0) {\n        variation = variation < 0.5 ? -variation - 0.2 : 0;\n      } else {\n        variation = -variation;\n      }\n    }\n    return $.color.parse(colorPool[i % colorPoolSize] || '#666').scale('rgb', 1 + variation);\n  });\n};\n\nexport const normalizeData = ({ queryParams, data }: GraphProps): GraphSeries[] => {\n  const colors = getColors(data);\n  const { startTime, endTime, resolution } = queryParams!;\n  return data.result.map(({ values, metric }, index) => {\n    // Insert nulls for all missing steps.\n    const data = [];\n    let pos = 0;\n\n    for (let t = startTime; t <= endTime; t += resolution) {\n      // Allow for floating point inaccuracy.\n      const currentValue = values[pos];\n      if (values.length > pos && currentValue[0] < t + resolution / 100) {\n        data.push([currentValue[0] * 1000, parseValue(currentValue[1])]);\n        pos++;\n      } else {\n        data.push([t * 1000, null]);\n      }\n    }\n\n    return {\n      labels: metric !== null ? metric : {},\n      color: colors[index].toString(),\n      data,\n      index,\n    };\n  });\n};\n\nexport const parseValue = (value: string) => {\n  const val = parseFloat(value);\n  // \"+Inf\", \"-Inf\", \"+Inf\" will be parsed into NaN by parseFloat(). They\n  // can't be graphed, so show them as gaps (null).\n  return isNaN(val) ? null : val;\n};\n","import $ from 'jquery';\nimport React, { PureComponent } from 'react';\nimport ReactResizeDetector from 'react-resize-detector';\n\nimport { Legend } from './Legend';\nimport { Metric, QueryParams } from '../../types/types';\nimport { isPresent } from '../../utils';\nimport { normalizeData, getOptions, toHoverColor } from './GraphHelpers';\n\nrequire('../../vendor/flot/jquery.flot');\nrequire('../../vendor/flot/jquery.flot.stack');\nrequire('../../vendor/flot/jquery.flot.time');\nrequire('../../vendor/flot/jquery.flot.crosshair');\nrequire('jquery.flot.tooltip');\n\nexport interface GraphProps {\n  data: {\n    resultType: string;\n    result: Array<{ metric: Metric; values: [number, string][] }>;\n  };\n  stacked: boolean;\n  useLocalTime: boolean;\n  queryParams: QueryParams | null;\n}\n\nexport interface GraphSeries {\n  labels: { [key: string]: string };\n  color: string;\n  data: (number | null)[][]; // [x,y][]\n  index: number;\n}\n\ninterface GraphState {\n  chartData: GraphSeries[];\n}\n\nclass Graph extends PureComponent<GraphProps, GraphState> {\n  private chartRef = React.createRef<HTMLDivElement>();\n  private $chart?: jquery.flot.plot;\n  private rafID = 0;\n  private selectedSeriesIndexes: number[] = [];\n\n  state = {\n    chartData: normalizeData(this.props),\n  };\n\n  componentDidUpdate(prevProps: GraphProps) {\n    const { data, stacked, useLocalTime } = this.props;\n    if (prevProps.data !== data) {\n      this.selectedSeriesIndexes = [];\n      this.setState({ chartData: normalizeData(this.props) }, this.plot);\n    } else if (prevProps.stacked !== stacked) {\n      this.setState({ chartData: normalizeData(this.props) }, () => {\n        if (this.selectedSeriesIndexes.length === 0) {\n          this.plot();\n        } else {\n          this.plot(this.state.chartData.filter((_, i) => this.selectedSeriesIndexes.includes(i)));\n        }\n      });\n    }\n\n    if (prevProps.useLocalTime !== useLocalTime) {\n      this.plot();\n    }\n  }\n\n  componentDidMount() {\n    this.plot();\n  }\n\n  componentWillUnmount() {\n    this.destroyPlot();\n  }\n\n  plot = (data: GraphSeries[] = this.state.chartData) => {\n    if (!this.chartRef.current) {\n      return;\n    }\n    this.destroyPlot();\n\n    this.$chart = $.plot($(this.chartRef.current), data, getOptions(this.props.stacked, this.props.useLocalTime));\n  };\n\n  destroyPlot = () => {\n    if (isPresent(this.$chart)) {\n      this.$chart.destroy();\n    }\n  };\n\n  plotSetAndDraw(data: GraphSeries[] = this.state.chartData) {\n    if (isPresent(this.$chart)) {\n      this.$chart.setData(data);\n      this.$chart.draw();\n    }\n  }\n\n  handleSeriesSelect = (selected: number[], selectedIndex: number) => {\n    const { chartData } = this.state;\n    this.plot(\n      this.selectedSeriesIndexes.length === 1 && this.selectedSeriesIndexes.includes(selectedIndex)\n        ? chartData.map(toHoverColor(selectedIndex, this.props.stacked))\n        : chartData.filter((_, i) => selected.includes(i)) // draw only selected\n    );\n    this.selectedSeriesIndexes = selected;\n  };\n\n  handleSeriesHover = (index: number) => () => {\n    if (this.rafID) {\n      cancelAnimationFrame(this.rafID);\n    }\n    this.rafID = requestAnimationFrame(() => {\n      this.plotSetAndDraw(this.state.chartData.map(toHoverColor(index, this.props.stacked)));\n    });\n  };\n\n  handleLegendMouseOut = () => {\n    cancelAnimationFrame(this.rafID);\n    this.plotSetAndDraw();\n  };\n\n  handleResize = () => {\n    if (isPresent(this.$chart)) {\n      this.plot(this.$chart.getData() as GraphSeries[]);\n    }\n  };\n\n  render() {\n    const { chartData } = this.state;\n    return (\n      <div className=\"graph\">\n        <ReactResizeDetector handleWidth onResize={this.handleResize} skipOnMount />\n        <div className=\"graph-chart\" ref={this.chartRef} />\n        <Legend\n          shouldReset={this.selectedSeriesIndexes.length === 0}\n          chartData={chartData}\n          onHover={this.handleSeriesHover}\n          onLegendMouseOut={this.handleLegendMouseOut}\n          onSeriesToggle={this.handleSeriesSelect}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Graph;\n","import React, { FC } from 'react';\nimport { Alert } from 'reactstrap';\nimport Graph from './Graph';\nimport { QueryParams } from '../../types/types';\nimport { isPresent } from '../../utils';\n\ninterface GraphTabContentProps {\n  data: any;\n  stacked: boolean;\n  useLocalTime: boolean;\n  lastQueryParams: QueryParams | null;\n}\n\nexport const GraphTabContent: FC<GraphTabContentProps> = ({ data, stacked, useLocalTime, lastQueryParams }) => {\n  if (!isPresent(data)) {\n    return <Alert color=\"light\">No data queried yet</Alert>;\n  }\n  if (data.result.length === 0) {\n    return <Alert color=\"secondary\">Empty query result</Alert>;\n  }\n  if (data.resultType !== 'matrix') {\n    return (\n      <Alert color=\"danger\">Query result is of wrong type '{data.resultType}', should be 'matrix' (range vector).</Alert>\n    );\n  }\n  return <Graph data={data} stacked={stacked} useLocalTime={useLocalTime} queryParams={lastQueryParams} />;\n};\n","import React, { FC, ReactNode } from 'react';\n\nimport { Alert, Table } from 'reactstrap';\n\nimport SeriesName from './SeriesName';\nimport { Metric } from '../../types/types';\n\nexport interface QueryResult {\n  data:\n    | null\n    | {\n        resultType: 'vector';\n        result: InstantSample[];\n      }\n    | {\n        resultType: 'matrix';\n        result: RangeSamples[];\n      }\n    | {\n        resultType: 'scalar';\n        result: SampleValue;\n      }\n    | {\n        resultType: 'string';\n        result: string;\n      };\n}\n\ninterface InstantSample {\n  metric: Metric;\n  value: SampleValue;\n}\n\ninterface RangeSamples {\n  metric: Metric;\n  values: SampleValue[];\n}\n\ntype SampleValue = [number, string];\n\nconst limitSeries = <S extends InstantSample | RangeSamples>(series: S[]): S[] => {\n  const maxSeries = 10000;\n\n  if (series.length > maxSeries) {\n    return series.slice(0, maxSeries);\n  }\n  return series;\n};\n\nconst DataTable: FC<QueryResult> = ({ data }) => {\n  if (data === null) {\n    return <Alert color=\"light\">No data queried yet</Alert>;\n  }\n\n  if (data.result === null || data.result.length === 0) {\n    return <Alert color=\"secondary\">Empty query result</Alert>;\n  }\n\n  const maxFormattableSize = 1000;\n  let rows: ReactNode[] = [];\n  let limited = false;\n  const doFormat = data.result.length <= maxFormattableSize;\n  switch (data.resultType) {\n    case 'vector':\n      rows = (limitSeries(data.result) as InstantSample[]).map(\n        (s: InstantSample, index: number): ReactNode => {\n          return (\n            <tr key={index}>\n              <td>\n                <SeriesName labels={s.metric} format={doFormat} />\n              </td>\n              <td>{s.value[1]}</td>\n            </tr>\n          );\n        }\n      );\n      limited = rows.length !== data.result.length;\n      break;\n    case 'matrix':\n      rows = (limitSeries(data.result) as RangeSamples[]).map((s, index) => {\n        const valueText = s.values\n          .map(v => {\n            return v[1] + ' @' + v[0];\n          })\n          .join('\\n');\n        return (\n          <tr style={{ whiteSpace: 'pre' }} key={index}>\n            <td>\n              <SeriesName labels={s.metric} format={doFormat} />\n            </td>\n            <td>{valueText}</td>\n          </tr>\n        );\n      });\n      limited = rows.length !== data.result.length;\n      break;\n    case 'scalar':\n      rows.push(\n        <tr key=\"0\">\n          <td>scalar</td>\n          <td>{data.result[1]}</td>\n        </tr>\n      );\n      break;\n    case 'string':\n      rows.push(\n        <tr key=\"0\">\n          <td>string</td>\n          <td>{data.result[1]}</td>\n        </tr>\n      );\n      break;\n    default:\n      return <Alert color=\"danger\">Unsupported result value type</Alert>;\n  }\n\n  return (\n    <>\n      {limited && (\n        <Alert color=\"danger\">\n          <strong>Warning:</strong> Fetched {data.result.length} metrics, only displaying first {rows.length}.\n        </Alert>\n      )}\n      {!doFormat && (\n        <Alert color=\"secondary\">\n          <strong>Notice:</strong> Showing more than {maxFormattableSize} series, turning off label formatting for\n          performance reasons.\n        </Alert>\n      )}\n      <Table hover size=\"sm\" className=\"data-table\">\n        <tbody>{rows}</tbody>\n      </Table>\n    </>\n  );\n};\n\nexport default DataTable;\n","import React, { FC } from 'react';\nimport './QueryStatsView.css';\n\nexport interface QueryStats {\n  loadTime: number;\n  resolution: number;\n  resultSeries: number;\n}\n\nconst QueryStatsView: FC<QueryStats> = props => {\n  const { loadTime, resolution, resultSeries } = props;\n\n  return (\n    <div className=\"query-stats\">\n      <span className=\"float-right\">\n        Load time: {loadTime}ms &ensp; Resolution: {resolution}s &ensp; Result series: {resultSeries}\n      </span>\n    </div>\n  );\n};\n\nexport default QueryStatsView;\n","import React, { Component } from 'react';\n\nimport { Alert, Button, Col, Nav, NavItem, NavLink, Row, TabContent, TabPane } from 'reactstrap';\n\nimport moment from 'moment-timezone';\n\nimport ExpressionInput from './ExpressionInput';\nimport GraphControls from './GraphControls';\nimport { GraphTabContent } from './GraphTabContent';\nimport DataTable from './DataTable';\nimport TimeInput from './TimeInput';\nimport QueryStatsView, { QueryStats } from './QueryStatsView';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { QueryParams } from '../../types/types';\n\ninterface PanelProps {\n  options: PanelOptions;\n  onOptionsChanged: (opts: PanelOptions) => void;\n  useLocalTime: boolean;\n  pastQueries: string[];\n  metricNames: string[];\n  removePanel: () => void;\n  onExecuteQuery: (query: string) => void;\n}\n\ninterface PanelState {\n  data: any; // TODO: Type data.\n  lastQueryParams: QueryParams | null;\n  loading: boolean;\n  error: string | null;\n  stats: QueryStats | null;\n  exprInputValue: string;\n}\n\nexport interface PanelOptions {\n  expr: string;\n  type: PanelType;\n  range: number; // Range in seconds.\n  endTime: number | null; // Timestamp in milliseconds.\n  resolution: number | null; // Resolution in seconds.\n  stacked: boolean;\n}\n\nexport enum PanelType {\n  Graph = 'graph',\n  Table = 'table',\n}\n\nexport const PanelDefaultOptions: PanelOptions = {\n  type: PanelType.Table,\n  expr: '',\n  range: 3600,\n  endTime: null,\n  resolution: null,\n  stacked: false,\n};\n\nclass Panel extends Component<PanelProps & PathPrefixProps, PanelState> {\n  private abortInFlightFetch: (() => void) | null = null;\n\n  constructor(props: PanelProps) {\n    super(props);\n\n    this.state = {\n      data: null,\n      lastQueryParams: null,\n      loading: false,\n      error: null,\n      stats: null,\n      exprInputValue: props.options.expr,\n    };\n  }\n\n  componentDidUpdate({ options: prevOpts }: PanelProps) {\n    const { endTime, range, resolution, type } = this.props.options;\n    if (\n      prevOpts.endTime !== endTime ||\n      prevOpts.range !== range ||\n      prevOpts.resolution !== resolution ||\n      prevOpts.type !== type\n    ) {\n      this.executeQuery();\n    }\n  }\n\n  componentDidMount() {\n    this.executeQuery();\n  }\n\n  executeQuery = (): void => {\n    const { exprInputValue: expr } = this.state;\n    const queryStart = Date.now();\n    this.props.onExecuteQuery(expr);\n    if (this.props.options.expr !== expr) {\n      this.setOptions({ expr });\n    }\n    if (expr === '') {\n      return;\n    }\n\n    if (this.abortInFlightFetch) {\n      this.abortInFlightFetch();\n      this.abortInFlightFetch = null;\n    }\n\n    const abortController = new AbortController();\n    this.abortInFlightFetch = () => abortController.abort();\n    this.setState({ loading: true });\n\n    const endTime = this.getEndTime().valueOf() / 1000; // TODO: shouldn't valueof only work when it's a moment?\n    const startTime = endTime - this.props.options.range;\n    const resolution = this.props.options.resolution || Math.max(Math.floor(this.props.options.range / 250), 1);\n    const params: URLSearchParams = new URLSearchParams({\n      query: expr,\n    });\n\n    let path: string;\n    switch (this.props.options.type) {\n      case 'graph':\n        path = '/api/v1/query_range';\n        params.append('start', startTime.toString());\n        params.append('end', endTime.toString());\n        params.append('step', resolution.toString());\n        // TODO path prefix here and elsewhere.\n        break;\n      case 'table':\n        path = '/api/v1/query';\n        params.append('time', endTime.toString());\n        break;\n      default:\n        throw new Error('Invalid panel type \"' + this.props.options.type + '\"');\n    }\n\n    fetch(`${this.props.pathPrefix}${path}?${params}`, {\n      cache: 'no-store',\n      credentials: 'same-origin',\n      signal: abortController.signal,\n    })\n      .then(resp => resp.json())\n      .then(json => {\n        if (json.status !== 'success') {\n          throw new Error(json.error || 'invalid response JSON');\n        }\n\n        let resultSeries = 0;\n        if (json.data) {\n          const { resultType, result } = json.data;\n          if (resultType === 'scalar') {\n            resultSeries = 1;\n          } else if (result && result.length > 0) {\n            resultSeries = result.length;\n          }\n        }\n\n        this.setState({\n          error: null,\n          data: json.data,\n          lastQueryParams: {\n            startTime,\n            endTime,\n            resolution,\n          },\n          stats: {\n            loadTime: Date.now() - queryStart,\n            resolution,\n            resultSeries,\n          },\n          loading: false,\n        });\n        this.abortInFlightFetch = null;\n      })\n      .catch(error => {\n        if (error.name === 'AbortError') {\n          // Aborts are expected, don't show an error for them.\n          return;\n        }\n        this.setState({\n          error: 'Error executing query: ' + error.message,\n          loading: false,\n        });\n      });\n  };\n\n  setOptions(opts: object): void {\n    const newOpts = { ...this.props.options, ...opts };\n    this.props.onOptionsChanged(newOpts);\n  }\n\n  handleExpressionChange = (expr: string): void => {\n    this.setState({ exprInputValue: expr });\n  };\n\n  handleChangeRange = (range: number): void => {\n    this.setOptions({ range: range });\n  };\n\n  getEndTime = (): number | moment.Moment => {\n    if (this.props.options.endTime === null) {\n      return moment();\n    }\n    return this.props.options.endTime;\n  };\n\n  handleChangeEndTime = (endTime: number | null) => {\n    this.setOptions({ endTime: endTime });\n  };\n\n  handleChangeResolution = (resolution: number | null) => {\n    this.setOptions({ resolution: resolution });\n  };\n\n  handleChangeType = (type: PanelType) => {\n    if (this.props.options.type === type) {\n      return;\n    }\n\n    this.setState({ data: null });\n    this.setOptions({ type: type });\n  };\n\n  handleChangeStacking = (stacked: boolean) => {\n    this.setOptions({ stacked: stacked });\n  };\n\n  render() {\n    const { pastQueries, metricNames, options } = this.props;\n    return (\n      <div className=\"panel\">\n        <Row>\n          <Col>\n            <ExpressionInput\n              value={this.state.exprInputValue}\n              onExpressionChange={this.handleExpressionChange}\n              executeQuery={this.executeQuery}\n              loading={this.state.loading}\n              autocompleteSections={{\n                'Query History': pastQueries,\n                'Metric Names': metricNames,\n              }}\n            />\n          </Col>\n        </Row>\n        <Row>\n          <Col>{this.state.error && <Alert color=\"danger\">{this.state.error}</Alert>}</Col>\n        </Row>\n        <Row>\n          <Col>\n            <Nav tabs>\n              <NavItem>\n                <NavLink\n                  className={options.type === 'table' ? 'active' : ''}\n                  onClick={() => this.handleChangeType(PanelType.Table)}\n                >\n                  Table\n                </NavLink>\n              </NavItem>\n              <NavItem>\n                <NavLink\n                  className={options.type === 'graph' ? 'active' : ''}\n                  onClick={() => this.handleChangeType(PanelType.Graph)}\n                >\n                  Graph\n                </NavLink>\n              </NavItem>\n              {!this.state.loading && !this.state.error && this.state.stats && <QueryStatsView {...this.state.stats} />}\n            </Nav>\n            <TabContent activeTab={options.type}>\n              <TabPane tabId=\"table\">\n                {options.type === 'table' && (\n                  <>\n                    <div className=\"table-controls\">\n                      <TimeInput\n                        time={options.endTime}\n                        useLocalTime={this.props.useLocalTime}\n                        range={options.range}\n                        placeholder=\"Evaluation time\"\n                        onChangeTime={this.handleChangeEndTime}\n                      />\n                    </div>\n                    <DataTable data={this.state.data} />\n                  </>\n                )}\n              </TabPane>\n              <TabPane tabId=\"graph\">\n                {this.props.options.type === 'graph' && (\n                  <>\n                    <GraphControls\n                      range={options.range}\n                      endTime={options.endTime}\n                      useLocalTime={this.props.useLocalTime}\n                      resolution={options.resolution}\n                      stacked={options.stacked}\n                      onChangeRange={this.handleChangeRange}\n                      onChangeEndTime={this.handleChangeEndTime}\n                      onChangeResolution={this.handleChangeResolution}\n                      onChangeStacking={this.handleChangeStacking}\n                    />\n                    <GraphTabContent\n                      data={this.state.data}\n                      stacked={options.stacked}\n                      useLocalTime={this.props.useLocalTime}\n                      lastQueryParams={this.state.lastQueryParams}\n                    />\n                  </>\n                )}\n              </TabPane>\n            </TabContent>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <Button className=\"float-right\" color=\"link\" onClick={this.props.removePanel} size=\"sm\">\n              Remove Panel\n            </Button>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Panel;\n","import moment from 'moment-timezone';\n\nimport { PanelOptions, PanelType, PanelDefaultOptions } from '../pages/graph/Panel';\nimport { PanelMeta } from '../pages/graph/PanelList';\n\nexport const generateID = () => {\n  return `_${Math.random()\n    .toString(36)\n    .substr(2, 9)}`;\n};\n\nexport const byEmptyString = (p: string) => p.length > 0;\n\nexport const isPresent = <T>(obj: T): obj is NonNullable<T> => obj !== null && obj !== undefined;\n\nexport const escapeHTML = (str: string): string => {\n  const entityMap: { [key: string]: string } = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n  };\n\n  return String(str).replace(/[&<>\"'/]/g, function(s) {\n    return entityMap[s];\n  });\n};\n\nexport const metricToSeriesName = (labels: { [key: string]: string }) => {\n  if (labels === null) {\n    return 'scalar';\n  }\n  let tsName = (labels.__name__ || '') + '{';\n  const labelStrings: string[] = [];\n  for (const label in labels) {\n    if (label !== '__name__') {\n      labelStrings.push(label + '=\"' + labels[label] + '\"');\n    }\n  }\n  tsName += labelStrings.join(', ') + '}';\n  return tsName;\n};\n\nconst rangeUnits: { [unit: string]: number } = {\n  y: 60 * 60 * 24 * 365,\n  w: 60 * 60 * 24 * 7,\n  d: 60 * 60 * 24,\n  h: 60 * 60,\n  m: 60,\n  s: 1,\n};\n\nexport function parseRange(rangeText: string): number | null {\n  const rangeRE = new RegExp('^([0-9]+)([ywdhms]+)$');\n  const matches = rangeText.match(rangeRE);\n  if (!matches || matches.length !== 3) {\n    return null;\n  }\n  const value = parseInt(matches[1]);\n  const unit = matches[2];\n  return value * rangeUnits[unit];\n}\n\nexport function formatRange(range: number): string {\n  for (const unit of Object.keys(rangeUnits)) {\n    if (range % rangeUnits[unit] === 0) {\n      return range / rangeUnits[unit] + unit;\n    }\n  }\n  return range + 's';\n}\n\nexport function parseTime(timeText: string): number {\n  return moment.utc(timeText).valueOf();\n}\n\nexport function formatTime(time: number): string {\n  return moment.utc(time).format('YYYY-MM-DD HH:mm:ss');\n}\n\nexport const now = (): number => moment().valueOf();\n\nexport const humanizeDuration = (milliseconds: number): string => {\n  const sign = milliseconds < 0 ? '-' : '';\n  const unsignedMillis = milliseconds < 0 ? -1 * milliseconds : milliseconds;\n  const duration = moment.duration(unsignedMillis, 'ms');\n  const ms = Math.floor(duration.milliseconds());\n  const s = Math.floor(duration.seconds());\n  const m = Math.floor(duration.minutes());\n  const h = Math.floor(duration.hours());\n  const d = Math.floor(duration.asDays());\n  if (d !== 0) {\n    return `${sign}${d}d ${h}h ${m}m ${s}s`;\n  }\n  if (h !== 0) {\n    return `${sign}${h}h ${m}m ${s}s`;\n  }\n  if (m !== 0) {\n    return `${sign}${m}m ${s}s`;\n  }\n  if (s !== 0) {\n    return `${sign}${s}.${ms}s`;\n  }\n  if (unsignedMillis > 0) {\n    return `${sign}${unsignedMillis.toFixed(3)}ms`;\n  }\n  return '0s';\n};\n\nexport const formatRelative = (startStr: string, end: number): string => {\n  const start = parseTime(startStr);\n  if (start < 0) {\n    return 'Never';\n  }\n  return humanizeDuration(end - start);\n};\n\nconst paramFormat = /^g\\d+\\..+=.+$/;\n\nexport const decodePanelOptionsFromQueryString = (query: string): PanelMeta[] => {\n  if (query === '') {\n    return [];\n  }\n  const urlParams = query.substring(1).split('&');\n\n  return urlParams.reduce<PanelMeta[]>((panels, urlParam, i) => {\n    const panelsCount = panels.length;\n    const prefix = `g${panelsCount}.`;\n    if (urlParam.startsWith(`${prefix}expr=`)) {\n      const prefixLen = prefix.length;\n      return [\n        ...panels,\n        {\n          id: generateID(),\n          key: `${panelsCount}`,\n          options: urlParams.slice(i).reduce((opts, param) => {\n            return param.startsWith(prefix) && paramFormat.test(param)\n              ? { ...opts, ...parseOption(param.substring(prefixLen)) }\n              : opts;\n          }, PanelDefaultOptions),\n        },\n      ];\n    }\n    return panels;\n  }, []);\n};\n\nexport const parseOption = (param: string): Partial<PanelOptions> => {\n  const [opt, val] = param.split('=');\n  const decodedValue = decodeURIComponent(val.replace(/\\+/g, ' '));\n  switch (opt) {\n    case 'expr':\n      return { expr: decodedValue };\n\n    case 'tab':\n      return { type: decodedValue === '0' ? PanelType.Graph : PanelType.Table };\n\n    case 'stacked':\n      return { stacked: decodedValue === '1' };\n\n    case 'range_input':\n      const range = parseRange(decodedValue);\n      return isPresent(range) ? { range } : {};\n\n    case 'end_input':\n    case 'moment_input':\n      return { endTime: parseTime(decodedValue) };\n\n    case 'step_input':\n      const resolution = parseInt(decodedValue);\n      return resolution > 0 ? { resolution } : {};\n  }\n  return {};\n};\n\nexport const formatParam = (key: string) => (paramName: string, value: number | string | boolean) => {\n  return `g${key}.${paramName}=${encodeURIComponent(value)}`;\n};\n\nexport const toQueryString = ({ key, options }: PanelMeta) => {\n  const formatWithKey = formatParam(key);\n  const { expr, type, stacked, range, endTime, resolution } = options;\n  const time = isPresent(endTime) ? formatTime(endTime) : false;\n  const urlParams = [\n    formatWithKey('expr', expr),\n    formatWithKey('tab', type === PanelType.Graph ? 0 : 1),\n    formatWithKey('stacked', stacked ? 1 : 0),\n    formatWithKey('range_input', formatRange(range)),\n    time ? `${formatWithKey('end_input', time)}&${formatWithKey('moment_input', time)}` : '',\n    isPresent(resolution) ? formatWithKey('step_input', resolution) : '',\n  ];\n  return urlParams.filter(byEmptyString).join('&');\n};\n\nexport const encodePanelOptionsToQueryString = (panels: PanelMeta[]) => {\n  return `?${panels.map(toQueryString).join('&')}`;\n};\n\nexport const createExpressionLink = (expr: string) => {\n  return `../graph?g0.expr=${encodeURIComponent(expr)}&g0.tab=1&g0.stacked=0&g0.range_input=1h`;\n};\nexport const mapObjEntries = <T, key extends keyof T, Z>(\n  o: T,\n  cb: ([k, v]: [string, T[key]], i: number, arr: [string, T[key]][]) => Z\n) => Object.entries(o).map(cb);\n\nexport const callAll = (...fns: Array<(...args: any) => void>) => (...args: any) => {\n  // eslint-disable-next-line prefer-spread\n  fns.filter(Boolean).forEach(fn => fn.apply(null, args));\n};\n","import React, { FC, useState, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { Alert, Collapse, Table, Badge } from 'reactstrap';\nimport { RuleStatus } from './AlertContents';\nimport { Rule } from '../../types/types';\nimport { faChevronDown, faChevronRight } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { createExpressionLink } from '../../utils/index';\n\ninterface CollapsibleAlertPanelProps {\n  rule: Rule;\n  showAnnotations: boolean;\n}\n\nconst alertColors: RuleStatus<string> = {\n  firing: 'danger',\n  pending: 'warning',\n  inactive: 'success',\n};\n\nconst CollapsibleAlertPanel: FC<CollapsibleAlertPanelProps> = ({ rule, showAnnotations }) => {\n  const [open, toggle] = useState(false);\n\n  return (\n    <>\n      <Alert fade={false} onClick={() => toggle(!open)} color={alertColors[rule.state]} style={{ cursor: 'pointer' }}>\n        <FontAwesomeIcon icon={open ? faChevronDown : faChevronRight} fixedWidth />\n        <strong>{rule.name}</strong> ({`${rule.alerts.length} active`})\n      </Alert>\n      <Collapse isOpen={open} className=\"mb-2\">\n        <pre style={{ background: '#f5f5f5', padding: 15 }}>\n          <code>\n            <div>\n              name: <Link to={createExpressionLink(`ALERTS{alertname=\"${rule.name}\"}`)}>{rule.name}</Link>\n            </div>\n            <div>\n              expr: <Link to={createExpressionLink(rule.query)}>{rule.query}</Link>\n            </div>\n            <div>\n              <div>labels:</div>\n              <div className=\"ml-5\">severity: {rule.labels.severity}</div>\n            </div>\n            <div>\n              <div>annotations:</div>\n              <div className=\"ml-5\">summary: {rule.annotations.summary}</div>\n            </div>\n          </code>\n        </pre>\n        {rule.alerts.length > 0 && (\n          <Table bordered size=\"sm\">\n            <thead>\n              <tr>\n                <th>Labels</th>\n                <th>State</th>\n                <th>Active Since</th>\n                <th>Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              {rule.alerts.map((alert, i) => {\n                return (\n                  <Fragment key={i}>\n                    <tr>\n                      <td style={{ verticalAlign: 'middle' }}>\n                        {Object.entries(alert.labels).map(([k, v], j) => {\n                          return (\n                            <Badge key={j} color=\"primary\" className=\"mr-1\">\n                              {k}={v}\n                            </Badge>\n                          );\n                        })}\n                      </td>\n                      <td>\n                        <h5 className=\"m-0\">\n                          <Badge color={alertColors[alert.state] + ' text-uppercase'} className=\"px-3\">\n                            {alert.state}\n                          </Badge>\n                        </h5>\n                      </td>\n                      <td>{alert.activeAt}</td>\n                      <td>{alert.value}</td>\n                    </tr>\n                    {showAnnotations && <Annotations annotations={alert.annotations} />}\n                  </Fragment>\n                );\n              })}\n            </tbody>\n          </Table>\n        )}\n      </Collapse>\n    </>\n  );\n};\n\ninterface AnnotationsProps {\n  annotations: Record<string, string>;\n}\n\nexport const Annotations: FC<AnnotationsProps> = ({ annotations }) => {\n  return (\n    <Fragment>\n      <tr>\n        <td colSpan={4}>\n          <h5 className=\"font-weight-bold\">Annotations</h5>\n        </td>\n      </tr>\n      <tr>\n        <td colSpan={4}>\n          {Object.entries(annotations).map(([k, v], i) => {\n            return (\n              <div key={i}>\n                <strong>{k}</strong>\n                <div>{v}</div>\n              </div>\n            );\n          })}\n        </td>\n      </tr>\n    </Fragment>\n  );\n};\n\nexport default CollapsibleAlertPanel;\n","import React, { FC, memo, CSSProperties } from 'react';\nimport { FormGroup, Label, Input, InputProps } from 'reactstrap';\n\ninterface CheckboxProps extends InputProps {\n  wrapperStyles?: CSSProperties;\n}\n\nconst Checkbox: FC<CheckboxProps> = ({ children, wrapperStyles, id, ...rest }) => {\n  return (\n    <FormGroup className=\"custom-control custom-checkbox\" style={wrapperStyles}>\n      <Input {...rest} id={id} type=\"checkbox\" className=\"custom-control-input\" />\n      <Label style={{ userSelect: 'none' }} className=\"custom-control-label\" for={id}>\n        {children}\n      </Label>\n    </FormGroup>\n  );\n};\n\nexport default memo(Checkbox);\n","import React, { FC, useState, Fragment } from 'react';\nimport { Badge } from 'reactstrap';\nimport CollapsibleAlertPanel from './CollapsibleAlertPanel';\nimport Checkbox from '../../components/Checkbox';\nimport { isPresent } from '../../utils';\nimport { Rule } from '../../types/types';\n\nexport type RuleState = keyof RuleStatus<any>;\n\nexport interface RuleStatus<T> {\n  firing: T;\n  pending: T;\n  inactive: T;\n}\n\nexport interface AlertsProps {\n  groups?: RuleGroup[];\n  statsCount: RuleStatus<number>;\n}\n\nexport interface Alert {\n  labels: Record<string, string>;\n  state: RuleState;\n  value: string;\n  annotations: Record<string, string>;\n  activeAt: string;\n}\n\ninterface RuleGroup {\n  name: string;\n  file: string;\n  rules: Rule[];\n  interval: number;\n}\n\nconst stateColorTuples: Array<[RuleState, 'success' | 'warning' | 'danger']> = [\n  ['inactive', 'success'],\n  ['pending', 'warning'],\n  ['firing', 'danger'],\n];\n\nconst AlertsContent: FC<AlertsProps> = ({ groups = [], statsCount }) => {\n  const [filter, setFilter] = useState<RuleStatus<boolean>>({\n    firing: true,\n    pending: true,\n    inactive: true,\n  });\n  const [showAnnotations, setShowAnnotations] = useState(false);\n\n  const toggleFilter = (ruleState: RuleState) => () => {\n    setFilter({\n      ...filter,\n      [ruleState]: !filter[ruleState],\n    });\n  };\n\n  return (\n    <>\n      <div className=\"d-flex togglers-wrapper\">\n        {stateColorTuples.map(([state, color]) => {\n          return (\n            <Checkbox\n              key={state}\n              wrapperStyles={{ marginRight: 10 }}\n              defaultChecked\n              id={`${state}-toggler`}\n              onClick={toggleFilter(state)}\n            >\n              <Badge color={color} className=\"text-capitalize\">\n                {state} ({statsCount[state]})\n              </Badge>\n            </Checkbox>\n          );\n        })}\n        <Checkbox\n          wrapperStyles={{ marginLeft: 'auto' }}\n          id=\"show-annotations-toggler\"\n          onClick={() => setShowAnnotations(!showAnnotations)}\n        >\n          <span style={{ fontSize: '0.9rem', lineHeight: 1.9 }}>Show annotations</span>\n        </Checkbox>\n      </div>\n      {groups.map((group, i) => {\n        const hasFilterOn = group.rules.some(rule => filter[rule.state]);\n        return hasFilterOn ? (\n          <Fragment key={i}>\n            <GroupInfo rules={group.rules}>\n              {group.file} > {group.name}\n            </GroupInfo>\n            {group.rules.map((rule, j) => {\n              return (\n                filter[rule.state] && (\n                  <CollapsibleAlertPanel key={rule.name + j} showAnnotations={showAnnotations} rule={rule} />\n                )\n              );\n            })}\n          </Fragment>\n        ) : null;\n      })}\n    </>\n  );\n};\n\ninterface GroupInfoProps {\n  rules: Rule[];\n}\n\nexport const GroupInfo: FC<GroupInfoProps> = ({ rules, children }) => {\n  const statesCounter = rules.reduce<any>(\n    (acc, r) => {\n      return {\n        ...acc,\n        [r.state]: acc[r.state] + r.alerts.length,\n      };\n    },\n    {\n      firing: 0,\n      pending: 0,\n    }\n  );\n\n  return (\n    <div className=\"group-info border rounded-sm\" style={{ lineHeight: 1.1 }}>\n      {children}\n      <div className=\"badges-wrapper\">\n        {isPresent(statesCounter.inactive) && <Badge color=\"success\">inactive</Badge>}\n        {statesCounter.pending > 0 && <Badge color=\"warning\">pending ({statesCounter.pending})</Badge>}\n        {statesCounter.firing > 0 && <Badge color=\"danger\">firing ({statesCounter.firing})</Badge>}\n      </div>\n    </div>\n  );\n};\n\nAlertsContent.displayName = 'Alerts';\n\nexport default AlertsContent;\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { useFetch } from '../../hooks/useFetch';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\nimport AlertsContent, { RuleStatus, AlertsProps } from './AlertContents';\n\nconst AlertsWithStatusIndicator = withStatusIndicator(AlertsContent);\n\nconst Alerts: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix = '' }) => {\n  const { response, error, isLoading } = useFetch<AlertsProps>(`${pathPrefix}/api/v1/rules?type=alert`);\n\n  const ruleStatsCount: RuleStatus<number> = {\n    inactive: 0,\n    pending: 0,\n    firing: 0,\n  };\n\n  if (response.data && response.data.groups) {\n    response.data.groups.forEach(el => el.rules.forEach(r => ruleStatsCount[r.state]++));\n  }\n\n  return <AlertsWithStatusIndicator statsCount={ruleStatsCount} {...response.data} error={error} isLoading={isLoading} />;\n};\n\nexport default Alerts;\n","import React, { useState, FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { Button } from 'reactstrap';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport PathPrefixProps from '../../types/PathPrefixProps';\n\nimport './Config.css';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\nimport { useFetch } from '../../hooks/useFetch';\n\ntype YamlConfig = { yaml?: string };\n\ninterface ConfigContentProps {\n  error?: Error;\n  data?: YamlConfig;\n}\n\nconst YamlContent = ({ yaml }: YamlConfig) => <pre className=\"config-yaml\">{yaml}</pre>;\nYamlContent.displayName = 'Config';\n\nconst ConfigWithStatusIndicator = withStatusIndicator(YamlContent);\n\nexport const ConfigContent: FC<ConfigContentProps> = ({ error, data }) => {\n  const [copied, setCopied] = useState(false);\n  const config = data && data.yaml;\n  return (\n    <>\n      <h2>\n        Configuration&nbsp;\n        <CopyToClipboard\n          text={config!}\n          onCopy={(_, result) => {\n            setCopied(result);\n            setTimeout(setCopied, 1500);\n          }}\n        >\n          <Button color=\"light\" disabled={!config}>\n            {copied ? 'Copied' : 'Copy to clipboard'}\n          </Button>\n        </CopyToClipboard>\n      </h2>\n      <ConfigWithStatusIndicator error={error} isLoading={!config} yaml={config} />\n    </>\n  );\n};\n\nconst Config: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix }) => {\n  const { response, error } = useFetch<YamlConfig>(`${pathPrefix}/api/v1/status/config`);\n  return <ConfigContent error={error} data={response.data} />;\n};\n\nexport default Config;\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { Table } from 'reactstrap';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\nimport { useFetch } from '../../hooks/useFetch';\nimport PathPrefixProps from '../../types/PathPrefixProps';\n\ninterface FlagMap {\n  [key: string]: string;\n}\n\ninterface FlagsProps {\n  data?: FlagMap;\n}\n\nexport const FlagsContent: FC<FlagsProps> = ({ data = {} }) => {\n  return (\n    <>\n      <h2>Command-Line Flags</h2>\n      <Table bordered size=\"sm\" striped>\n        <tbody>\n          {Object.keys(data).map(key => (\n            <tr key={key}>\n              <th>{key}</th>\n              <td>{data[key]}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </>\n  );\n};\nconst FlagsWithStatusIndicator = withStatusIndicator(FlagsContent);\n\nFlagsContent.displayName = 'Flags';\n\nconst Flags: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix = '' }) => {\n  const { response, error, isLoading } = useFetch<FlagMap>(`${pathPrefix}/api/v1/status/flags`);\n  return <FlagsWithStatusIndicator data={response.data} error={error} isLoading={isLoading} />;\n};\n\nexport default Flags;\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { APIResponse } from '../../hooks/useFetch';\nimport { Alert, Table, Badge } from 'reactstrap';\nimport { Link } from '@reach/router';\nimport { formatRelative, createExpressionLink, humanizeDuration } from '../../utils';\nimport { Rule } from '../../types/types';\nimport { now } from 'moment';\n\ninterface RulesContentProps {\n  response: APIResponse<RulesMap>;\n}\n\ninterface RuleGroup {\n  name: string;\n  file: string;\n  rules: Rule[];\n  evaluationTime: string;\n  lastEvaluation: string;\n}\n\nexport interface RulesMap {\n  groups: RuleGroup[];\n}\n\nconst GraphExpressionLink: FC<{ expr: string; title: string }> = props => {\n  return (\n    <>\n      <strong>{props.title}:</strong>\n      <Link className=\"ml-4\" to={createExpressionLink(props.expr)}>\n        {props.expr}\n      </Link>\n      <br />\n    </>\n  );\n};\n\nexport const RulesContent: FC<RouteComponentProps & RulesContentProps> = ({ response }) => {\n  const getBadgeColor = (state: string) => {\n    switch (state) {\n      case 'ok':\n        return 'success';\n\n      case 'err':\n        return 'danger';\n\n      case 'unknown':\n        return 'warning';\n    }\n  };\n\n  if (response.data) {\n    const groups: RuleGroup[] = response.data.groups;\n    return (\n      <>\n        <h2>Rules</h2>\n        {groups.map((g, i) => {\n          return (\n            <Table bordered key={i}>\n              <thead>\n                <tr>\n                  <td colSpan={3}>\n                    <a href={'#' + g.name}>\n                      <h2 id={g.name}>{g.name}</h2>\n                    </a>\n                  </td>\n                  <td>\n                    <h2>{formatRelative(g.lastEvaluation, now())} ago</h2>\n                  </td>\n                  <td>\n                    <h2>{humanizeDuration(parseFloat(g.evaluationTime) * 1000)}</h2>\n                  </td>\n                </tr>\n              </thead>\n              <tbody>\n                <tr className=\"font-weight-bold\">\n                  <td>Rule</td>\n                  <td>State</td>\n                  <td>Error</td>\n                  <td>Last Evaluation</td>\n                  <td>Evaluation Time</td>\n                </tr>\n                {g.rules.map((r, i) => {\n                  return (\n                    <tr key={i}>\n                      {r.alerts ? (\n                        <td style={{ backgroundColor: '#F5F5F5' }} className=\"rule_cell\">\n                          <GraphExpressionLink title=\"alert\" expr={r.name} />\n                          <GraphExpressionLink title=\"expr\" expr={r.query} />\n                          <div>\n                            <strong>labels:</strong>\n                            {Object.entries(r.labels).map(([key, value]) => (\n                              <div className=\"ml-4\" key={key}>\n                                {key}: {value}\n                              </div>\n                            ))}\n                          </div>\n                          <div>\n                            <strong>annotations:</strong>\n                            {Object.entries(r.annotations).map(([key, value]) => (\n                              <div className=\"ml-4\" key={key}>\n                                {key}: {value}\n                              </div>\n                            ))}\n                          </div>\n                        </td>\n                      ) : (\n                        <td style={{ backgroundColor: '#F5F5F5' }}>\n                          <GraphExpressionLink title=\"record\" expr={r.name} />\n                          <GraphExpressionLink title=\"expr\" expr={r.query} />\n                        </td>\n                      )}\n                      <td>\n                        <Badge color={getBadgeColor(r.health)}>{r.health.toUpperCase()}</Badge>\n                      </td>\n                      <td>{r.lastError ? <Alert color=\"danger\">{r.lastError}</Alert> : null}</td>\n                      <td>{formatRelative(r.lastEvaluation, now())} ago</td>\n                      <td>{humanizeDuration(parseFloat(r.evaluationTime) * 1000)}</td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </Table>\n          );\n        })}\n      </>\n    );\n  }\n\n  return null;\n};\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { useFetch } from '../../hooks/useFetch';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\nimport { RulesMap, RulesContent } from './RulesContent';\n\nconst RulesWithStatusIndicator = withStatusIndicator(RulesContent);\n\nconst Rules: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix }) => {\n  const { response, error, isLoading } = useFetch<RulesMap>(`${pathPrefix}/api/v1/rules`);\n\n  return <RulesWithStatusIndicator response={response} error={error} isLoading={isLoading} />;\n};\n\nexport default Rules;\n","import React, { FC } from 'react';\nimport { Button } from 'reactstrap';\n\ninterface ToggleMoreLessProps {\n  event(): void;\n  showMore: boolean;\n}\n\nexport const ToggleMoreLess: FC<ToggleMoreLessProps> = ({ children, event, showMore }) => {\n  return (\n    <h3>\n      {children}\n      <Button\n        size=\"xs\"\n        onClick={event}\n        style={{\n          padding: '0.3em 0.3em 0.25em 0.3em',\n          fontSize: '0.375em',\n          marginLeft: '1em',\n          verticalAlign: 'baseline',\n        }}\n        color=\"primary\"\n      >\n        show {showMore ? 'less' : 'more'}\n      </Button>\n    </h3>\n  );\n};\n","import React, { FC, useState } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { Badge, Table } from 'reactstrap';\nimport { TargetLabels } from './Services';\nimport { ToggleMoreLess } from '../../components/ToggleMoreLess';\n\ninterface LabelProps {\n  value: TargetLabels[];\n  name: string;\n}\n\nconst formatLabels = (labels: Record<string, string> | string) => {\n  return Object.entries(labels).map(([key, value]) => {\n    return (\n      <div key={key}>\n        <Badge color=\"primary\" className=\"mr-1\">\n          {`${key}=\"${value}\"`}\n        </Badge>\n      </div>\n    );\n  });\n};\n\nexport const LabelsTable: FC<RouteComponentProps & LabelProps> = ({ value, name }) => {\n  const [showMore, setShowMore] = useState(false);\n\n  return (\n    <>\n      <div>\n        <ToggleMoreLess\n          event={(): void => {\n            setShowMore(!showMore);\n          }}\n          showMore={showMore}\n        >\n          <span className=\"target-head\">{name}</span>\n        </ToggleMoreLess>\n      </div>\n      {showMore ? (\n        <Table size=\"sm\" bordered hover striped>\n          <thead>\n            <tr>\n              <th>Discovered Labels</th>\n              <th>Target Labels</th>\n            </tr>\n          </thead>\n          <tbody>\n            {value.map((_, i) => {\n              return (\n                <tr key={i}>\n                  <td>{formatLabels(value[i].discoveredLabels)}</td>\n                  {value[i].isDropped ? (\n                    <td style={{ fontWeight: 'bold' }}>Dropped</td>\n                  ) : (\n                    <td>{formatLabels(value[i].labels)}</td>\n                  )}\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n      ) : null}\n    </>\n  );\n};\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { useFetch } from '../../hooks/useFetch';\nimport { LabelsTable } from './LabelsTable';\nimport { Target, Labels, DroppedTarget } from '../targets/target';\n\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\nimport { mapObjEntries } from '../../utils';\n\ninterface ServiceMap {\n  activeTargets: Target[];\n  droppedTargets: DroppedTarget[];\n}\n\nexport interface TargetLabels {\n  discoveredLabels: Labels;\n  labels: Labels;\n  isDropped: boolean;\n}\n\nexport const processSummary = (activeTargets: Target[], droppedTargets: DroppedTarget[]) => {\n  const targets: Record<string, { active: number; total: number }> = {};\n\n  // Get targets of each type along with the total and active end points\n  for (const target of activeTargets) {\n    const { scrapePool: name } = target;\n    if (!targets[name]) {\n      targets[name] = {\n        total: 0,\n        active: 0,\n      };\n    }\n    targets[name].total++;\n    targets[name].active++;\n  }\n  for (const target of droppedTargets) {\n    const { job: name } = target.discoveredLabels;\n    if (!targets[name]) {\n      targets[name] = {\n        total: 0,\n        active: 0,\n      };\n    }\n    targets[name].total++;\n  }\n\n  return targets;\n};\n\nexport const processTargets = (activeTargets: Target[], droppedTargets: DroppedTarget[]) => {\n  const labels: Record<string, TargetLabels[]> = {};\n\n  for (const target of activeTargets) {\n    const name = target.scrapePool;\n    if (!labels[name]) {\n      labels[name] = [];\n    }\n    labels[name].push({\n      discoveredLabels: target.discoveredLabels,\n      labels: target.labels,\n      isDropped: false,\n    });\n  }\n\n  for (const target of droppedTargets) {\n    const { job: name } = target.discoveredLabels;\n    if (!labels[name]) {\n      labels[name] = [];\n    }\n    labels[name].push({\n      discoveredLabels: target.discoveredLabels,\n      isDropped: true,\n      labels: {},\n    });\n  }\n\n  return labels;\n};\n\nexport const ServiceDiscoveryContent: FC<ServiceMap> = ({ activeTargets, droppedTargets }) => {\n  const targets = processSummary(activeTargets, droppedTargets);\n  const labels = processTargets(activeTargets, droppedTargets);\n\n  return (\n    <>\n      <h2>Service Discovery</h2>\n      <ul>\n        {mapObjEntries(targets, ([k, v]) => (\n          <li key={k}>\n            <a href={'#' + k}>\n              {k} ({v.active} / {v.total} active targets)\n            </a>\n          </li>\n        ))}\n      </ul>\n      <hr />\n      {mapObjEntries(labels, ([k, v]) => {\n        return <LabelsTable value={v} name={k} key={k} />;\n      })}\n    </>\n  );\n};\nServiceDiscoveryContent.displayName = 'ServiceDiscoveryContent';\n\nconst ServicesWithStatusIndicator = withStatusIndicator(ServiceDiscoveryContent);\n\nconst ServiceDiscovery: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix }) => {\n  const { response, error, isLoading } = useFetch<ServiceMap>(`${pathPrefix}/api/v1/targets`);\n  return (\n    <ServicesWithStatusIndicator\n      {...response.data}\n      error={error}\n      isLoading={isLoading}\n      componentTitle=\"Service Discovery information\"\n    />\n  );\n};\n\nexport default ServiceDiscovery;\n","import React, { Fragment, FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { Table } from 'reactstrap';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\nimport { useFetch } from '../../hooks/useFetch';\nimport PathPrefixProps from '../../types/PathPrefixProps';\n\ninterface StatusPageProps {\n  data: Record<string, string>;\n  title: string;\n}\n\nexport const statusConfig: Record<\n  string,\n  { title?: string; customizeValue?: (v: any, key: string) => any; customRow?: boolean; skip?: boolean }\n> = {\n  startTime: { title: 'Start time', customizeValue: (v: string) => new Date(v).toUTCString() },\n  CWD: { title: 'Working directory' },\n  reloadConfigSuccess: {\n    title: 'Configuration reload',\n    customizeValue: (v: boolean) => (v ? 'Successful' : 'Unsuccessful'),\n  },\n  lastConfigTime: { title: 'Last successful configuration reload' },\n  chunkCount: { title: 'Head chunks' },\n  timeSeriesCount: { title: 'Head time series' },\n  corruptionCount: { title: 'WAL corruptions' },\n  goroutineCount: { title: 'Goroutines' },\n  storageRetention: { title: 'Storage retention' },\n  activeAlertmanagers: {\n    customRow: true,\n    customizeValue: (alertMgrs: { url: string }[], key) => {\n      return (\n        <Fragment key={key}>\n          <tr>\n            <th>Endpoint</th>\n          </tr>\n          {alertMgrs.map(({ url }) => {\n            const { origin, pathname } = new URL(url);\n            return (\n              <tr key={url}>\n                <td>\n                  <a href={url}>{origin}</a>\n                  {pathname}\n                </td>\n              </tr>\n            );\n          })}\n        </Fragment>\n      );\n    },\n  },\n  droppedAlertmanagers: { skip: true },\n};\n\nexport const StatusContent: FC<StatusPageProps> = ({ data, title }) => {\n  return (\n    <>\n      <h2>{title}</h2>\n      <Table className=\"h-auto\" size=\"sm\" bordered striped>\n        <tbody>\n          {Object.entries(data).map(([k, v]) => {\n            const { title = k, customizeValue = (val: any) => val, customRow, skip } = statusConfig[k] || {};\n            if (skip) {\n              return null;\n            }\n            if (customRow) {\n              return customizeValue(v, k);\n            }\n            return (\n              <tr key={k}>\n                <th className=\"capitalize-title\" style={{ width: '35%' }}>\n                  {title}\n                </th>\n                <td className=\"text-break\">{customizeValue(v, title)}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n    </>\n  );\n};\nconst StatusWithStatusIndicator = withStatusIndicator(StatusContent);\n\nStatusContent.displayName = 'Status';\n\nconst Status: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix = '' }) => {\n  const path = `${pathPrefix}/api/v1`;\n\n  return (\n    <>\n      {[\n        { fetchResult: useFetch<Record<string, string>>(`${path}/status/runtimeinfo`), title: 'Runtime Information' },\n        { fetchResult: useFetch<Record<string, string>>(`${path}/status/buildinfo`), title: 'Build Information' },\n        { fetchResult: useFetch<Record<string, string>>(`${path}/alertmanagers`), title: 'Alertmanagers' },\n      ].map(({ fetchResult, title }) => {\n        const { response, isLoading, error } = fetchResult;\n        return (\n          <StatusWithStatusIndicator\n            data={response.data}\n            title={title}\n            isLoading={isLoading}\n            error={error}\n            componentTitle={title}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport default Status;\n","import React, { Dispatch, FC, SetStateAction } from 'react';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport styles from './Filter.module.css';\n\nexport interface FilterData {\n  showHealthy: boolean;\n  showUnhealthy: boolean;\n}\n\nexport interface FilterProps {\n  filter: FilterData;\n  setFilter: Dispatch<SetStateAction<FilterData>>;\n}\n\nconst Filter: FC<FilterProps> = ({ filter, setFilter }) => {\n  const { showHealthy } = filter;\n  const btnProps = {\n    all: {\n      active: showHealthy,\n      className: `all ${styles.btn}`,\n      color: 'primary',\n      onClick: (): void => setFilter({ ...filter, showHealthy: true }),\n    },\n    unhealthy: {\n      active: !showHealthy,\n      className: `unhealthy ${styles.btn}`,\n      color: 'primary',\n      onClick: (): void => setFilter({ ...filter, showHealthy: false }),\n    },\n  };\n  return (\n    <ButtonGroup>\n      <Button {...btnProps.all}>All</Button>\n      <Button {...btnProps.unhealthy}>Unhealthy</Button>\n    </ButtonGroup>\n  );\n};\n\nexport default Filter;\n","import React, { FC } from 'react';\nimport { Badge, Alert } from 'reactstrap';\n\nexport interface EndpointLinkProps {\n  endpoint: string;\n  globalUrl: string;\n}\n\nconst EndpointLink: FC<EndpointLinkProps> = ({ endpoint, globalUrl }) => {\n  let url: URL;\n  try {\n    url = new URL(endpoint);\n  } catch (e) {\n    return (\n      <Alert color=\"danger\">\n        <strong>Error:</strong> {e.message}\n      </Alert>\n    );\n  }\n\n  const { host, pathname, protocol, searchParams }: URL = url;\n  const params = Array.from(searchParams.entries());\n\n  return (\n    <>\n      <a href={globalUrl}>{`${protocol}//${host}${pathname}`}</a>\n      {params.length > 0 ? <br /> : null}\n      {params.map(([labelName, labelValue]: [string, string]) => {\n        return (\n          <Badge color=\"primary\" className={`mr-1 ${labelName}`} key={labelName}>\n            {`${labelName}=\"${labelValue}\"`}\n          </Badge>\n        );\n      })}\n    </>\n  );\n};\n\nexport default EndpointLink;\n","import React, { FC, Fragment, useState } from 'react';\nimport { Badge, Tooltip } from 'reactstrap';\nimport 'css.escape';\nimport styles from './TargetLabels.module.css';\n\ninterface Labels {\n  [key: string]: string;\n}\n\nexport interface TargetLabelsProps {\n  discoveredLabels: Labels;\n  labels: Labels;\n  idx: number;\n  scrapePool: string;\n}\n\nconst formatLabels = (labels: Labels): string[] => Object.keys(labels).map(key => `${key}=\"${labels[key]}\"`);\n\nconst TargetLabels: FC<TargetLabelsProps> = ({ discoveredLabels, labels, idx, scrapePool }) => {\n  const [tooltipOpen, setTooltipOpen] = useState(false);\n\n  const toggle = (): void => setTooltipOpen(!tooltipOpen);\n  const id = `series-labels-${scrapePool}-${idx}`;\n\n  return (\n    <>\n      <div id={id} className=\"series-labels-container\">\n        {Object.keys(labels).map(labelName => {\n          return (\n            <Badge color=\"primary\" className={`mr-1 ${labelName}`} key={labelName}>\n              {`${labelName}=\"${labels[labelName]}\"`}\n            </Badge>\n          );\n        })}\n      </div>\n      <Tooltip isOpen={tooltipOpen} target={CSS.escape(id)} toggle={toggle} style={{ maxWidth: 'none', textAlign: 'left' }}>\n        <b>Before relabeling:</b>\n        {formatLabels(discoveredLabels).map((s: string, idx: number) => (\n          <Fragment key={idx}>\n            <br />\n            <span className={styles.discovered}>{s}</span>\n          </Fragment>\n        ))}\n      </Tooltip>\n    </>\n  );\n};\n\nexport default TargetLabels;\n","import { Dispatch, SetStateAction, useEffect, useState } from 'react';\n\nexport function useLocalStorage<S>(localStorageKey: string, initialState: S): [S, Dispatch<SetStateAction<S>>] {\n  const localStorageState = JSON.parse(localStorage.getItem(localStorageKey) || JSON.stringify(initialState));\n  const [value, setValue] = useState(localStorageState);\n\n  useEffect(() => {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(localStorageKey, serializedState);\n  }, [localStorageKey, value]);\n\n  return [value, setValue];\n}\n","import React, { FC } from 'react';\nimport { ScrapePool, getColor } from './target';\nimport { Collapse, Table, Badge } from 'reactstrap';\nimport styles from './ScrapePoolPanel.module.css';\nimport { Target } from './target';\nimport EndpointLink from './EndpointLink';\nimport TargetLabels from './TargetLabels';\nimport { now } from 'moment';\nimport { useLocalStorage } from '../../hooks/useLocalStorage';\nimport { ToggleMoreLess } from '../../components/ToggleMoreLess';\nimport { formatRelative, humanizeDuration } from '../../utils';\n\ninterface PanelProps {\n  scrapePool: string;\n  targetGroup: ScrapePool;\n}\n\nexport const columns = ['Endpoint', 'State', 'Labels', 'Last Scrape', 'Scrape Duration', 'Error'];\n\nconst ScrapePoolPanel: FC<PanelProps> = ({ scrapePool, targetGroup }) => {\n  const [{ expanded }, setOptions] = useLocalStorage(`targets-${scrapePool}-expanded`, { expanded: true });\n  const modifier = targetGroup.upCount < targetGroup.targets.length ? 'danger' : 'normal';\n  const id = `pool-${scrapePool}`;\n  const anchorProps = {\n    href: `#${id}`,\n    id,\n  };\n\n  return (\n    <div className={styles.container}>\n      <ToggleMoreLess event={(): void => setOptions({ expanded: !expanded })} showMore={expanded}>\n        <a className={styles[modifier]} {...anchorProps}>\n          {`${scrapePool} (${targetGroup.upCount}/${targetGroup.targets.length} up)`}\n        </a>\n      </ToggleMoreLess>\n      <Collapse isOpen={expanded}>\n        <Table className={styles.table} size=\"sm\" bordered hover striped>\n          <thead>\n            <tr key=\"header\">\n              {columns.map(column => (\n                <th key={column}>{column}</th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {targetGroup.targets.map((target: Target, idx: number) => {\n              const {\n                discoveredLabels,\n                labels,\n                scrapePool,\n                scrapeUrl,\n                globalUrl,\n                lastError,\n                lastScrape,\n                lastScrapeDuration,\n                health,\n              } = target;\n              const color = getColor(health);\n\n              return (\n                <tr key={scrapeUrl}>\n                  <td className={styles.endpoint}>\n                    <EndpointLink endpoint={scrapeUrl} globalUrl={globalUrl} />\n                  </td>\n                  <td className={styles.state}>\n                    <Badge color={color}>{health.toUpperCase()}</Badge>\n                  </td>\n                  <td className={styles.labels}>\n                    <TargetLabels discoveredLabels={discoveredLabels} labels={labels} scrapePool={scrapePool} idx={idx} />\n                  </td>\n                  <td className={styles['last-scrape']}>{formatRelative(lastScrape, now())}</td>\n                  <td className={styles['scrape-duration']}>{humanizeDuration(lastScrapeDuration * 1000)}</td>\n                  <td className={styles.errors}>{lastError ? <Badge color={color}>{lastError}</Badge> : null}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n      </Collapse>\n    </div>\n  );\n};\n\nexport default ScrapePoolPanel;\n","export interface Labels {\n  [key: string]: string;\n}\n\nexport interface Target {\n  discoveredLabels: Labels;\n  labels: Labels;\n  scrapePool: string;\n  scrapeUrl: string;\n  globalUrl: string;\n  lastError: string;\n  lastScrape: string;\n  lastScrapeDuration: number;\n  health: string;\n}\n\nexport interface DroppedTarget {\n  discoveredLabels: Labels;\n}\n\nexport interface ScrapePool {\n  upCount: number;\n  targets: Target[];\n}\n\nexport interface ScrapePools {\n  [scrapePool: string]: ScrapePool;\n}\n\nexport const groupTargets = (targets: Target[]): ScrapePools =>\n  targets.reduce((pools: ScrapePools, target: Target) => {\n    const { health, scrapePool } = target;\n    const up = health.toLowerCase() === 'up' ? 1 : 0;\n    if (!pools[scrapePool]) {\n      pools[scrapePool] = {\n        upCount: 0,\n        targets: [],\n      };\n    }\n    pools[scrapePool].targets.push(target);\n    pools[scrapePool].upCount += up;\n    return pools;\n  }, {});\n\nexport const getColor = (health: string): string => {\n  switch (health.toLowerCase()) {\n    case 'up':\n      return 'success';\n    case 'down':\n      return 'danger';\n    default:\n      return 'warning';\n  }\n};\n","import React, { FC } from 'react';\nimport { FilterData } from './Filter';\nimport { useFetch } from '../../hooks/useFetch';\nimport { groupTargets, Target } from './target';\nimport ScrapePoolPanel from './ScrapePoolPanel';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\n\ninterface ScrapePoolListProps {\n  filter: FilterData;\n  activeTargets: Target[];\n}\n\nexport const ScrapePoolContent: FC<ScrapePoolListProps> = ({ filter, activeTargets }) => {\n  const targetGroups = groupTargets(activeTargets);\n  const { showHealthy, showUnhealthy } = filter;\n  return (\n    <>\n      {Object.keys(targetGroups).reduce<JSX.Element[]>((panels, scrapePool) => {\n        const targetGroup = targetGroups[scrapePool];\n        const isHealthy = targetGroup.upCount === targetGroup.targets.length;\n        return (isHealthy && showHealthy) || (!isHealthy && showUnhealthy)\n          ? [...panels, <ScrapePoolPanel key={scrapePool} scrapePool={scrapePool} targetGroup={targetGroup} />]\n          : panels;\n      }, [])}\n    </>\n  );\n};\nScrapePoolContent.displayName = 'ScrapePoolContent';\n\nconst ScrapePoolListWithStatusIndicator = withStatusIndicator(ScrapePoolContent);\n\nconst ScrapePoolList: FC<{ filter: FilterData } & PathPrefixProps> = ({ pathPrefix, filter }) => {\n  const { response, error, isLoading } = useFetch<ScrapePoolListProps>(`${pathPrefix}/api/v1/targets?state=active`);\n  const { status: responseStatus } = response;\n  const badResponse = responseStatus !== 'success' && responseStatus !== 'start fetching';\n  return (\n    <ScrapePoolListWithStatusIndicator\n      {...response.data}\n      filter={filter}\n      error={badResponse ? new Error(responseStatus) : error}\n      isLoading={isLoading}\n      componentTitle=\"Targets information\"\n    />\n  );\n};\n\nexport default ScrapePoolList;\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport Filter from './Filter';\nimport ScrapePoolList from './ScrapePoolList';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { useLocalStorage } from '../../hooks/useLocalStorage';\n\nconst Targets: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix }) => {\n  const [filter, setFilter] = useLocalStorage('targets-page-filter', { showHealthy: true, showUnhealthy: true });\n  const filterProps = { filter, setFilter };\n  const scrapePoolListProps = { filter, pathPrefix };\n\n  return (\n    <>\n      <h2>Targets</h2>\n      <Filter {...filterProps} />\n      <ScrapePoolList {...scrapePoolListProps} />\n    </>\n  );\n};\n\nexport default Targets;\n","import React, { FC, useState, useEffect } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { Alert, Button } from 'reactstrap';\n\nimport Panel, { PanelOptions, PanelDefaultOptions } from './Panel';\nimport Checkbox from '../../components/Checkbox';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { generateID, decodePanelOptionsFromQueryString, encodePanelOptionsToQueryString, callAll } from '../../utils';\nimport { useFetch } from '../../hooks/useFetch';\nimport { useLocalStorage } from '../../hooks/useLocalStorage';\n\nexport type PanelMeta = { key: string; options: PanelOptions; id: string };\n\nexport const updateURL = (nextPanels: PanelMeta[]) => {\n  const query = encodePanelOptionsToQueryString(nextPanels);\n  window.history.pushState({}, '', query);\n};\n\ninterface PanelListProps extends PathPrefixProps, RouteComponentProps {\n  panels: PanelMeta[];\n  metrics: string[];\n  useLocalTime: boolean;\n  queryHistoryEnabled: boolean;\n}\n\nexport const PanelListContent: FC<PanelListProps> = ({\n  metrics = [],\n  useLocalTime,\n  pathPrefix,\n  queryHistoryEnabled,\n  ...rest\n}) => {\n  const [panels, setPanels] = useState(rest.panels);\n  const [historyItems, setLocalStorageHistoryItems] = useLocalStorage<string[]>('history', []);\n\n  useEffect(() => {\n    !panels.length && addPanel();\n    window.onpopstate = () => {\n      const panels = decodePanelOptionsFromQueryString(window.location.search);\n      if (panels.length > 0) {\n        setPanels(panels);\n      }\n    };\n    // We want useEffect to act only as componentDidMount, but react still complains about the empty dependencies list.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleExecuteQuery = (query: string) => {\n    const isSimpleMetric = metrics.indexOf(query) !== -1;\n    if (isSimpleMetric || !query.length) {\n      return;\n    }\n    const extendedItems = historyItems.reduce(\n      (acc, metric) => {\n        return metric === query ? acc : [...acc, metric]; // Prevent adding query twice.\n      },\n      [query]\n    );\n    setLocalStorageHistoryItems(extendedItems.slice(0, 50));\n  };\n\n  const addPanel = () => {\n    callAll(\n      setPanels,\n      updateURL\n    )([\n      ...panels,\n      {\n        id: generateID(),\n        key: `${panels.length}`,\n        options: PanelDefaultOptions,\n      },\n    ]);\n  };\n\n  return (\n    <>\n      {panels.map(({ id, options }) => (\n        <Panel\n          onExecuteQuery={handleExecuteQuery}\n          key={id}\n          options={options}\n          onOptionsChanged={opts =>\n            callAll(setPanels, updateURL)(panels.map(p => (id === p.id ? { ...p, options: opts } : p)))\n          }\n          removePanel={() =>\n            callAll(\n              setPanels,\n              updateURL\n            )(\n              panels.reduce<PanelMeta[]>(\n                (acc, panel) => (panel.id !== id ? [...acc, { ...panel, key: `${acc.length}` }] : acc),\n                []\n              )\n            )\n          }\n          useLocalTime={useLocalTime}\n          metricNames={metrics}\n          pastQueries={queryHistoryEnabled ? historyItems : []}\n          pathPrefix={pathPrefix}\n        />\n      ))}\n      <Button className=\"mb-3\" color=\"primary\" onClick={addPanel}>\n        Add Panel\n      </Button>\n    </>\n  );\n};\n\nconst PanelList: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix = '' }) => {\n  const [delta, setDelta] = useState(0);\n  const [useLocalTime, setUseLocalTime] = useLocalStorage('use-local-time', false);\n  const [enableQueryHistory, setEnableQueryHistory] = useLocalStorage('enable-query-history', false);\n\n  const { response: metricsRes, error: metricsErr } = useFetch<string[]>(`${pathPrefix}/api/v1/label/__name__/values`);\n\n  const browserTime = new Date().getTime() / 1000;\n  const { response: timeRes, error: timeErr } = useFetch<{ result: number[] }>(`${pathPrefix}/api/v1/query?query=time()`);\n\n  useEffect(() => {\n    if (timeRes.data) {\n      const serverTime = timeRes.data.result[0];\n      setDelta(Math.abs(browserTime - serverTime));\n    }\n    /**\n     * React wants to include browserTime to useEffect dependencies list which will cause a delta change on every re-render\n     * Basically it's not recommended to disable this rule, but this is the only way to take control over the useEffect\n     * dependencies and to not include the browserTime variable.\n     **/\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timeRes.data]);\n\n  return (\n    <>\n      <Checkbox\n        wrapperStyles={{ marginLeft: 3, display: 'inline-block' }}\n        id=\"query-history-checkbox\"\n        onChange={({ target }) => setEnableQueryHistory(target.checked)}\n        defaultChecked={enableQueryHistory}\n      >\n        Enable query history\n      </Checkbox>\n      <Checkbox\n        wrapperStyles={{ marginLeft: 20, display: 'inline-block' }}\n        id=\"use-local-time-checkbox\"\n        onChange={({ target }) => setUseLocalTime(target.checked)}\n        defaultChecked={useLocalTime}\n      >\n        Use local time\n      </Checkbox>\n      {(delta > 30 || timeErr) && (\n        <Alert color=\"danger\">\n          <strong>Warning: </strong>\n          {timeErr && `Unexpected response status when fetching server time: ${timeErr.message}`}\n          {delta >= 30 &&\n            `Error fetching server time: Detected ${delta} seconds time difference between your browser and the server. Prometheus relies on accurate time and time drift might cause unexpected query results.`}\n        </Alert>\n      )}\n      {metricsErr && (\n        <Alert color=\"danger\">\n          <strong>Warning: </strong>\n          Error fetching metrics list: Unexpected response status when fetching metric names: {metricsErr.message}\n        </Alert>\n      )}\n      <PanelListContent\n        panels={decodePanelOptionsFromQueryString(window.location.search)}\n        pathPrefix={pathPrefix}\n        useLocalTime={useLocalTime}\n        metrics={metricsRes.data}\n        queryHistoryEnabled={enableQueryHistory}\n      />\n    </>\n  );\n};\n\nexport default PanelList;\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from '@reach/router';\nimport { Table } from 'reactstrap';\n\nimport { useFetch } from '../../hooks/useFetch';\nimport PathPrefixProps from '../../types/PathPrefixProps';\nimport { withStatusIndicator } from '../../components/withStatusIndicator';\n\ninterface Stats {\n  name: string;\n  value: number;\n}\n\nexport interface TSDBMap {\n  seriesCountByMetricName: Stats[];\n  labelValueCountByLabelName: Stats[];\n  memoryInBytesByLabelName: Stats[];\n  seriesCountByLabelValuePair: Stats[];\n}\n\nexport const TSDBStatusContent: FC<TSDBMap> = ({\n  labelValueCountByLabelName,\n  seriesCountByMetricName,\n  memoryInBytesByLabelName,\n  seriesCountByLabelValuePair,\n}) => {\n  return (\n    <div>\n      <h2>TSDB Status</h2>\n      <h3 className=\"p-2\">Head Cardinality Stats</h3>\n      {[\n        { title: 'Top 10 label names with value count', stats: labelValueCountByLabelName },\n        { title: 'Top 10 series count by metric names', stats: seriesCountByMetricName },\n        { title: 'Top 10 label names with high memory usage', unit: 'Bytes', stats: memoryInBytesByLabelName },\n        { title: 'Top 10 series count by label value pairs', stats: seriesCountByLabelValuePair },\n      ].map(({ title, unit = 'Count', stats }) => {\n        return (\n          <div className=\"p-2\" key={title}>\n            <h3>{title}</h3>\n            <Table bordered size=\"sm\" striped>\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>{unit}</th>\n                </tr>\n              </thead>\n              <tbody>\n                {stats.map(({ name, value }) => {\n                  return (\n                    <tr key={name}>\n                      <td>{name}</td>\n                      <td>{value}</td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </Table>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\nTSDBStatusContent.displayName = 'TSDBStatusContent';\n\nconst TSDBStatusContentWithStatusIndicator = withStatusIndicator(TSDBStatusContent);\n\nconst TSDBStatus: FC<RouteComponentProps & PathPrefixProps> = ({ pathPrefix }) => {\n  const { response, error, isLoading } = useFetch<TSDBMap>(`${pathPrefix}/api/v1/status/tsdb`);\n\n  return (\n    <TSDBStatusContentWithStatusIndicator\n      error={error}\n      isLoading={isLoading}\n      {...response.data}\n      componentTitle=\"TSDB Status information\"\n    />\n  );\n};\n\nexport default TSDBStatus;\n","import React, { FC } from 'react';\nimport Navigation from './Navbar';\nimport { Container } from 'reactstrap';\n\nimport './App.css';\nimport { Router, Redirect } from '@reach/router';\nimport { Alerts, Config, Flags, Rules, ServiceDiscovery, Status, Targets, TSDBStatus, PanelList } from './pages';\nimport PathPrefixProps from './types/PathPrefixProps';\n\ninterface AppProps {\n  consolesLink: string | null;\n}\n\nconst App: FC<PathPrefixProps & AppProps> = ({ pathPrefix, consolesLink }) => {\n  return (\n    <>\n      <Navigation pathPrefix={pathPrefix} consolesLink={consolesLink} />\n      <Container fluid style={{ paddingTop: 70 }}>\n        <Router basepath={`${pathPrefix}/new`}>\n          <Redirect from=\"/\" to={`${pathPrefix}/new/graph`} />\n\n          {/*\n            NOTE: Any route added here needs to also be added to the list of\n            React-handled router paths (\"reactRouterPaths\") in /web/web.go.\n          */}\n          <PanelList path=\"/graph\" pathPrefix={pathPrefix} />\n          <Alerts path=\"/alerts\" pathPrefix={pathPrefix} />\n          <Config path=\"/config\" pathPrefix={pathPrefix} />\n          <Flags path=\"/flags\" pathPrefix={pathPrefix} />\n          <Rules path=\"/rules\" pathPrefix={pathPrefix} />\n          <ServiceDiscovery path=\"/service-discovery\" pathPrefix={pathPrefix} />\n          <Status path=\"/status\" pathPrefix={pathPrefix} />\n          <TSDBStatus path=\"/tsdb-status\" pathPrefix={pathPrefix} />\n          <Targets path=\"/targets\" pathPrefix={pathPrefix} />\n        </Router>\n      </Container>\n    </>\n  );\n};\n\nexport default App;\n","import './globals';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { isPresent } from './utils';\n\n// Declared/defined in public/index.html, value replaced by Prometheus when serving bundle.\ndeclare const GLOBAL_PATH_PREFIX: string;\ndeclare const GLOBAL_CONSOLES_LINK: string;\n\nlet prefix = GLOBAL_PATH_PREFIX;\nlet consolesLink: string | null = GLOBAL_CONSOLES_LINK;\n\nif (GLOBAL_PATH_PREFIX === 'PATH_PREFIX_PLACEHOLDER' || GLOBAL_PATH_PREFIX === '/' || !isPresent(GLOBAL_PATH_PREFIX)) {\n  // Either we are running the app outside of Prometheus, so the placeholder value in\n  // the index.html didn't get replaced, or we have a '/' prefix, which we also need to\n  // normalize to '' to make concatenations work (prefixes like '/foo/bar/' already get\n  // their trailing slash stripped by Prometheus).\n  prefix = '';\n}\n\nif (\n  GLOBAL_CONSOLES_LINK === 'CONSOLES_LINK_PLACEHOLDER' ||\n  GLOBAL_CONSOLES_LINK === '' ||\n  !isPresent(GLOBAL_CONSOLES_LINK)\n) {\n  consolesLink = null;\n}\n\nReactDOM.render(<App pathPrefix={prefix} consolesLink={consolesLink} />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ScrapePoolPanel_container__2macm\",\"title\":\"ScrapePoolPanel_title__1ppGj\",\"normal\":\"ScrapePoolPanel_normal__1AuiN ScrapePoolPanel_title__1ppGj\",\"danger\":\"ScrapePoolPanel_danger__ZoHk6 ScrapePoolPanel_title__1ppGj\",\"table\":\"ScrapePoolPanel_table__1Sdr1\",\"cell\":\"ScrapePoolPanel_cell__3LVb_\",\"endpoint\":\"ScrapePoolPanel_endpoint__1N4gx ScrapePoolPanel_cell__3LVb_\",\"labels\":\"ScrapePoolPanel_labels__1VVxb ScrapePoolPanel_cell__3LVb_\",\"state\":\"ScrapePoolPanel_state__2BqDx ScrapePoolPanel_cell__3LVb_\",\"last-scrape\":\"ScrapePoolPanel_last-scrape__192VK ScrapePoolPanel_cell__3LVb_\",\"errors\":\"ScrapePoolPanel_errors__2JBvY ScrapePoolPanel_cell__3LVb_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Filter_btn__1yhdg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"discovered\":\"TargetLabels_discovered__2eSl4\"};"],"sourceRoot":""}